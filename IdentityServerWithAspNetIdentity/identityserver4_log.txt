2018-04-08 19:17:13.322 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 19:17:13.404 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 19:17:13.413 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 19:17:13.417 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 19:17:13.423 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 19:17:13.427 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 19:17:34.225 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 19:17:34.479 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 19:17:34.482 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 19:17:34.490 +03:00 [DBG] Start authorize request
2018-04-08 19:17:34.509 +03:00 [DBG] No user present in authorize request
2018-04-08 19:17:34.522 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 19:17:34.600 +03:00 [ERR] Unknown client or not enabled: dews.web
{
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.360762018489099171523204254204",
    "state": "15232042542040.7144143871883859"
  }
}
2018-04-08 19:17:34.608 +03:00 [ERR] Request validation failed
2018-04-08 19:17:34.612 +03:00 [INF] {
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.360762018489099171523204254204",
    "state": "15232042542040.7144143871883859"
  }
}
2018-04-08 19:17:34.673 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ActivityId": "0HLCTDGO7KC7H:00000002",
  "TimeStamp": "2018-04-08T16:17:34Z",
  "ProcessId": 9088,
  "LocalIpAddress": "127.0.0.1:12579",
  "RemoteIpAddress": "::1"
}
2018-04-08 19:57:07.388 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 19:57:07.466 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 19:57:07.473 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 19:57:07.475 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 19:57:07.477 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 19:57:07.480 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 19:57:28.235 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 19:57:28.461 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 19:57:28.467 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 19:57:28.479 +03:00 [DBG] Start authorize request
2018-04-08 19:57:28.502 +03:00 [DBG] No user present in authorize request
2018-04-08 19:57:28.518 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 19:57:28.620 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 19:57:28.730 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232066482090.25568346977133727",
  "Nonce": "N0.52201133180631981523206648209",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.52201133180631981523206648209",
    "state": "15232066482090.25568346977133727"
  }
}
2018-04-08 19:57:28.743 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 19:57:28.878 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 19:57:28.883 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 19:57:31.397 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 19:57:33.504 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 19:57:33.571 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 19:57:34.038 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 19:57:34.189 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 19:59:05.144 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 19:59:05.199 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 19:59:05.205 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 19:59:05.208 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 19:59:05.210 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 19:59:05.212 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 19:59:15.221 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 19:59:15.671 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 19:59:15.796 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 20:01:24.496 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:01:24.564 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:01:24.570 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:01:24.573 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:01:24.576 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:01:24.579 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:01:37.174 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:01:37.346 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:01:37.350 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:01:37.361 +03:00 [DBG] Start authorize request
2018-04-08 20:01:37.377 +03:00 [DBG] No user present in authorize request
2018-04-08 20:01:37.389 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:01:37.470 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:01:37.606 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232068971440.022309138962822495",
  "Nonce": "N0.54789211560925241523206897144",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.54789211560925241523206897144",
    "state": "15232068971440.022309138962822495"
  }
}
2018-04-08 20:01:37.620 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:01:37.763 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:01:37.767 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:01:40.242 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:01:52.515 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:01:52.610 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:01:53.175 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 20:01:53.307 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 20:01:53.779 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateReadOnlyConnection()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
2018-04-08 20:01:53.808 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.<FindByLoginAsync>d__45.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<FindUserFromExternalProviderAsync>d__18.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 451
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<ExternalLoginCallback>d__10.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 166
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-08 20:02:57.871 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:02:57.944 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:02:57.951 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:02:57.953 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:02:57.957 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:02:57.960 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:02:59.932 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:03:00.078 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:03:08.072 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:03:08.085 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:03:08.088 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:03:08.100 +03:00 [DBG] Start authorize request
2018-04-08 20:03:08.120 +03:00 [DBG] No user present in authorize request
2018-04-08 20:03:08.124 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:03:08.128 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:03:08.234 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232066482090.25568346977133727",
  "Nonce": "N0.98240660909993681523206988056",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.98240660909993681523206988056",
    "state": "15232066482090.25568346977133727"
  }
}
2018-04-08 20:03:08.250 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:03:08.297 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:03:08.302 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:03:09.721 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:03:10.891 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:03:10.968 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:03:11.453 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 20:03:11.575 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 20:03:11.918 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateReadOnlyConnection()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
2018-04-08 20:03:11.937 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Keyword not supported: 'user id'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.<FindByLoginAsync>d__45.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<FindUserFromExternalProviderAsync>d__18.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 451
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<ExternalLoginCallback>d__10.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 166
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-08 20:08:45.539 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:08:45.591 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:08:45.597 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:08:45.599 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:08:45.602 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:08:45.604 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:09:09.863 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:09:10.051 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:09:10.066 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:09:10.083 +03:00 [DBG] Start authorize request
2018-04-08 20:09:10.105 +03:00 [DBG] No user present in authorize request
2018-04-08 20:09:10.121 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:09:10.244 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:09:10.405 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232073498310.03356605691651349",
  "Nonce": "N0.081468459211262221523207349832",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.081468459211262221523207349832",
    "state": "15232073498310.03356605691651349"
  }
}
2018-04-08 20:09:10.421 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:09:10.578 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:09:10.582 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:09:13.016 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:09:14.431 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:09:14.533 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:09:15.002 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 20:09:15.138 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 20:09:15.542 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateReadOnlyConnection()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
2018-04-08 20:09:15.561 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Keyword not supported: 'server'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.<FindByLoginAsync>d__45.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<FindUserFromExternalProviderAsync>d__18.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 451
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<ExternalLoginCallback>d__10.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 166
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-08 20:11:21.375 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:11:21.463 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:11:21.470 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:11:21.473 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:11:21.476 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:11:21.479 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:11:29.848 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:11:30.059 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:11:38.834 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:11:40.200 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:11:40.295 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:11:40.827 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 20:11:40.961 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 20:11:41.327 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateReadOnlyConnection()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
2018-04-08 20:11:41.344 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Keyword not supported: 'initial catalog'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.<FindByLoginAsync>d__45.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<FindUserFromExternalProviderAsync>d__18.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 451
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<ExternalLoginCallback>d__10.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 166
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-08 20:12:25.660 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:12:25.715 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:12:25.721 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:12:25.724 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:12:25.726 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:12:25.729 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:13:23.841 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:13:23.982 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:13:23.986 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:13:24.000 +03:00 [DBG] Start authorize request
2018-04-08 20:13:24.022 +03:00 [DBG] No user present in authorize request
2018-04-08 20:13:24.032 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:13:24.105 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:13:24.198 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232076037900.8105448578330547",
  "Nonce": "N0.33536438678687851523207603790",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.33536438678687851523207603790",
    "state": "15232076037900.8105448578330547"
  }
}
2018-04-08 20:13:24.218 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:13:24.368 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:13:24.372 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:13:26.769 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:13:28.367 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:13:28.449 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:13:28.889 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'database'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
System.ArgumentException: Keyword not supported: 'database'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
2018-04-08 20:13:29.012 +03:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServerWithAspNetIdentity.Data.ApplicationDbContext'.
System.ArgumentException: Keyword not supported: 'database'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
System.ArgumentException: Keyword not supported: 'database'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
2018-04-08 20:13:29.345 +03:00 [ERR] An exception occurred while calculating the database error page content. Skipping display of the database error page.
System.ArgumentException: Keyword not supported: 'database'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateReadOnlyConnection()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.ExistsAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
2018-04-08 20:13:29.361 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: Keyword not supported: 'database'.
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.Sqlite.SqliteConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection.set_ConnectionString(String value)
   at Microsoft.Data.Sqlite.SqliteConnection..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Internal.LazyRef`1.get_Value()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.<OpenAsync>d__34.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Storage.Internal.SqliteRelationalConnection.<OpenAsync>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<BufferlessMoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncQueryingEnumerable`1.AsyncEnumerator.<MoveNext>d__9.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.<SingleOrDefault_>d__381`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.TaskResultAsyncEnumerable`1.Enumerator.<MoveNext>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.SelectEnumerableAsyncIterator`2.<MoveNextCore>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at System.Linq.AsyncEnumerable.AsyncIterator`1.<MoveNext>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.AsyncLinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.<MoveNext>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<ExecuteSingletonAsyncQuery>d__23`1.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.<FindByLoginAsync>d__45.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<FindUserFromExternalProviderAsync>d__18.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 451
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<ExternalLoginCallback>d__10.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Quickstart\Account\AccountController.cs:line 166
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__12.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-08 20:16:52.915 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:16:52.978 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:16:52.985 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:16:52.987 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:16:52.990 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:16:52.993 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:17:03.602 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:17:03.766 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:17:03.770 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:17:03.778 +03:00 [DBG] Start authorize request
2018-04-08 20:17:03.795 +03:00 [DBG] No user present in authorize request
2018-04-08 20:17:03.806 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:17:03.913 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:17:04.043 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232076037900.8105448578330547",
  "Nonce": "N0.43590366187302231523207823573",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.43590366187302231523207823573",
    "state": "15232076037900.8105448578330547"
  }
}
2018-04-08 20:17:04.066 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:17:04.202 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:17:04.206 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:17:06.640 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:17:08.457 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:17:08.520 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:17:09.581 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "DisplayName": "m.akkas88@gmail.com",
  "Endpoint": "UI",
  "ActivityId": "0HLCTEI31BQOF:00000005",
  "TimeStamp": "2018-04-08T17:17:09Z",
  "ProcessId": 21864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:17:09.604 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:17:09.611 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 20:17:09.622 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:17:09.634 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:17:09.666 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:09.670 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:09.674 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:17:09.678 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:17:09.681 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:17:09.692 +03:00 [DBG] Start authorize callback request
2018-04-08 20:17:09.701 +03:00 [DBG] User in authorize request: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:17:09.704 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:17:09.708 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:17:09.711 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232076037900.8105448578330547",
  "Nonce": "N0.43590366187302231523207823573",
  "SessionId": "9414b5130ec5e1f72bbbf387a04bf1de",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.43590366187302231523207823573",
    "state": "15232076037900.8105448578330547"
  }
}
2018-04-08 20:17:09.835 +03:00 [DBG] user_consent grant with value: dews.web|9467ac3a-4899-4e1c-974b-a60289850c26 not found in store.
2018-04-08 20:17:09.839 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:17:09.842 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 20:17:09.858 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:09.862 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:09.952 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:17:09.956 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:17:12.529 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:17:12.535 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:12.539 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:12.628 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:17:12.634 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:17:12.691 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:12.695 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:17:12.698 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:17:12.701 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:17:12.707 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:17:12.711 +03:00 [DBG] Start authorize callback request
2018-04-08 20:17:12.758 +03:00 [DBG] User in authorize request: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:17:12.761 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:17:12.766 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:17:12.770 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232076037900.8105448578330547",
  "Nonce": "N0.43590366187302231523207823573",
  "SessionId": "9414b5130ec5e1f72bbbf387a04bf1de",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.43590366187302231523207823573",
    "state": "15232076037900.8105448578330547"
  }
}
2018-04-08 20:17:12.835 +03:00 [DBG] user_consent grant with value: dews.web|9467ac3a-4899-4e1c-974b-a60289850c26 not found in store.
2018-04-08 20:17:12.839 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:17:12.860 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 20:17:12.877 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 20:17:12.885 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:17:12.911 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:17:12.928 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:17:12.932 +03:00 [DBG] Getting claims for access token for subject: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:17:13.164 +03:00 [DBG] Getting claims for identity token for subject: 9467ac3a-4899-4e1c-974b-a60289850c26 and client: dews.web
2018-04-08 20:17:13.315 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****DY_A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****fd-A"
    }
  ],
  "ActivityId": "0HLCTEI31BQOF:00000009",
  "TimeStamp": "2018-04-08T17:17:13Z",
  "ProcessId": 21864,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:17:13.339 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232076037900.8105448578330547",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:17:13.385 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:17:13.390 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:17:16.108 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:17:16.120 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:17:16.125 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:17:16.140 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:17:16.150 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:17:16.156 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:17:16.172 +03:00 [DBG] Start key discovery request
2018-04-08 20:17:16.315 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:17:16.321 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:17:16.325 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:17:16.468 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:17:16.472 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:17:16.476 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:17:16.508 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:17:16.516 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:17:16.543 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:17:16.563 +03:00 [DBG] Start userinfo request
2018-04-08 20:17:16.576 +03:00 [DBG] Bearer token found in header
2018-04-08 20:17:16.761 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:17:16.772 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523207833,
    "exp": 1523211433,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9467ac3a-4899-4e1c-974b-a60289850c26",
    "auth_time": 1523207829,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:17:16.783 +03:00 [DBG] Creating userinfo response
2018-04-08 20:17:16.792 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:17:16.799 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:17:16.806 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:17:16.809 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:17:16.953 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name
2018-04-08 20:17:16.963 +03:00 [DBG] End userinfo request
2018-04-08 20:17:56.601 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:17:56.670 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:17:56.679 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:17:56.682 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:17:56.684 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:17:56.687 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:18:02.285 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:02.293 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:02.304 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:18:02.319 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:18:02.324 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:18:02.334 +03:00 [DBG] Start authorize request
2018-04-08 20:18:02.359 +03:00 [DBG] User in authorize request: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:18:02.377 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:18:02.467 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:18:02.596 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232076037900.8105448578330547",
  "Nonce": "N0.00193417488282099371523207882076",
  "SessionId": "9414b5130ec5e1f72bbbf387a04bf1de",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.00193417488282099371523207882076",
    "state": "15232076037900.8105448578330547"
  }
}
2018-04-08 20:18:03.494 +03:00 [DBG] user_consent grant with value: dews.web|9467ac3a-4899-4e1c-974b-a60289850c26 not found in store.
2018-04-08 20:18:03.498 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:18:03.500 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 20:18:03.546 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:03.554 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:03.805 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:18:03.809 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:18:07.678 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:18:07.684 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:07.688 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:07.768 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:18:07.770 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:18:07.814 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:07.820 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:18:07.825 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:18:07.830 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:18:07.834 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:18:07.843 +03:00 [DBG] Start authorize callback request
2018-04-08 20:18:07.883 +03:00 [DBG] User in authorize request: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:18:07.887 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:18:07.890 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:18:07.895 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232076037900.8105448578330547",
  "Nonce": "N0.00193417488282099371523207882076",
  "SessionId": "9414b5130ec5e1f72bbbf387a04bf1de",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.00193417488282099371523207882076",
    "state": "15232076037900.8105448578330547"
  }
}
2018-04-08 20:18:07.977 +03:00 [DBG] user_consent grant with value: dews.web|9467ac3a-4899-4e1c-974b-a60289850c26 not found in store.
2018-04-08 20:18:07.980 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:18:07.995 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 20:18:08.012 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 20:18:08.019 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:18:08.047 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:18:08.066 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:18:08.070 +03:00 [DBG] Getting claims for access token for subject: 9467ac3a-4899-4e1c-974b-a60289850c26
2018-04-08 20:18:08.373 +03:00 [DBG] Getting claims for identity token for subject: 9467ac3a-4899-4e1c-974b-a60289850c26 and client: dews.web
2018-04-08 20:18:08.535 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ppVw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0Bzg"
    }
  ],
  "ActivityId": "0HLCTEIM07QGN:00000004",
  "TimeStamp": "2018-04-08T17:18:08Z",
  "ProcessId": 28560,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:18:08.545 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9467ac3a-4899-4e1c-974b-a60289850c26",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232076037900.8105448578330547",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:18:11.255 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:18:11.263 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:18:11.266 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:18:11.276 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:18:11.284 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:18:11.286 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:18:11.294 +03:00 [DBG] Start key discovery request
2018-04-08 20:18:11.397 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:18:11.401 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:18:11.404 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:18:11.454 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:18:11.466 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:18:11.471 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:18:11.508 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:18:11.520 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:18:11.523 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:18:11.539 +03:00 [DBG] Start userinfo request
2018-04-08 20:18:11.554 +03:00 [DBG] Bearer token found in header
2018-04-08 20:18:11.719 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:18:11.730 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523207888,
    "exp": 1523211488,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9467ac3a-4899-4e1c-974b-a60289850c26",
    "auth_time": 1523207829,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:18:11.741 +03:00 [DBG] Creating userinfo response
2018-04-08 20:18:11.750 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:18:11.756 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:18:11.765 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:18:11.768 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:18:11.873 +03:00 [INF] Profile service returned to the following claim types: sub preferred_username name
2018-04-08 20:18:11.876 +03:00 [DBG] End userinfo request
2018-04-08 20:18:46.634 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:18:46.640 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:18:46.658 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:18:46.664 +03:00 [DBG] Start authorize request
2018-04-08 20:18:46.668 +03:00 [DBG] No user present in authorize request
2018-04-08 20:18:46.671 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:18:46.676 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:18:46.682 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232079266210.58843654266857",
  "Nonce": "N0.87979503965164341523207926621",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.87979503965164341523207926621",
    "state": "15232079266210.58843654266857"
  }
}
2018-04-08 20:18:46.688 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:18:46.768 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:18:46.773 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:18:49.234 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:19:01.145 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:19:01.268 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:20:30.550 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "02f6fe01-9497-4b1b-b0fd-0c00de4ad802",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTEIM07QGS:00000008",
  "TimeStamp": "2018-04-08T17:20:30Z",
  "ProcessId": 28560,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:20:36.148 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:20:36.153 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 20:20:36.163 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:20:38.242 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:21:26.303 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:21:26.382 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:21:26.390 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:21:26.392 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:21:26.395 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:21:26.398 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:21:28.589 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:21:33.788 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTEKKH1AMD:00000001",
  "TimeStamp": "2018-04-08T17:21:33Z",
  "ProcessId": 14412,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:21:33.817 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:21:33.822 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 20:21:33.848 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:21:33.863 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:21:33.927 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:33.933 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:33.943 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:21:33.958 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:21:33.962 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:21:33.977 +03:00 [DBG] Start authorize callback request
2018-04-08 20:21:34.006 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:21:34.020 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:21:34.150 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:21:34.259 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232079266210.58843654266857",
  "Nonce": "N0.87979503965164341523207926621",
  "SessionId": "e3266cebc78db5323b6ba46edb6f085b",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.87979503965164341523207926621",
    "state": "15232079266210.58843654266857"
  }
}
2018-04-08 20:21:34.516 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 20:21:34.520 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:21:34.523 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 20:21:34.546 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:34.552 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:34.763 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:21:34.767 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:21:40.423 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:21:40.428 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:40.432 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:40.505 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:21:40.508 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:21:40.556 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:40.561 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:21:40.565 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:21:40.569 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:21:40.573 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:21:40.579 +03:00 [DBG] Start authorize callback request
2018-04-08 20:21:40.622 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:21:40.627 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:21:40.630 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:21:40.633 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232079266210.58843654266857",
  "Nonce": "N0.87979503965164341523207926621",
  "SessionId": "e3266cebc78db5323b6ba46edb6f085b",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.87979503965164341523207926621",
    "state": "15232079266210.58843654266857"
  }
}
2018-04-08 20:21:40.679 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 20:21:40.682 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:21:40.698 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 20:21:40.713 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 20:21:40.721 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:21:40.747 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:21:40.772 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:21:40.778 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:21:41.042 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:21:41.182 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****T7aw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****99hA"
    }
  ],
  "ActivityId": "0HLCTEKKH1AMD:00000006",
  "TimeStamp": "2018-04-08T17:21:41Z",
  "ProcessId": 14412,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:21:41.193 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232079266210.58843654266857",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:21:41.219 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:21:41.223 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:21:43.908 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:21:43.916 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:21:43.920 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:21:43.931 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:21:43.940 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:21:43.943 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:21:43.953 +03:00 [DBG] Start key discovery request
2018-04-08 20:21:44.060 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:21:44.065 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:21:44.071 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:21:44.103 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:21:44.108 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:21:44.110 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:21:44.117 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:21:44.127 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:21:44.130 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:21:44.141 +03:00 [DBG] Start userinfo request
2018-04-08 20:21:44.147 +03:00 [DBG] Bearer token found in header
2018-04-08 20:21:44.266 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:21:44.277 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523208100,
    "exp": 1523211700,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208093,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:21:44.290 +03:00 [DBG] Creating userinfo response
2018-04-08 20:21:44.299 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:21:44.307 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:21:44.315 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:21:44.318 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:21:44.401 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:21:44.408 +03:00 [DBG] End userinfo request
2018-04-08 20:28:59.062 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 20:28:59.161 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 20:28:59.170 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 20:28:59.173 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 20:28:59.175 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 20:28:59.179 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 20:29:00.237 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:00.307 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:00.331 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:29:00.397 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:29:00.437 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:29:00.488 +03:00 [DBG] Start authorize request
2018-04-08 20:29:00.669 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:29:00.795 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:29:00.936 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:29:01.186 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232079266210.58843654266857",
  "Nonce": "N0.92893354715991741523208499867",
  "SessionId": "e3266cebc78db5323b6ba46edb6f085b",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.92893354715991741523208499867",
    "state": "15232079266210.58843654266857"
  }
}
2018-04-08 20:29:02.007 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 20:29:02.010 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:29:02.013 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 20:29:02.049 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:02.054 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:02.608 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:29:02.612 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:29:09.381 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:29:09.388 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:09.391 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:09.484 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:29:09.488 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:29:09.536 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:09.541 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:09.545 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:29:09.549 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:29:09.553 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:29:09.562 +03:00 [DBG] Start authorize callback request
2018-04-08 20:29:09.596 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:29:09.599 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:29:09.605 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:29:09.611 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232079266210.58843654266857",
  "Nonce": "N0.92893354715991741523208499867",
  "SessionId": "e3266cebc78db5323b6ba46edb6f085b",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.92893354715991741523208499867",
    "state": "15232079266210.58843654266857"
  }
}
2018-04-08 20:29:09.705 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 20:29:09.708 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 20:29:09.726 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 20:29:09.746 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 20:29:09.755 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:29:09.790 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:29:09.811 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:29:09.815 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:29:10.141 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:29:10.291 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****BSsA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****E5Pg"
    }
  ],
  "ActivityId": "0HLCTEORE3FGN:00000004",
  "TimeStamp": "2018-04-08T17:29:10Z",
  "ProcessId": 27516,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-08 20:29:10.302 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232079266210.58843654266857",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:29:12.458 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:29:12.470 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:29:12.475 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:29:12.512 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:29:12.534 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:29:12.541 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:29:12.554 +03:00 [DBG] Start key discovery request
2018-04-08 20:29:12.687 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:29:12.708 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:29:12.726 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:29:12.752 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:29:12.755 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:29:12.758 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:29:12.766 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:29:12.774 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:29:12.777 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:29:12.789 +03:00 [DBG] Start userinfo request
2018-04-08 20:29:12.796 +03:00 [DBG] Bearer token found in header
2018-04-08 20:29:12.902 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:29:12.912 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523208550,
    "exp": 1523212150,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208093,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:29:12.926 +03:00 [DBG] Creating userinfo response
2018-04-08 20:29:12.936 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:29:12.942 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:29:12.950 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:29:12.954 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:29:13.025 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:29:13.029 +03:00 [DBG] End userinfo request
2018-04-08 20:29:15.704 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-08 20:29:15.708 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-08 20:29:15.712 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-08 20:29:15.721 +03:00 [DBG] Start discovery request
2018-04-08 20:29:16.070 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:29:16.073 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:29:16.076 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:29:16.081 +03:00 [DBG] Start key discovery request
2018-04-08 20:29:25.839 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:25.842 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:25.845 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 20:29:25.850 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 20:29:25.854 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 20:29:25.864 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:29:25.875 +03:00 [DBG] Start end session request validation
2018-04-08 20:29:25.886 +03:00 [DBG] Start identity token validation
2018-04-08 20:29:25.891 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 20:29:25.932 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:29:25.936 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523208550,
    "exp": 1523208850,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.92893354715991741523208499867",
    "iat": 1523208550,
    "at_hash": "n62d3TUUreMvb319GM4mXQ",
    "sid": "e3266cebc78db5323b6ba46edb6f085b",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208093,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 20:29:25.947 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMDg1NTAsImV4cCI6MTUyMzIwODg1MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjkyODkzMzU0NzE1OTkxNzQxNTIzMjA4NDk5ODY3IiwiaWF0IjoxNTIzMjA4NTUwLCJhdF9oYXNoIjoibjYyZDNUVVVyZU12YjMxOUdNNG1YUSIsInNpZCI6ImUzMjY2Y2ViYzc4ZGI1MzIzYjZiYTQ2ZWRiNmYwODViIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjA4MDkzLCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.T7p44rHfR1ayI6VFf6hWZ4UqlXxXA0QvHhxrg4QmxelU-f_I11kCzUDm0S6KDMGc5TIW-ZAXgVuwMEgHl-L2wMWiWzk6qyc7Wq4lOWdnmObGveoixF395dwC4M0VhUmo3Xgs2vY0NKhz0MhM6MAYsIT6Lx1rG-hLO1Z1Anu_uFDnuOWBq9AUKoyAbBNupIYp6c0naSeic7geXj1b5GPWos50-OuHtvJdlIfhoaQEtbZbizzGPZyoKuLGe8KaI3d0_f958cH75V1bBeYQCo7_klSO4V4qgirZMIEqorKnF7jxA3l_88kJf7My3q07toI0f5bvbO6h4xQbc0_7WIBSsA",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 20:29:25.953 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 20:29:25.970 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:25.974 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:27.694 +03:00 [DBG] CORS request made for path: /account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:29:27.702 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:27.708 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:29:27.781 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 20:29:27.785 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:29:27.789 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 20:29:27.800 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTEORE3FGN:00000007",
  "TimeStamp": "2018-04-08T17:29:27Z",
  "ProcessId": 27516,
  "LocalIpAddress": "127.0.0.1:5000",
  "RemoteIpAddress": "127.0.0.1"
}
2018-04-08 20:29:28.005 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 20:29:28.011 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 20:29:28.015 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 20:29:28.026 +03:00 [DBG] Processing signout callback request
2018-04-08 20:29:28.045 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 20:29:28.049 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 20:29:28.054 +03:00 [INF] Successful signout callback.
2018-04-08 20:29:28.059 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 20:29:28.062 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 20:31:19.729 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:31:19.733 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:31:19.736 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:31:19.749 +03:00 [DBG] Start authorize request
2018-04-08 20:31:19.757 +03:00 [DBG] No user present in authorize request
2018-04-08 20:31:19.761 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:31:19.770 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:31:19.776 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.122925628213606641523208679698",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.122925628213606641523208679698",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:31:19.781 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:31:19.859 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:31:19.863 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:31:21.990 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:31:36.090 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:31:36.153 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:31:36.401 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTEORE3FGT:00000008",
  "TimeStamp": "2018-04-08T17:31:36Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:31:36.417 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:31:36.422 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 20:31:36.429 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:31:36.433 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:31:36.453 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:31:36.457 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:31:36.460 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:31:36.463 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:31:36.467 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:31:36.471 +03:00 [DBG] Start authorize callback request
2018-04-08 20:31:36.475 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:31:36.478 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:31:36.481 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:31:36.485 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.122925628213606641523208679698",
  "SessionId": "9db7e4ea4beb2f68f4f9e42f7dd4c599",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.122925628213606641523208679698",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:31:36.587 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 20:31:36.590 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:31:36.594 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:31:36.597 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:31:36.691 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:31:36.779 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****JBeQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ewsQ"
    }
  ],
  "ActivityId": "0HLCTEORE3FGT:00000009",
  "TimeStamp": "2018-04-08T17:31:36Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:31:36.783 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:31:36.795 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:31:36.798 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:31:38.945 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:31:38.948 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:31:38.951 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:31:38.958 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:31:38.962 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:31:38.965 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:31:38.968 +03:00 [DBG] Start key discovery request
2018-04-08 20:31:39.074 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:31:39.080 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:31:39.085 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:31:39.133 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:31:39.138 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:31:39.143 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:31:39.158 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:31:39.162 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:31:39.165 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:31:39.169 +03:00 [DBG] Start userinfo request
2018-04-08 20:31:39.173 +03:00 [DBG] Bearer token found in header
2018-04-08 20:31:39.210 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:31:39.213 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523208696,
    "exp": 1523212296,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:31:39.218 +03:00 [DBG] Creating userinfo response
2018-04-08 20:31:39.222 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:31:39.226 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:31:39.229 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:31:39.232 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:31:39.316 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:31:39.322 +03:00 [DBG] End userinfo request
2018-04-08 20:43:58.789 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:43:58.792 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:43:58.797 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:43:58.825 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:43:58.828 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:43:58.835 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:43:58.846 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:43:58.854 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:43:58.858 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:43:58.862 +03:00 [DBG] Start userinfo request
2018-04-08 20:43:58.866 +03:00 [DBG] Bearer token found in header
2018-04-08 20:43:58.925 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:43:58.928 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523208696,
    "exp": 1523212296,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:43:58.933 +03:00 [DBG] Creating userinfo response
2018-04-08 20:43:58.936 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:43:58.939 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:43:58.942 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:43:58.945 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:43:59.050 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:43:59.053 +03:00 [DBG] End userinfo request
2018-04-08 20:44:10.088 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:44:10.092 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:44:10.094 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:44:10.098 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:44:10.102 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:44:10.106 +03:00 [DBG] Start authorize request
2018-04-08 20:44:10.110 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:44:10.114 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:44:10.117 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:44:10.122 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.98154147640798281523209450078",
  "SessionId": "9db7e4ea4beb2f68f4f9e42f7dd4c599",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.98154147640798281523209450078",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:44:10.167 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 20:44:10.171 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:44:10.174 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:44:10.176 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:44:10.273 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:44:10.370 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****6d9A"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****XF4A"
    }
  ],
  "ActivityId": "0HLCTEORE3FH2:00000001",
  "TimeStamp": "2018-04-08T17:44:10Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:44:10.374 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:44:11.884 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:44:11.887 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:11.890 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:11.896 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:44:11.899 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:44:11.903 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:44:11.906 +03:00 [DBG] Start key discovery request
2018-04-08 20:44:11.970 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:44:11.975 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:11.980 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:11.995 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:44:11.997 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:12.000 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:12.007 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:44:12.010 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:44:12.013 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:44:12.017 +03:00 [DBG] Start userinfo request
2018-04-08 20:44:12.022 +03:00 [DBG] Bearer token found in header
2018-04-08 20:44:12.058 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:44:12.061 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523209450,
    "exp": 1523213050,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:44:12.064 +03:00 [DBG] Creating userinfo response
2018-04-08 20:44:12.067 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:12.071 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:12.074 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:44:12.077 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:12.154 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:44:12.157 +03:00 [DBG] End userinfo request
2018-04-08 20:44:14.657 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:44:14.662 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:44:14.667 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:44:14.670 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:44:14.673 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:44:14.676 +03:00 [DBG] Start authorize request
2018-04-08 20:44:14.679 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:44:14.682 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:44:14.686 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:44:14.689 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.50681020346234961523209454647",
  "SessionId": "9db7e4ea4beb2f68f4f9e42f7dd4c599",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.50681020346234961523209454647",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:44:14.735 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 20:44:14.738 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:44:14.741 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:44:14.744 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:44:14.839 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:44:14.929 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****HaKQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Ystg"
    }
  ],
  "ActivityId": "0HLCTEORE3FH2:00000002",
  "TimeStamp": "2018-04-08T17:44:14Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:44:14.934 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:44:16.350 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:44:16.353 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:16.356 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:16.362 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:44:16.366 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:44:16.369 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:44:16.372 +03:00 [DBG] Start key discovery request
2018-04-08 20:44:16.450 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:44:16.454 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:16.457 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:16.478 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:44:16.484 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:44:16.504 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:44:16.507 +03:00 [DBG] Start userinfo request
2018-04-08 20:44:16.517 +03:00 [DBG] Bearer token found in header
2018-04-08 20:44:16.554 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:44:16.557 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523209454,
    "exp": 1523213054,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:44:16.561 +03:00 [DBG] Creating userinfo response
2018-04-08 20:44:16.566 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:16.569 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:16.572 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:44:16.575 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:16.656 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:44:16.659 +03:00 [DBG] End userinfo request
2018-04-08 20:44:22.444 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:44:22.448 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:22.450 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:22.467 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:44:22.471 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:44:22.480 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:44:22.487 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:44:22.492 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:44:22.502 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:44:22.510 +03:00 [DBG] Start userinfo request
2018-04-08 20:44:22.514 +03:00 [DBG] Bearer token found in header
2018-04-08 20:44:22.561 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:44:22.565 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523209454,
    "exp": 1523213054,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:44:22.569 +03:00 [DBG] Creating userinfo response
2018-04-08 20:44:22.573 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:22.578 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:22.581 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:44:22.584 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:44:22.662 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:44:22.666 +03:00 [DBG] End userinfo request
2018-04-08 20:45:29.696 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:45:29.701 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:45:29.704 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:45:29.708 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:45:29.712 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:45:29.715 +03:00 [DBG] Start authorize request
2018-04-08 20:45:29.717 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:45:29.721 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:45:29.724 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:45:29.729 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.50228580730990211523209529687",
  "SessionId": "9db7e4ea4beb2f68f4f9e42f7dd4c599",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.50228580730990211523209529687",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:45:29.781 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 20:45:29.785 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:45:29.788 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:45:29.791 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:45:29.904 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:45:29.992 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****gLcA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****suCA"
    }
  ],
  "ActivityId": "0HLCTEORE3FH2:00000003",
  "TimeStamp": "2018-04-08T17:45:29Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:45:29.997 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:45:31.669 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:45:31.673 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:45:31.676 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:45:31.682 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:45:31.687 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:45:31.692 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:45:31.696 +03:00 [DBG] Start key discovery request
2018-04-08 20:45:31.780 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:45:31.784 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:45:31.790 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:45:31.811 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:45:31.814 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:45:31.817 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:45:31.823 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:45:31.827 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:45:31.830 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:45:31.833 +03:00 [DBG] Start userinfo request
2018-04-08 20:45:31.835 +03:00 [DBG] Bearer token found in header
2018-04-08 20:45:31.873 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:45:31.877 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523209529,
    "exp": 1523213129,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:45:31.881 +03:00 [DBG] Creating userinfo response
2018-04-08 20:45:31.884 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:45:31.887 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:45:31.892 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:45:31.895 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:45:31.985 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:45:31.989 +03:00 [DBG] End userinfo request
2018-04-08 20:48:19.926 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:48:19.931 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:48:19.934 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 20:48:19.938 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 20:48:19.970 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 20:48:19.993 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:48:19.997 +03:00 [DBG] Start end session request validation
2018-04-08 20:48:20.000 +03:00 [DBG] Start identity token validation
2018-04-08 20:48:20.004 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 20:48:20.084 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:48:20.087 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523209529,
    "exp": 1523209829,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.50228580730990211523209529687",
    "iat": 1523209529,
    "at_hash": "2caiwZqYunQLQx4Fifupkw",
    "sid": "9db7e4ea4beb2f68f4f9e42f7dd4c599",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523208696,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 20:48:20.092 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMDk1MjksImV4cCI6MTUyMzIwOTgyOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjUwMjI4NTgwNzMwOTkwMjExNTIzMjA5NTI5Njg3IiwiaWF0IjoxNTIzMjA5NTI5LCJhdF9oYXNoIjoiMmNhaXdacVl1blFMUXg0RmlmdXBrdyIsInNpZCI6IjlkYjdlNGVhNGJlYjJmNjhmNGY5ZTQyZjdkZDRjNTk5Iiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjA4Njk2LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.Fz13ri8VSW87Hnv070iB_i2uJ_WbIyWyzW20QR_z_jwMDIEZVTfmuDPTw66ouv0b6a750LAaimMDIbR3p1CyQXCfqxia0Q6bcFB8KzbR0NpwIzyl7bvVX1NhqpV8R7IG1pQSto23Ts3LjNh3Tu4W9iAI7N-AKZ8IKsoFXPVstL5MS5XLIOMalz-ZkLGfbhsDwIU_Eqaw_yoxxYGc3bSsIPXyd64LnfJ-vTcWrCbJ2yZ6n01KPTH-VD1fh76PhF6C5wNpU-oVDjwtDr88uRorjstRXFyup9J7b-BinBmp9nKIbOxicq8VmUb5zJtxAeg2UWwx_CshMQUzNbtiLfgLcA",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 20:48:20.098 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 20:48:20.122 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:48:20.130 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:48:29.918 +03:00 [DBG] CORS request made for path: /account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:48:29.923 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:48:29.926 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:48:29.966 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 20:48:29.969 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:48:29.972 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 20:48:29.975 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTEORE3FH3:00000004",
  "TimeStamp": "2018-04-08T17:48:29Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:48:30.008 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 20:48:30.012 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 20:48:30.018 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 20:48:30.023 +03:00 [DBG] Processing signout callback request
2018-04-08 20:48:30.027 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 20:48:30.031 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 20:48:30.035 +03:00 [INF] Successful signout callback.
2018-04-08 20:48:30.040 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 20:48:30.045 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 20:54:44.199 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 20:54:44.204 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 20:54:44.208 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 20:54:44.211 +03:00 [DBG] Start authorize request
2018-04-08 20:54:44.216 +03:00 [DBG] No user present in authorize request
2018-04-08 20:54:44.219 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:54:44.223 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:54:44.226 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.13850639974850011523210084189",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.13850639974850011523210084189",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:54:44.231 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 20:54:44.272 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:54:44.275 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:54:45.588 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 20:54:49.562 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 20:54:49.648 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 20:54:49.845 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTEORE3FH5:00000005",
  "TimeStamp": "2018-04-08T17:54:49Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:54:49.849 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:54:49.852 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 20:54:49.855 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:54:49.858 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:54:49.876 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:54:49.879 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:54:49.883 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 20:54:49.886 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 20:54:49.890 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 20:54:49.894 +03:00 [DBG] Start authorize callback request
2018-04-08 20:54:49.897 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:54:49.900 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 20:54:49.903 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 20:54:49.906 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.13850639974850011523210084189",
  "SessionId": "1bc3ea4a0a49f58f80269c27bb847c63",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.13850639974850011523210084189",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 20:54:49.998 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 20:54:50.003 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 20:54:50.006 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 20:54:50.011 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:54:50.093 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 20:54:50.176 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****WtAA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****R-Jg"
    }
  ],
  "ActivityId": "0HLCTEORE3FH5:00000006",
  "TimeStamp": "2018-04-08T17:54:50Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:54:50.180 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 20:54:50.185 +03:00 [DBG] Augmenting SignInContext
2018-04-08 20:54:50.189 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 20:54:52.339 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 20:54:52.342 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:54:52.345 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:54:52.350 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 20:54:52.353 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 20:54:52.358 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 20:54:52.361 +03:00 [DBG] Start key discovery request
2018-04-08 20:54:52.447 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:54:52.453 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:54:52.462 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:54:52.491 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 20:54:52.502 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 20:54:52.506 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 20:54:52.525 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 20:54:52.529 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 20:54:52.532 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 20:54:52.535 +03:00 [DBG] Start userinfo request
2018-04-08 20:54:52.538 +03:00 [DBG] Bearer token found in header
2018-04-08 20:54:52.579 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:54:52.582 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523210090,
    "exp": 1523213690,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210089,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 20:54:52.585 +03:00 [DBG] Creating userinfo response
2018-04-08 20:54:52.588 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:54:52.591 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:54:52.594 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 20:54:52.596 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 20:54:52.675 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 20:54:52.678 +03:00 [DBG] End userinfo request
2018-04-08 20:55:16.196 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:55:16.202 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:55:16.204 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 20:55:16.207 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 20:55:16.211 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 20:55:16.214 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 20:55:16.221 +03:00 [DBG] Start end session request validation
2018-04-08 20:55:16.225 +03:00 [DBG] Start identity token validation
2018-04-08 20:55:16.228 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 20:55:16.285 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 20:55:16.288 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523210090,
    "exp": 1523210390,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.13850639974850011523210084189",
    "iat": 1523210090,
    "at_hash": "9AVbwAtg0PTFqx7F3r-AwQ",
    "sid": "1bc3ea4a0a49f58f80269c27bb847c63",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210089,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 20:55:16.292 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTAwOTAsImV4cCI6MTUyMzIxMDM5MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjEzODUwNjM5OTc0ODUwMDExNTIzMjEwMDg0MTg5IiwiaWF0IjoxNTIzMjEwMDkwLCJhdF9oYXNoIjoiOUFWYndBdGcwUFRGcXg3RjNyLUF3USIsInNpZCI6IjFiYzNlYTRhMGE0OWY1OGY4MDI2OWMyN2JiODQ3YzYzIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjEwMDg5LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.DkRelUlP_rdM3Pb8uYb1IHBUtp_DZp6fXeG5WLHj9bkuTZNqzRt7cYLuQduJ5sLRiMcqbImzTg3jQxJ_I77c3vYi5ap225iNqT9DZXZFNQlHJHbB_HEAjYKRjfPBpOHo0G5XJLRibkDkC4Kpm6-mwPbTKGl29fIhZhJNyIoXcvDeOj8_s3UGj7d7zi9P2eFoRLfw1-Ch8yVoYRLPzSHkNfVMw7ADU9DHqzZIzM0QjQDpm4AEWTB2_R1BV0aKrjQcVsO7oTBZlzVAN61PRHsj2I6JKk6O-5Zg9uVG73ZCMxEXW3Zg0cNEwGTO_eVO8XUYWlGrYzxa5XoPY9wL5mWtAA",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 20:55:16.297 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 20:55:16.310 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:55:16.313 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:55:17.684 +03:00 [DBG] CORS request made for path: /account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 20:55:17.689 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:55:17.692 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 20:55:17.722 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 20:55:17.725 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 20:55:17.727 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 20:55:17.730 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTEORE3FH5:00000009",
  "TimeStamp": "2018-04-08T17:55:17Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 20:55:17.757 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 20:55:17.760 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 20:55:17.763 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 20:55:17.768 +03:00 [DBG] Processing signout callback request
2018-04-08 20:55:17.771 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 20:55:17.774 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 20:55:17.777 +03:00 [INF] Successful signout callback.
2018-04-08 20:55:17.780 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 20:55:17.784 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:00:00.294 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:00:00.297 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:00:00.300 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:00:00.302 +03:00 [DBG] Start authorize request
2018-04-08 21:00:00.305 +03:00 [DBG] No user present in authorize request
2018-04-08 21:00:00.309 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:00:00.313 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:00:00.316 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.96244688815190421523210400276",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.96244688815190421523210400276",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:00:00.321 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:00:00.382 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:00:00.385 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:00:02.040 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:00:03.773 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:00:03.826 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:00:03.999 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTEORE3FH5:00000010",
  "TimeStamp": "2018-04-08T18:00:03Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:00:04.003 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:00:04.006 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:00:04.009 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:00:04.013 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:00:04.029 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:04.032 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:04.036 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:00:04.039 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:00:04.042 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:00:04.045 +03:00 [DBG] Start authorize callback request
2018-04-08 21:00:04.048 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:00:04.051 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:00:04.054 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:00:04.057 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.96244688815190421523210400276",
  "SessionId": "26d26d7970b18566c8b2a2843b81a0bd",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.96244688815190421523210400276",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:00:04.156 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:00:04.159 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:00:04.162 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:00:04.164 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:00:04.252 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:00:04.343 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****X-sQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****QmmQ"
    }
  ],
  "ActivityId": "0HLCTEORE3FH5:00000011",
  "TimeStamp": "2018-04-08T18:00:04Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:00:04.347 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:00:04.352 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:00:04.355 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:00:06.180 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:00:06.185 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:00:06.188 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:00:06.194 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:00:06.197 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:00:06.200 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:00:06.204 +03:00 [DBG] Start key discovery request
2018-04-08 21:00:06.313 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:00:06.330 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:00:06.338 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:00:06.368 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:00:06.371 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:00:06.375 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:00:06.383 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:00:06.387 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:00:06.390 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:00:06.393 +03:00 [DBG] Start userinfo request
2018-04-08 21:00:06.395 +03:00 [DBG] Bearer token found in header
2018-04-08 21:00:06.433 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:00:06.436 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523210404,
    "exp": 1523214004,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210404,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:00:06.439 +03:00 [DBG] Creating userinfo response
2018-04-08 21:00:06.442 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:00:06.445 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:00:06.450 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:00:06.453 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:00:06.579 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:00:06.586 +03:00 [DBG] End userinfo request
2018-04-08 21:00:09.216 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:09.220 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:09.223 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:00:09.225 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:00:09.228 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:00:09.232 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:00:09.236 +03:00 [DBG] Start end session request validation
2018-04-08 21:00:09.240 +03:00 [DBG] Start identity token validation
2018-04-08 21:00:09.242 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:00:09.281 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:00:09.284 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523210404,
    "exp": 1523210704,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.96244688815190421523210400276",
    "iat": 1523210404,
    "at_hash": "cZk7EPEMfZ8J0lT375Xrxg",
    "sid": "26d26d7970b18566c8b2a2843b81a0bd",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210404,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:00:09.289 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTA0MDQsImV4cCI6MTUyMzIxMDcwNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjk2MjQ0Njg4ODE1MTkwNDIxNTIzMjEwNDAwMjc2IiwiaWF0IjoxNTIzMjEwNDA0LCJhdF9oYXNoIjoiY1prN0VQRU1mWjhKMGxUMzc1WHJ4ZyIsInNpZCI6IjI2ZDI2ZDc5NzBiMTg1NjZjOGIyYTI4NDNiODFhMGJkIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjEwNDA0LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.ZmNDnMWdgCZ0uB44I1h4gaU4_kWxR4r_ROiYNy2DGDQnUSRtt24xFyC_yqo9Xa2KdBwMjItvwByGO8WFDhlg66olUh6LhknuewjxV772l5q54vFKFAg6vbs31pFMOCHL-axABTZEyFXLH_quMjtighREooz40tVeWqJKPwKTEIEdOJK9sMKlPlpHiL3bDOYhq1KE4c2u-UwcUhM3G2DP_a5mw8c1OzlJJfhPkse1wVQDgtmNyOpPRvp2LTj284xSAfTzsaFcBfSxWd7vP4e3nAKeDHOXr7HGRBy1VdFWi9hXKrWujsCfc8JshZfvQvnronYQkB5ePYv3ur3S--X-sQ",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:00:09.294 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:00:09.311 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:09.316 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:19.915 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:19.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:19.926 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:00:19.929 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:00:19.933 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:00:19.937 +03:00 [DBG] Start authorize request
2018-04-08 21:00:19.941 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:00:19.944 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:00:19.948 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:00:19.951 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.229622135702279851523210419907",
  "SessionId": "26d26d7970b18566c8b2a2843b81a0bd",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.229622135702279851523210419907",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:00:20.007 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:00:20.010 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:00:20.012 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:00:20.015 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:00:20.101 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:00:20.205 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****CbsA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6Niw"
    }
  ],
  "ActivityId": "0HLCTEORE3FH5:00000014",
  "TimeStamp": "2018-04-08T18:00:20Z",
  "ProcessId": 27516,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:00:20.209 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:00:21.723 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:00:21.727 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:00:21.731 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:00:21.738 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:00:21.743 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:00:21.747 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:00:21.752 +03:00 [DBG] Start key discovery request
2018-04-08 21:00:21.854 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:00:21.860 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:00:21.865 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:00:21.879 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:00:21.882 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:00:21.886 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:00:21.891 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:00:21.893 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:00:21.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:00:21.898 +03:00 [DBG] Start userinfo request
2018-04-08 21:00:21.901 +03:00 [DBG] Bearer token found in header
2018-04-08 21:00:21.938 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:00:21.942 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523210420,
    "exp": 1523214020,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210404,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:00:21.946 +03:00 [DBG] Creating userinfo response
2018-04-08 21:00:21.950 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:00:21.954 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:00:21.957 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:00:21.960 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:00:22.049 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:00:22.053 +03:00 [DBG] End userinfo request
2018-04-08 21:00:26.159 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:26.163 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:26.168 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:00:26.172 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:00:26.176 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:00:26.181 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:00:26.185 +03:00 [DBG] Start end session request validation
2018-04-08 21:00:26.189 +03:00 [DBG] Start identity token validation
2018-04-08 21:00:26.192 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:00:26.235 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:00:26.238 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523210420,
    "exp": 1523210720,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.229622135702279851523210419907",
    "iat": 1523210420,
    "at_hash": "rsxnIET8fv0JQr-J2r19Bw",
    "sid": "26d26d7970b18566c8b2a2843b81a0bd",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210404,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:00:26.242 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTA0MjAsImV4cCI6MTUyMzIxMDcyMCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjIyOTYyMjEzNTcwMjI3OTg1MTUyMzIxMDQxOTkwNyIsImlhdCI6MTUyMzIxMDQyMCwiYXRfaGFzaCI6InJzeG5JRVQ4ZnYwSlFyLUoycjE5QnciLCJzaWQiOiIyNmQyNmQ3OTcwYjE4NTY2YzhiMmEyODQzYjgxYTBiZCIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMDQwNCwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.VFbhmia6sXeUK2WynJdg-8EZ02-kHZWTqEBTKHa-ky2Hl4ljlIFNe3YpL5nJRlT6Wwbnu3foHyq8F_oLO1C5h8H2LpXhKX2NlcPu52NT0Ay26cmXoeDbmrYwsL3xkSy8vY-UuJxm6znZFPQVdj8YxfetrSmY34ok1GChgjunVrUumBmw91C4SJC5KPIHPL66zzNW6KrilEnI3I0mh1s4t7iw8XzxQYp3jbIKAFFqJ71DFaf3Jr1BjfQEsuCSTemeE582f5lUwHRlrIMC-acPTBoTBysyVW5gBOhW9qQW3rILl481761Gm35wPvaoWrgKsyocH_k29hRiZi2kWuCbsA",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:00:26.248 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:00:26.261 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:00:26.266 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:04.330 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 21:03:04.487 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 21:03:04.513 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 21:03:04.528 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 21:03:04.534 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 21:03:04.538 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 21:03:38.549 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:38.557 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:38.567 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:03:38.579 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:03:38.582 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:03:38.590 +03:00 [DBG] Start authorize request
2018-04-08 21:03:38.604 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:03:38.614 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:03:38.692 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:03:38.780 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.224714956211210961523210618362",
  "SessionId": "26d26d7970b18566c8b2a2843b81a0bd",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.224714956211210961523210618362",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:03:39.488 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 21:03:39.493 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 21:03:39.496 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 21:03:39.518 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:39.525 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:39.724 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:03:39.728 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:03:42.285 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 21:03:42.292 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:42.297 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:42.391 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:03:42.394 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:03:42.445 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:42.448 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:42.454 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:03:42.460 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:03:42.463 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:03:42.475 +03:00 [DBG] Start authorize callback request
2018-04-08 21:03:42.511 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:03:42.514 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:03:42.517 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:03:42.521 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.224714956211210961523210618362",
  "SessionId": "26d26d7970b18566c8b2a2843b81a0bd",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.224714956211210961523210618362",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:03:42.582 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 21:03:42.585 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 21:03:42.599 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 21:03:42.615 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 21:03:42.623 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:03:42.650 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:03:42.671 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:03:42.675 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:03:42.993 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:03:43.125 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****kMTQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dyHw"
    }
  ],
  "ActivityId": "0HLCTFBSVI360:00000005",
  "TimeStamp": "2018-04-08T18:03:43Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:03:43.134 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:03:44.943 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:03:44.959 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:03:44.964 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:03:44.977 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:03:44.987 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:03:44.991 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:03:44.999 +03:00 [DBG] Start key discovery request
2018-04-08 21:03:45.163 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:03:45.178 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:03:45.182 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:03:45.202 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:03:45.206 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:03:45.208 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:03:45.213 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:03:45.221 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:03:45.224 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:03:45.235 +03:00 [DBG] Start userinfo request
2018-04-08 21:03:45.243 +03:00 [DBG] Bearer token found in header
2018-04-08 21:03:45.354 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:03:45.365 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523210622,
    "exp": 1523214222,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210404,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:03:45.378 +03:00 [DBG] Creating userinfo response
2018-04-08 21:03:45.391 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:03:45.398 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:03:45.407 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:03:45.410 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:03:45.513 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:03:45.518 +03:00 [DBG] End userinfo request
2018-04-08 21:03:48.853 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:48.857 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:48.860 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:03:48.865 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:03:48.869 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:03:48.878 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:03:48.890 +03:00 [DBG] Start end session request validation
2018-04-08 21:03:48.901 +03:00 [DBG] Start identity token validation
2018-04-08 21:03:48.905 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:03:48.951 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:03:48.954 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523210623,
    "exp": 1523210923,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.224714956211210961523210618362",
    "iat": 1523210622,
    "at_hash": "CDtQPUq1E8MAq7VY8LRBgA",
    "sid": "26d26d7970b18566c8b2a2843b81a0bd",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210404,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:03:48.965 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTA2MjMsImV4cCI6MTUyMzIxMDkyMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjIyNDcxNDk1NjIxMTIxMDk2MTUyMzIxMDYxODM2MiIsImlhdCI6MTUyMzIxMDYyMiwiYXRfaGFzaCI6IkNEdFFQVXExRThNQXE3Vlk4TFJCZ0EiLCJzaWQiOiIyNmQyNmQ3OTcwYjE4NTY2YzhiMmEyODQzYjgxYTBiZCIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMDQwNCwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.LNvVoq4Fjr0hn-7yreMrRsYO9QvSqTMopNk2Vv_eAqnqsn6GmdOHanjSrDPJ2cI06kP1hZ1_zutHiJAyeVAuykVUOIKEvahPMgH-HjdrMPM0CH0M6NfxLGrh7hh7vqYrhxH3CyjzN1lPCjp6im9TSOE9X08pZcaL57rzsDrpHPPGWUGa47xXkO_N0L8f2eYfhf-wUdVmfYsWnK0sr1WJ9htP_gpFYTnVWL7QOI11bhZMD6qFLFif1OVXtRXWigpP4rwNv2TM1f51RZg-FUQDONW1c0w3m4VLvPlW3k6v3hHyN0FJEA2OSSSDpCRJYVMRvhJ4OrJkccVJ3zghonkMTQ",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:03:48.971 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:03:48.988 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:48.991 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:03:49.123 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:03:49.127 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:03:49.134 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:03:49.148 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFBSVI360:00000007",
  "TimeStamp": "2018-04-08T18:03:49Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:03:49.409 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:03:49.418 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:03:49.422 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:03:49.437 +03:00 [DBG] Processing signout callback request
2018-04-08 21:03:49.456 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:03:49.459 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:03:49.461 +03:00 [INF] Successful signout callback.
2018-04-08 21:03:49.464 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:03:49.468 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:06:10.509 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-04-08 21:06:14.460 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:06:16.470 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:06:16.534 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:06:16.789 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFBSVI362:00000007",
  "TimeStamp": "2018-04-08T18:06:16Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:06:16.809 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:06:16.816 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:06:16.823 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:06:16.826 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:06:16.848 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:16.852 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:16.940 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:06:16.943 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:06:18.586 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 21:06:18.591 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:18.594 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:18.627 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:06:18.630 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:06:18.648 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:18.652 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:18.655 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:06:18.659 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:06:18.662 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:06:18.666 +03:00 [DBG] Start authorize callback request
2018-04-08 21:06:18.670 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:06:18.674 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:06:18.677 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:06:18.681 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.224714956211210961523210618362",
  "SessionId": "5a0717f6d41786fef315a7ac416b0689",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.224714956211210961523210618362",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:06:18.744 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:06:18.748 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:06:18.752 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:06:18.755 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:06:18.852 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:06:18.948 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****wm-w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Ss6Q"
    }
  ],
  "ActivityId": "0HLCTFBSVI363:00000004",
  "TimeStamp": "2018-04-08T18:06:18Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:06:18.954 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:06:18.963 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:06:18.967 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:06:20.785 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:06:20.789 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:06:20.792 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:06:20.799 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:06:20.803 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:06:20.806 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:06:20.810 +03:00 [DBG] Start key discovery request
2018-04-08 21:06:21.922 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:21.925 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:21.928 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:06:21.933 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:06:21.936 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:06:21.940 +03:00 [DBG] Start authorize request
2018-04-08 21:06:21.943 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:06:21.947 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:06:21.952 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:06:21.956 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.31535242904125261523210781915",
  "SessionId": "5a0717f6d41786fef315a7ac416b0689",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.31535242904125261523210781915",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:06:22.017 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:06:22.020 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:06:22.023 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:06:22.026 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:06:22.132 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:06:22.236 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****q4ng"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****580w"
    }
  ],
  "ActivityId": "0HLCTFBSVI363:00000005",
  "TimeStamp": "2018-04-08T18:06:22Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:06:22.241 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:06:23.387 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:06:23.390 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:06:23.395 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:06:23.403 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:06:23.408 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:06:23.412 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:06:23.416 +03:00 [DBG] Start key discovery request
2018-04-08 21:06:23.466 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:06:23.476 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:06:23.481 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:06:23.493 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:06:23.497 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:06:23.501 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:06:23.516 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:06:23.519 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:06:23.522 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:06:23.525 +03:00 [DBG] Start userinfo request
2018-04-08 21:06:23.527 +03:00 [DBG] Bearer token found in header
2018-04-08 21:06:23.565 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:06:23.568 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523210782,
    "exp": 1523214382,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210776,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:06:23.572 +03:00 [DBG] Creating userinfo response
2018-04-08 21:06:23.575 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:06:23.579 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:06:23.582 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:06:23.585 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:06:23.701 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:06:23.704 +03:00 [DBG] End userinfo request
2018-04-08 21:06:24.705 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:24.709 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:24.713 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:06:24.717 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:06:24.721 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:06:24.724 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:06:24.728 +03:00 [DBG] Start end session request validation
2018-04-08 21:06:24.733 +03:00 [DBG] Start identity token validation
2018-04-08 21:06:24.736 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:06:24.781 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:06:24.785 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523210782,
    "exp": 1523211082,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.31535242904125261523210781915",
    "iat": 1523210782,
    "at_hash": "Bgqi7SMmFdew5Bu2qDkk6Q",
    "sid": "5a0717f6d41786fef315a7ac416b0689",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210776,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:06:24.789 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTA3ODIsImV4cCI6MTUyMzIxMTA4MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjMxNTM1MjQyOTA0MTI1MjYxNTIzMjEwNzgxOTE1IiwiaWF0IjoxNTIzMjEwNzgyLCJhdF9oYXNoIjoiQmdxaTdTTW1GZGV3NUJ1MnFEa2s2USIsInNpZCI6IjVhMDcxN2Y2ZDQxNzg2ZmVmMzE1YTdhYzQxNmIwNjg5Iiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjEwNzc2LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.wF3JN17-Ab9F2LiRNbmuTehn0gQtCm-AhKrCBh1bUglCFfEs57XwWUMNEhae3-47NvF8uCf7WfbEEoCpLcCtf401buIDNWY2CuUIDpX45mjU353fsKcW19eiJ5fbgAeDInYem3vj-gn2gR1YIQO3JbfCNf-n0PbkmNF8kIFa9VUy5fdhBO2fe71az5fPS8bmc13tdafnHDc29BHGWRnge9Ve_8mcT6TR_uyKsAN3pXLAjqfPHHtyZtQswUxWjvNtxgoFVV04gzeBUhJy02BQPLN_SGUdJw6QzaJ7i2-k-9OezMfasvHFHPWwvc2Cy5fo-T5AprTDUFTJETl3igq4ng",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:06:24.795 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:06:24.807 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:24.812 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:06:24.871 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:06:24.874 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:06:24.878 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:06:24.883 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFBSVI363:00000007",
  "TimeStamp": "2018-04-08T18:06:24Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:06:42.126 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:06:42.131 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:06:42.134 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:06:42.138 +03:00 [DBG] Processing signout callback request
2018-04-08 21:06:42.141 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:06:42.147 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:06:42.150 +03:00 [INF] Successful signout callback.
2018-04-08 21:06:42.156 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:06:42.161 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:07:13.587 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:07:13.590 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:07:13.593 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:07:13.595 +03:00 [DBG] Start authorize request
2018-04-08 21:07:13.599 +03:00 [DBG] No user present in authorize request
2018-04-08 21:07:13.603 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:07:13.606 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:07:13.610 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.23666697380351721523210833579",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.23666697380351721523210833579",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:07:13.615 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:07:13.656 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:07:13.659 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:07:14.849 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:07:15.644 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:07:15.698 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:07:15.889 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFBSVI363:0000000D",
  "TimeStamp": "2018-04-08T18:07:15Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:07:15.892 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:07:15.895 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:07:15.899 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:07:15.901 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:07:15.918 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:07:15.921 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:07:15.923 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:07:15.926 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:07:15.930 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:07:15.933 +03:00 [DBG] Start authorize callback request
2018-04-08 21:07:15.936 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:07:15.939 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:07:15.941 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:07:15.945 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232086796980.6636788453327069",
  "Nonce": "N0.23666697380351721523210833579",
  "SessionId": "35f92bdd31612a74d033b277a69356c4",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.23666697380351721523210833579",
    "state": "15232086796980.6636788453327069"
  }
}
2018-04-08 21:07:16.034 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:07:16.038 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:07:16.041 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:07:16.044 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:07:16.123 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:07:16.216 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****dTCQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****N-mg"
    }
  ],
  "ActivityId": "0HLCTFBSVI363:0000000E",
  "TimeStamp": "2018-04-08T18:07:16Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:07:16.221 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232086796980.6636788453327069",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:07:16.225 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:07:16.229 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:07:17.220 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:07:17.223 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:07:17.228 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:07:17.237 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:07:17.241 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:07:17.244 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:07:17.247 +03:00 [DBG] Start key discovery request
2018-04-08 21:07:17.289 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:07:17.293 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:07:17.298 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:07:17.316 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:07:17.319 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:07:17.322 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:07:17.328 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:07:17.332 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:07:17.335 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:07:17.337 +03:00 [DBG] Start userinfo request
2018-04-08 21:07:17.340 +03:00 [DBG] Bearer token found in header
2018-04-08 21:07:17.378 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:07:17.381 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523210836,
    "exp": 1523214436,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210835,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:07:17.385 +03:00 [DBG] Creating userinfo response
2018-04-08 21:07:17.389 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:07:17.392 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:07:17.396 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:07:17.400 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:07:17.486 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:07:17.490 +03:00 [DBG] End userinfo request
2018-04-08 21:07:18.522 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:07:18.526 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:07:18.530 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:07:18.534 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:07:18.537 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:07:18.541 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:07:18.545 +03:00 [DBG] Start end session request validation
2018-04-08 21:07:18.548 +03:00 [DBG] Start identity token validation
2018-04-08 21:07:18.552 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:07:18.590 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:07:18.594 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523210836,
    "exp": 1523211136,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.23666697380351721523210833579",
    "iat": 1523210836,
    "at_hash": "-mqANPbFlJSU3pyCwclo1Q",
    "sid": "35f92bdd31612a74d033b277a69356c4",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523210835,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:07:18.598 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTA4MzYsImV4cCI6MTUyMzIxMTEzNiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjIzNjY2Njk3MzgwMzUxNzIxNTIzMjEwODMzNTc5IiwiaWF0IjoxNTIzMjEwODM2LCJhdF9oYXNoIjoiLW1xQU5QYkZsSlNVM3B5Q3djbG8xUSIsInNpZCI6IjM1ZjkyYmRkMzE2MTJhNzRkMDMzYjI3N2E2OTM1NmM0Iiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjEwODM1LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.IGKJ674VSViASeSmm3__qiJtQqco7C-pZXoH-CBHjb7sXGT-GgunxohWtpBlyWJGwbIrms9PTvExGeBummGxxF9eb0lU41Yld3irmLDrQEZvJzEwDQ5rXLGrAKSmTaDyCsH13xzsEquafQoP1D0yAsY01_lLI8bI6sVamL_TfqYq1f3mTMGRgwBtS9ggGEpGPj47y0MR2ljAofPFCDqjuhGWcE2dgS9uSXSjJlKSh0ia3P0Dpoy-uOSLwXHL3ibe6OWmNd8zPgDosinjUbaoLhXqIno_z1T4t26uDEDLZGX8U5htqjXQLTdCP06qn3rylQDEaqJY-yc6fA2gKDdTCQ",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:07:18.605 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:07:18.619 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:07:18.622 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:07:54.532 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:07:54.537 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:07:54.542 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:07:54.545 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFBSVI363:00000010",
  "TimeStamp": "2018-04-08T18:07:54Z",
  "ProcessId": 27276,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:07:57.129 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:07:57.132 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:07:57.135 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:07:57.140 +03:00 [DBG] Processing signout callback request
2018-04-08 21:07:57.144 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:07:57.147 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:07:57.150 +03:00 [INF] Successful signout callback.
2018-04-08 21:07:57.157 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:07:57.160 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:16:12.738 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 21:16:12.920 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 21:16:12.931 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 21:16:12.935 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 21:16:12.939 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 21:16:12.943 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 21:17:05.216 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:17:05.224 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:17:05.227 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:17:05.232 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-04-08 21:17:05.236 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-04-08 21:17:05.245 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:17:05.255 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:17:05.259 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:17:05.265 +03:00 [DBG] Start authorize request
2018-04-08 21:17:05.274 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-04-08 21:17:05.282 +03:00 [DBG] No user present in authorize request
2018-04-08 21:17:05.290 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:17:05.371 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:17:05.447 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.79059556587848271523211424296",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.79059556587848271523211424296",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:17:05.460 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:17:05.657 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:17:05.661 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:17:08.457 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:17:09.967 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:17:10.033 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:17:10.558 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFJ7UVE5R:00000005",
  "TimeStamp": "2018-04-08T18:17:10Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:17:10.574 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:17:10.579 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:17:10.610 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:17:10.620 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:17:10.641 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:10.645 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:10.650 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:17:10.654 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:17:10.657 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:17:10.670 +03:00 [DBG] Start authorize callback request
2018-04-08 21:17:10.680 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:17:10.683 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:17:10.687 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:17:10.691 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.79059556587848271523211424296",
  "SessionId": "64bbc8f186871c5f3c7aadec49d37cf3",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.79059556587848271523211424296",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:17:10.836 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 21:17:10.839 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 21:17:10.842 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 21:17:10.857 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:10.861 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:10.947 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:17:10.950 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:17:16.613 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 21:17:16.618 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:16.622 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:16.697 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:17:16.701 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:17:16.737 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:16.741 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:16.744 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:17:16.747 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:17:16.751 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:17:16.755 +03:00 [DBG] Start authorize callback request
2018-04-08 21:17:16.784 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:17:16.787 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:17:16.791 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:17:16.794 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.79059556587848271523211424296",
  "SessionId": "64bbc8f186871c5f3c7aadec49d37cf3",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.79059556587848271523211424296",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:17:16.835 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 21:17:16.838 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 21:17:16.850 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 21:17:16.870 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 21:17:16.879 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:17:16.900 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:17:16.915 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:17:16.918 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:17:17.192 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:17:17.335 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****QQLQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****brhQ"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000009",
  "TimeStamp": "2018-04-08T18:17:17Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:17:17.344 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:17:17.372 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:17:17.375 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:17:19.571 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:17:19.580 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:17:19.583 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:17:19.594 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:17:19.600 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:17:19.604 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:17:19.613 +03:00 [DBG] Start key discovery request
2018-04-08 21:17:19.717 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:17:19.723 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:17:19.726 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:17:19.822 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:17:19.825 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:17:19.828 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:17:19.834 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:17:19.850 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:17:19.857 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:17:19.886 +03:00 [DBG] Start userinfo request
2018-04-08 21:17:19.893 +03:00 [DBG] Bearer token found in header
2018-04-08 21:17:20.006 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:17:20.014 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523211437,
    "exp": 1523215037,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211430,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:17:20.026 +03:00 [DBG] Creating userinfo response
2018-04-08 21:17:20.032 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:17:20.039 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:17:20.045 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:17:20.048 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:17:20.112 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:17:20.116 +03:00 [DBG] End userinfo request
2018-04-08 21:17:21.042 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:21.045 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:21.048 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:17:21.056 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:17:21.060 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:17:21.075 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:17:21.096 +03:00 [DBG] Start end session request validation
2018-04-08 21:17:21.108 +03:00 [DBG] Start identity token validation
2018-04-08 21:17:21.113 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:17:21.166 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:17:21.173 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523211437,
    "exp": 1523211737,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.79059556587848271523211424296",
    "iat": 1523211437,
    "at_hash": "B5pguqggi-WAT-Ii-cu3Fw",
    "sid": "64bbc8f186871c5f3c7aadec49d37cf3",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211430,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:17:21.228 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTE0MzcsImV4cCI6MTUyMzIxMTczNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjc5MDU5NTU2NTg3ODQ4MjcxNTIzMjExNDI0Mjk2IiwiaWF0IjoxNTIzMjExNDM3LCJhdF9oYXNoIjoiQjVwZ3VxZ2dpLVdBVC1JaS1jdTNGdyIsInNpZCI6IjY0YmJjOGYxODY4NzFjNWYzYzdhYWRlYzQ5ZDM3Y2YzIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjExNDMwLCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.exQrwhWehcLG1AsQU_y7U8JdP0E271q0LRC9yY6HVSWaTiy6Y1MkTg_QdqAO_6Pha0KbzkrgccGiGuoc84f137kdrQRSiqLCIlvd910p5kfr4VfedymLkGLIsZgYLWnr8LXEHqqG2dIFkDc-iXcbWg5366u0W58aDMCKkZmKbEopc5bVLmuq8hJo2dN5qiCb_2q9pKIOnRFuBWwCCSqLzIzsZL00XnL-bUtNGWHYfzN58x47QzoFyFonUifMumq2e6QuNUgKNsXraKACaPE2KgN8U6kUVHETOA8grGkdCE5Cd89b4Bz0h1qJknd8i8JKX2gocMi2dfI90cTsQyQQLQ",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:17:21.243 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:17:21.269 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:21.272 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:17:34.128 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:17:34.132 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:17:34.136 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:17:35.773 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFJ7UVE5R:0000000B",
  "TimeStamp": "2018-04-08T18:17:35Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:19:04.859 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:19:04.864 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:19:04.868 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:19:04.878 +03:00 [DBG] Processing signout callback request
2018-04-08 21:19:04.895 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:19:04.898 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:19:04.902 +03:00 [INF] Successful signout callback.
2018-04-08 21:19:04.905 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:19:04.908 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:23:00.112 +03:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2018-04-08 21:23:01.749 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:23:03.775 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:23:03.835 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:23:04.054 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFJ7UVE5R:00000012",
  "TimeStamp": "2018-04-08T18:23:04Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:04.057 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:23:04.059 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:23:04.062 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:23:04.065 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:23:04.080 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:04.083 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:04.190 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:04.193 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:05.633 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 21:23:05.638 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:05.642 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:05.675 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:05.678 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:05.696 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:05.699 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:05.702 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:23:05.705 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:23:05.708 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:23:05.711 +03:00 [DBG] Start authorize callback request
2018-04-08 21:23:05.715 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:05.718 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:05.721 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:05.724 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.79059556587848271523211424296",
  "SessionId": "7e5065e42a6baa0884c5c270a2c05119",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.79059556587848271523211424296",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:23:05.782 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:23:05.786 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:23:05.789 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:23:05.791 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:05.885 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:23:05.994 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****bXIA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****_jBA"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000015",
  "TimeStamp": "2018-04-08T18:23:05Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:05.999 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:23:06.003 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:23:06.006 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:23:08.819 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:23:08.823 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:08.826 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:23:08.835 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:23:08.839 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:23:08.842 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:23:08.847 +03:00 [DBG] Start key discovery request
2018-04-08 21:23:12.047 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:12.051 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:12.054 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:23:12.058 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:23:12.063 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:23:12.069 +03:00 [DBG] Start authorize request
2018-04-08 21:23:12.075 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:12.082 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:12.088 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:12.094 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.95949747031979631523211792031",
  "SessionId": "7e5065e42a6baa0884c5c270a2c05119",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.95949747031979631523211792031",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:23:12.172 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:23:12.177 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:23:12.181 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:23:12.184 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:12.321 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:23:12.458 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****sw-Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****WorA"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000016",
  "TimeStamp": "2018-04-08T18:23:12Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:12.464 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:23:16.591 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:23:16.597 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:16.602 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:23:16.615 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:23:16.623 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:23:16.633 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:23:16.642 +03:00 [DBG] Start key discovery request
2018-04-08 21:23:29.682 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:29.686 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:29.689 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:23:29.695 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:23:29.698 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:23:29.702 +03:00 [DBG] Start authorize request
2018-04-08 21:23:29.705 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:29.711 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:29.715 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:29.719 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.5655596424458081523211809664",
  "SessionId": "7e5065e42a6baa0884c5c270a2c05119",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.5655596424458081523211809664",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:23:29.768 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:23:29.771 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:23:29.775 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:23:29.778 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:29.896 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:23:30.016 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xUGw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****qQog"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000017",
  "TimeStamp": "2018-04-08T18:23:30Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:30.021 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:23:34.179 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:23:34.182 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:34.186 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:23:34.192 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:23:34.195 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:23:34.198 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:23:34.202 +03:00 [DBG] Start key discovery request
2018-04-08 21:23:34.411 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:23:34.415 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:34.421 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:23:34.607 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:23:34.613 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:34.617 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:23:34.626 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:23:34.630 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:23:34.640 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:23:34.647 +03:00 [DBG] Start userinfo request
2018-04-08 21:23:34.652 +03:00 [DBG] Bearer token found in header
2018-04-08 21:23:34.712 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:23:34.716 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523211809,
    "exp": 1523215409,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211784,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:23:34.724 +03:00 [DBG] Creating userinfo response
2018-04-08 21:23:34.729 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:23:34.732 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:23:34.761 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:23:34.779 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:23:34.903 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:23:34.906 +03:00 [DBG] End userinfo request
2018-04-08 21:23:38.123 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:38.128 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:38.139 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:23:38.148 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:23:38.158 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:23:38.183 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:38.186 +03:00 [DBG] Start end session request validation
2018-04-08 21:23:38.189 +03:00 [DBG] Start identity token validation
2018-04-08 21:23:38.193 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:23:38.250 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:23:38.254 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523211810,
    "exp": 1523212110,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.5655596424458081523211809664",
    "iat": 1523211809,
    "at_hash": "tjojUM8D1XJlFyZcjtpb9A",
    "sid": "7e5065e42a6baa0884c5c270a2c05119",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211784,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:23:38.260 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTE4MTAsImV4cCI6MTUyMzIxMjExMCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjU2NTU1OTY0MjQ0NTgwODE1MjMyMTE4MDk2NjQiLCJpYXQiOjE1MjMyMTE4MDksImF0X2hhc2giOiJ0am9qVU04RDFYSmxGeVpjanRwYjlBIiwic2lkIjoiN2U1MDY1ZTQyYTZiYWEwODg0YzVjMjcwYTJjMDUxMTkiLCJzdWIiOiI5ZDJhZGQ5Ny1mMmY3LTQ2ZDMtYWE4Mi02MDc5OTlkY2MxMmEiLCJhdXRoX3RpbWUiOjE1MjMyMTE3ODQsImlkcCI6Ikdvb2dsZSIsIm5hbWUiOiJNVVJBVCBBS0tBxZ4iLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJNVVJBVCBBS0tBxZ4iLCJhbXIiOlsiZXh0ZXJuYWwiXX0.thMnbvQkh-8bY6_veuT7nqkukY_cdbxfoVWcd8LgX3jNP-lvrjs5zEkJM7P-rhV4CRVwl7h84Fi0LOeeyAaYsYrQtZB6XVbW6bd6YiyAgPNt1wW5z3cbgkVR4Z2CMcIVJ_V9dFoTsM44vDQY2YgJbPThnTugkBloP2ytW84KvklP6RAdeN72d1u45oBly0zD4FEi6BEpitmpm6FIJMlZQSBhrgUmzGNze3ZKosa82rK_rJ8MkP1gyJ-oIqUCgHJNoSSe5laURGf0Rv80SL3O0auNDG6JkmbI2352ujpaQ8eYfXxMfw-HjDXSm2afwGIxXcybOo7WUqZbgw6RihxUGw",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:23:38.273 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:23:38.288 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:38.291 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:41.898 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:23:41.904 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:23:41.909 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:23:41.916 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFJ7UVE5R:00000019",
  "TimeStamp": "2018-04-08T18:23:41Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:42.549 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:23:42.553 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:23:42.557 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:23:42.566 +03:00 [DBG] Processing signout callback request
2018-04-08 21:23:42.569 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:23:42.575 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:23:42.583 +03:00 [INF] Successful signout callback.
2018-04-08 21:23:42.588 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:23:42.598 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:23:54.920 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:23:54.923 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:23:54.926 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:23:54.930 +03:00 [DBG] Start authorize request
2018-04-08 21:23:54.935 +03:00 [DBG] No user present in authorize request
2018-04-08 21:23:54.939 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:54.943 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:54.948 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.479533997249392161523211834903",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.479533997249392161523211834903",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:23:54.956 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:23:55.019 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:55.024 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:56.332 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:23:57.188 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:23:57.259 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:23:57.484 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFJ7UVE5R:0000001F",
  "TimeStamp": "2018-04-08T18:23:57Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:57.488 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:23:57.491 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:23:57.494 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:23:57.498 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:23:57.517 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:57.520 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:23:57.523 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:23:57.526 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:23:57.530 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:23:57.533 +03:00 [DBG] Start authorize callback request
2018-04-08 21:23:57.536 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:57.539 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:23:57.542 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:23:57.545 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.479533997249392161523211834903",
  "SessionId": "c631fd191082950a898e20396d40cfeb",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.479533997249392161523211834903",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:23:57.675 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:23:57.677 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:23:57.681 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:23:57.683 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:23:57.789 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:23:57.896 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****2IvA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Ws0A"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000020",
  "TimeStamp": "2018-04-08T18:23:57Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:23:57.901 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:23:57.905 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:23:57.908 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:23:59.825 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:23:59.829 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:59.832 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:23:59.838 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:23:59.841 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:23:59.844 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:23:59.848 +03:00 [DBG] Start key discovery request
2018-04-08 21:23:59.956 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:23:59.960 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:23:59.964 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:24:00.015 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:24:00.019 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:24:00.023 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:24:00.032 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:24:00.053 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:24:00.058 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:24:00.068 +03:00 [DBG] Start userinfo request
2018-04-08 21:24:00.073 +03:00 [DBG] Bearer token found in header
2018-04-08 21:24:00.148 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:24:00.151 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523211837,
    "exp": 1523215437,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211837,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:24:00.155 +03:00 [DBG] Creating userinfo response
2018-04-08 21:24:00.158 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:24:00.163 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:24:00.166 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:24:00.169 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:24:00.290 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:24:00.295 +03:00 [DBG] End userinfo request
2018-04-08 21:25:29.382 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:29.386 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:29.395 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:25:29.400 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:25:29.408 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:25:29.411 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:25:29.414 +03:00 [DBG] Start end session request validation
2018-04-08 21:25:29.417 +03:00 [DBG] Start identity token validation
2018-04-08 21:25:29.420 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:25:29.495 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:25:29.498 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523211837,
    "exp": 1523212137,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.479533997249392161523211834903",
    "iat": 1523211837,
    "at_hash": "xcVqNQVDW4KMV3SOFJnd3g",
    "sid": "c631fd191082950a898e20396d40cfeb",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211837,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:25:29.501 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTE4MzcsImV4cCI6MTUyMzIxMjEzNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQ3OTUzMzk5NzI0OTM5MjE2MTUyMzIxMTgzNDkwMyIsImlhdCI6MTUyMzIxMTgzNywiYXRfaGFzaCI6InhjVnFOUVZEVzRLTVYzU09GSm5kM2ciLCJzaWQiOiJjNjMxZmQxOTEwODI5NTBhODk4ZTIwMzk2ZDQwY2ZlYiIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMTgzNywiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.KrSgF6rzHBVxvcALFffNj21S3Bp-FgiV3MO7Zls3Gw8s7GoKkcHIaVBRnodUxGJm9--ErsbWUPc0mj3v6gNFuWdf24SMDgRmWSZRYgfxErRnIQC94s8lr2tH252IIh5Tqh0MGkHHoQpFVSO5hy6BGxdTyR6BPBfTW8STuGCvTGlLNQTv_e0lel2cwPiX1r9ZiWw2OhiTng15fiv1_lunPwgIRnZUIvzuZGX48eDzEbyQlXsjlWqSX9an12vQK3GRY-RT5mrWX8VJQOW8RbUtHC-8mRbha-FSjlQ48u-Ao7p2TMjE22K-RbXYOXFhPOl1Kit2r1GMeml1TKbFOp2IvA",
    "post_logout_redirect_uri": "http://localhost:4200home"
  }
}
2018-04-08 21:25:29.507 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:25:29.519 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:29.521 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:33.246 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:25:33.249 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:25:33.253 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:25:33.257 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFJ7UVE5R:00000022",
  "TimeStamp": "2018-04-08T18:25:33Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:25:33.709 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:25:33.713 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:25:33.716 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:25:33.721 +03:00 [DBG] Processing signout callback request
2018-04-08 21:25:33.724 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:25:33.727 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:25:33.729 +03:00 [INF] Successful signout callback.
2018-04-08 21:25:33.733 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:25:33.736 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:25:51.948 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:25:51.954 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:25:51.957 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:25:51.959 +03:00 [DBG] Start authorize request
2018-04-08 21:25:51.962 +03:00 [DBG] No user present in authorize request
2018-04-08 21:25:51.965 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:25:51.969 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:25:51.973 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.038973392751011641523211951935",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.038973392751011641523211951935",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:25:51.978 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:25:52.036 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:25:52.040 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:25:53.463 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:25:54.322 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:25:54.393 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:25:54.608 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFJ7UVE5R:00000028",
  "TimeStamp": "2018-04-08T18:25:54Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:25:54.612 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:25:54.616 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:25:54.619 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:25:54.622 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:25:54.640 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:54.643 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:54.646 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:25:54.649 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:25:54.652 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:25:54.655 +03:00 [DBG] Start authorize callback request
2018-04-08 21:25:54.658 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:25:54.661 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:25:54.663 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:25:54.667 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.038973392751011641523211951935",
  "SessionId": "fc754f64851d9caf890910b7b1440347",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.038973392751011641523211951935",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:25:54.777 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:25:54.780 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:25:54.783 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:25:54.786 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:25:54.924 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:25:55.073 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****p9lA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****maQg"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000029",
  "TimeStamp": "2018-04-08T18:25:55Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:25:55.077 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:25:55.082 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:25:55.086 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:25:57.518 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:25:57.521 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:25:57.525 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:25:57.532 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:25:57.536 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:25:57.539 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:25:57.543 +03:00 [DBG] Start key discovery request
2018-04-08 21:25:57.657 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:25:57.660 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:25:57.664 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:25:57.702 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:25:57.705 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:25:57.708 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:25:57.715 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:25:57.718 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:25:57.721 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:25:57.727 +03:00 [DBG] Start userinfo request
2018-04-08 21:25:57.734 +03:00 [DBG] Bearer token found in header
2018-04-08 21:25:57.789 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:25:57.792 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523211954,
    "exp": 1523215554,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211954,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:25:57.802 +03:00 [DBG] Creating userinfo response
2018-04-08 21:25:57.805 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:25:57.808 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:25:57.815 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:25:57.818 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:25:57.918 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:25:57.921 +03:00 [DBG] End userinfo request
2018-04-08 21:25:58.991 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:58.996 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:59.001 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:25:59.004 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:25:59.008 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:25:59.011 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:25:59.015 +03:00 [DBG] Start end session request validation
2018-04-08 21:25:59.018 +03:00 [DBG] Start identity token validation
2018-04-08 21:25:59.022 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:25:59.071 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:25:59.074 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523211955,
    "exp": 1523212255,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.038973392751011641523211951935",
    "iat": 1523211954,
    "at_hash": "qNfdDxEYPHJnCe-yJ2RaLg",
    "sid": "fc754f64851d9caf890910b7b1440347",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211954,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:25:59.080 +03:00 [INF] End session request validation failure: Invalid post logout URI
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTE5NTUsImV4cCI6MTUyMzIxMjI1NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjAzODk3MzM5Mjc1MTAxMTY0MTUyMzIxMTk1MTkzNSIsImlhdCI6MTUyMzIxMTk1NCwiYXRfaGFzaCI6InFOZmREeEVZUEhKbkNlLXlKMlJhTGciLCJzaWQiOiJmYzc1NGY2NDg1MWQ5Y2FmODkwOTEwYjdiMTQ0MDM0NyIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMTk1NCwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.N1feGnv6VVDx7IQY103DHasITiKIBaGDJVaIFWitBei2hX2hW9nSnsB8gq5TduWHHb1OpGNNw8TExtZKtNDPt6vFrgDtOo5RV7PBA6otiymBICHwypjfY4x2UHYcE37nipRNMIUzWMPfNHR_igAdKdHnBuMMMJqiuaj4sUMdivraOTeaaklKHTsuHaXIZbTE9ei7Boj29fzgEX_zg_zMjpXpiyWV8egqsRH0jzg07DFGmL5NnIsUvo7RMZw3Q5d0FWhSg9qGe7fpDYBtFJS83tbR59GsK2g65eBSCqOmSov9ilAeqwZUGRICTPvjNU9sG4oh3BQnO_lcHOkSaxp9lA",
    "post_logout_redirect_uri": "http://localhost:4200/home"
  }
}
2018-04-08 21:25:59.086 +03:00 [ERR] Error processing end session request Invalid request
2018-04-08 21:25:59.099 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:59.102 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:25:59.174 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:25:59.178 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:25:59.182 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:25:59.184 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFJ7UVE5R:0000002B",
  "TimeStamp": "2018-04-08T18:25:59Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:25:59.320 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:25:59.324 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:25:59.328 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:25:59.331 +03:00 [DBG] Processing signout callback request
2018-04-08 21:25:59.335 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:25:59.338 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:25:59.341 +03:00 [INF] Successful signout callback.
2018-04-08 21:25:59.345 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:25:59.348 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:26:07.929 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:26:07.932 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:26:07.936 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:26:07.940 +03:00 [DBG] Start authorize request
2018-04-08 21:26:07.943 +03:00 [DBG] No user present in authorize request
2018-04-08 21:26:07.947 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:26:07.952 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:26:07.957 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.59366884100638041523211967917",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.59366884100638041523211967917",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:26:07.964 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:26:08.018 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:26:08.024 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:26:09.177 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:26:09.926 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:26:09.993 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:26:10.236 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFJ7UVE5R:00000031",
  "TimeStamp": "2018-04-08T18:26:10Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:26:10.240 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:26:10.244 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:26:10.247 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:26:10.252 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:26:10.271 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:26:10.274 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:26:10.278 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:26:10.281 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:26:10.286 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:26:10.290 +03:00 [DBG] Start authorize callback request
2018-04-08 21:26:10.293 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:26:10.298 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:26:10.303 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:26:10.306 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.59366884100638041523211967917",
  "SessionId": "10c0578df41241a4886b7a01ee8c3248",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.59366884100638041523211967917",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:26:10.438 +03:00 [DBG] Consent found in consent store is same as current request, consent is not required
2018-04-08 21:26:10.441 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:26:10.444 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:26:10.447 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:26:10.575 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:26:10.732 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****xRUA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****d5TA"
    }
  ],
  "ActivityId": "0HLCTFJ7UVE5R:00000032",
  "TimeStamp": "2018-04-08T18:26:10Z",
  "ProcessId": 40040,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:26:10.739 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:26:10.744 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:26:10.747 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:26:12.316 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:26:12.319 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:26:12.322 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:26:12.328 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:26:12.332 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:26:12.336 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:26:12.340 +03:00 [DBG] Start key discovery request
2018-04-08 21:26:12.394 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:26:12.398 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:26:12.402 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:26:12.437 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:26:12.440 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:26:12.444 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:26:12.451 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:26:12.454 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:26:12.472 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:26:12.475 +03:00 [DBG] Start userinfo request
2018-04-08 21:26:12.478 +03:00 [DBG] Bearer token found in header
2018-04-08 21:26:12.529 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:26:12.533 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523211970,
    "exp": 1523215570,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211970,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:26:12.537 +03:00 [DBG] Creating userinfo response
2018-04-08 21:26:12.540 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:26:12.543 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:26:12.546 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:26:12.550 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:26:12.667 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:26:12.670 +03:00 [DBG] End userinfo request
2018-04-08 21:31:02.256 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 21:31:02.377 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 21:31:02.386 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 21:31:02.389 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 21:31:02.391 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 21:31:02.394 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 21:33:57.136 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:33:57.145 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:33:57.156 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:33:57.167 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:33:57.170 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:33:57.187 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:33:57.206 +03:00 [DBG] Start end session request validation
2018-04-08 21:33:57.252 +03:00 [DBG] Start identity token validation
2018-04-08 21:33:57.412 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:33:57.738 +03:00 [INF] {
  "Name": "Unhandled Exception",
  "Category": "Error",
  "EventType": "Error",
  "Id": 3000,
  "Details": "System.OperationCanceledException: The operation was canceled.\r\n   at System.Threading.CancellationToken.ThrowOperationCanceledException()\r\n   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByIdAsync(String userId, CancellationToken cancellationToken)\r\n   at Microsoft.AspNetCore.Identity.UserManager`1.FindByIdAsync(String userId)\r\n   at IdentityServer4.AspNetIdentity.ProfileService`1.<IsActiveAsync>d__4.MoveNext()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at IdentityServer4.Validation.TokenValidator.<ValidateIdentityTokenAsync>d__12.MoveNext() in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\TokenValidator.cs:line 121\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at IdentityServer4.Validation.EndSessionRequestValidator.<ValidateAsync>d__9.MoveNext() in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Validation\\EndSessionRequestValidator.cs:line 74\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at IdentityServer4.Endpoints.EndSessionEndpoint.<ProcessAsync>d__4.MoveNext() in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Endpoints\\EndSessionEndpoint.cs:line 56\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()\r\n   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)\r\n   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\Hosting\\IdentityServerMiddleware.cs:line 54",
  "Message": "The operation was canceled.",
  "ActivityId": "0HLCTFRH4SIS5:00000001",
  "TimeStamp": "2018-04-08T18:33:57Z",
  "ProcessId": 14368,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:33:57.767 +03:00 [FTL] Unhandled exception: System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByIdAsync(String userId, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByIdAsync(String userId)
   at IdentityServer4.AspNetIdentity.ProfileService`1.<IsActiveAsync>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Validation.TokenValidator.<ValidateIdentityTokenAsync>d__12.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\TokenValidator.cs:line 121
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Validation.EndSessionRequestValidator.<ValidateAsync>d__9.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\EndSessionRequestValidator.cs:line 74
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Endpoints.EndSessionEndpoint.<ProcessAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\EndSessionEndpoint.cs:line 56
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-04-08 21:33:57.784 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at Microsoft.AspNetCore.Identity.EntityFrameworkCore.UserStore`9.FindByIdAsync(String userId, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByIdAsync(String userId)
   at IdentityServer4.AspNetIdentity.ProfileService`1.<IsActiveAsync>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Validation.TokenValidator.<ValidateIdentityTokenAsync>d__12.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\TokenValidator.cs:line 121
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Validation.EndSessionRequestValidator.<ValidateAsync>d__9.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\EndSessionRequestValidator.cs:line 74
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Endpoints.EndSessionEndpoint.<ProcessAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\EndSessionEndpoint.cs:line 56
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-08 21:34:02.342 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:02.345 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:02.349 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:34:02.362 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:34:02.368 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:34:02.385 +03:00 [DBG] Start authorize request
2018-04-08 21:34:02.401 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:34:02.414 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:34:02.509 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:34:02.551 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.33065936086222661523212442317",
  "SessionId": "10c0578df41241a4886b7a01ee8c3248",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.33065936086222661523212442317",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:34:03.315 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 21:34:03.318 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 21:34:03.324 +03:00 [INF] Showing consent: User has not yet consented
2018-04-08 21:34:03.344 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:03.347 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:03.557 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:34:03.562 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:34:06.841 +03:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2018-04-08 21:34:06.846 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:06.850 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:06.945 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:34:06.948 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:34:07.014 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:07.018 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:07.022 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:34:07.026 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:34:07.029 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:34:07.042 +03:00 [DBG] Start authorize callback request
2018-04-08 21:34:07.073 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:34:07.076 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:34:07.079 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:34:07.082 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.33065936086222661523212442317",
  "SessionId": "10c0578df41241a4886b7a01ee8c3248",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.33065936086222661523212442317",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:34:07.151 +03:00 [DBG] user_consent grant with value: dews.web|9d2add97-f2f7-46d3-aa82-607999dcc12a not found in store.
2018-04-08 21:34:07.154 +03:00 [DBG] Found no prior consent from consent store, consent is required
2018-04-08 21:34:07.169 +03:00 [INF] User consented to scopes: ["openid","profile","dews.api"]
2018-04-08 21:34:07.185 +03:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","dews.api"]
2018-04-08 21:34:07.195 +03:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:34:07.225 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:34:07.246 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:34:07.251 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:34:07.532 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:34:07.669 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****7L9g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****-e2w"
    }
  ],
  "ActivityId": "0HLCTFRH4SIS6:00000004",
  "TimeStamp": "2018-04-08T18:34:07Z",
  "ProcessId": 14368,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:34:07.680 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:34:09.756 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:34:09.766 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:34:09.769 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:34:09.779 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:34:09.787 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:34:09.790 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:34:09.799 +03:00 [DBG] Start key discovery request
2018-04-08 21:34:09.888 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:34:09.893 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:34:09.910 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:34:09.962 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:34:09.970 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:34:09.973 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:34:09.981 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:34:10.003 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:34:10.007 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:34:10.026 +03:00 [DBG] Start userinfo request
2018-04-08 21:34:10.037 +03:00 [DBG] Bearer token found in header
2018-04-08 21:34:10.110 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:34:10.124 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523212447,
    "exp": 1523216047,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211970,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:34:10.140 +03:00 [DBG] Creating userinfo response
2018-04-08 21:34:10.150 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:34:10.158 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:34:10.168 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:34:10.172 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:34:10.253 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:34:10.257 +03:00 [DBG] End userinfo request
2018-04-08 21:34:11.174 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:11.178 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:11.186 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:34:11.191 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:34:11.208 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:34:11.220 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:34:11.224 +03:00 [DBG] Start end session request validation
2018-04-08 21:34:11.227 +03:00 [DBG] Start identity token validation
2018-04-08 21:34:11.235 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:34:11.304 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:34:11.308 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523212447,
    "exp": 1523212747,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.33065936086222661523212442317",
    "iat": 1523212447,
    "at_hash": "xrPwVyU2IBHkL1B1mvzOAQ",
    "sid": "10c0578df41241a4886b7a01ee8c3248",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523211970,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:34:11.327 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTI0NDcsImV4cCI6MTUyMzIxMjc0NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjMzMDY1OTM2MDg2MjIyNjYxNTIzMjEyNDQyMzE3IiwiaWF0IjoxNTIzMjEyNDQ3LCJhdF9oYXNoIjoieHJQd1Z5VTJJQkhrTDFCMW12ek9BUSIsInNpZCI6IjEwYzA1NzhkZjQxMjQxYTQ4ODZiN2EwMWVlOGMzMjQ4Iiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzMjExOTcwLCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.sRn2XuZ8g4E1KPAKSTuifGk8DdpB5eJoYFO7_tHVcWEPXGK-mMsDhNfRIiVIuLDFgzCpWnE5ll8YSbUcCMeVrZ_b1oTKW-JgmRPWza1727bKOYQmXV2K8RNmejojhOdKrYciRDG3Q5od3Tg9wa3Z03u70hk1k6vAoDt6S1WJWsA-K9ECZXn5x_2J4jNL7v_RlkVTaPrBLLSIbUl95fiQOHH11ijKcOQaZttXvxcQNel4Vgzla7HmdlPids4CqKtoeYGBsku40sFvGsRcomheUmMsQc9sdbGSTscDFDbcuZdKco5Vic-amuJgu_M8Sv_e6OszyLb1ByQX5IWtud7L9g",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-08 21:34:11.335 +03:00 [DBG] Success validating end session request from dews.web
2018-04-08 21:34:11.383 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:11.386 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:34:11.510 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:34:11.516 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:34:11.519 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:34:11.534 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFRH4SIS6:00000006",
  "TimeStamp": "2018-04-08T18:34:11Z",
  "ProcessId": 14368,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:34:11.884 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:34:11.890 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:34:11.895 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:34:11.906 +03:00 [DBG] Processing signout callback request
2018-04-08 21:34:11.932 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:34:11.936 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:34:11.939 +03:00 [INF] Successful signout callback.
2018-04-08 21:34:11.942 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:34:11.947 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:38:45.592 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 21:38:45.765 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 21:38:45.795 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 21:38:45.799 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 21:38:45.806 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 21:38:45.825 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 21:39:14.563 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:39:14.729 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:39:14.735 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:39:14.745 +03:00 [DBG] Start authorize request
2018-04-08 21:39:14.763 +03:00 [DBG] No user present in authorize request
2018-04-08 21:39:14.776 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:39:14.886 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:39:14.994 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.148359136034658561523212754533",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.148359136034658561523212754533",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:39:15.011 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:39:15.170 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:39:15.174 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:39:23.901 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:39:25.292 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:39:25.365 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:39:26.365 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFVR8D6NN:00000005",
  "TimeStamp": "2018-04-08T18:39:26Z",
  "ProcessId": 12792,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:39:26.380 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:39:26.385 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:39:26.396 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:39:26.406 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:39:26.430 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:39:26.433 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:39:26.438 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:39:26.442 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:39:26.446 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:39:26.457 +03:00 [DBG] Start authorize callback request
2018-04-08 21:39:26.465 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:39:26.468 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:39:26.471 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:39:26.475 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.148359136034658561523212754533",
  "SessionId": "4a52d3351ff97a3d1f51ac7f7afe6069",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.148359136034658561523212754533",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:39:26.614 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-08 21:39:26.626 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:39:26.641 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:39:26.645 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:39:26.834 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:39:27.015 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-0ZA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****S8Uw"
    }
  ],
  "ActivityId": "0HLCTFVR8D6NN:00000006",
  "TimeStamp": "2018-04-08T18:39:26Z",
  "ProcessId": 12792,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:39:27.030 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:39:27.063 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:39:27.066 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:39:29.505 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:39:29.513 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:39:29.516 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:39:29.526 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:39:29.535 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:39:29.539 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:39:29.547 +03:00 [DBG] Start key discovery request
2018-04-08 21:39:29.770 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:39:29.774 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:39:29.778 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:39:29.869 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:39:29.874 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:39:29.878 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:39:29.899 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:39:29.908 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:39:29.912 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:39:29.940 +03:00 [DBG] Start userinfo request
2018-04-08 21:39:29.948 +03:00 [DBG] Bearer token found in header
2018-04-08 21:39:30.086 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:39:30.097 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523212766,
    "exp": 1523216366,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212766,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:39:30.112 +03:00 [DBG] Creating userinfo response
2018-04-08 21:39:30.122 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:39:30.130 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:39:30.139 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:39:30.142 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:39:30.296 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:39:30.302 +03:00 [DBG] End userinfo request
2018-04-08 21:39:32.346 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:39:32.375 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:39:32.385 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:39:32.397 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:39:32.408 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:39:32.422 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:39:32.439 +03:00 [DBG] Start end session request validation
2018-04-08 21:39:32.453 +03:00 [DBG] Start identity token validation
2018-04-08 21:39:32.457 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:39:32.534 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:39:32.538 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523212766,
    "exp": 1523213066,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.148359136034658561523212754533",
    "iat": 1523212766,
    "at_hash": "pTnBkS00AF7jqGIs_iCuTw",
    "sid": "4a52d3351ff97a3d1f51ac7f7afe6069",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212766,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:39:32.557 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTI3NjYsImV4cCI6MTUyMzIxMzA2NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjE0ODM1OTEzNjAzNDY1ODU2MTUyMzIxMjc1NDUzMyIsImlhdCI6MTUyMzIxMjc2NiwiYXRfaGFzaCI6InBUbkJrUzAwQUY3anFHSXNfaUN1VHciLCJzaWQiOiI0YTUyZDMzNTFmZjk3YTNkMWY1MWFjN2Y3YWZlNjA2OSIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMjc2NiwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.QmRcgcbbVXKoIC0BoVPlMg6CxSWSc0HjkdB4gFDWxKNclmyJbH1QsLOJMkqCHKHqRptyZOaPKsLovUBM_zSVJMi0p0YfYV5EcMdIaj5uRVMSg0AAGOpeKq76HN6QwlaAt7jaifa7_QZSurZtq_0aMGqYfIrciBqlAOB59GonJQ8z01BIYJbPGmxHCcEPr14wqH8sSlACmE0RoiuFI5RAexhYUNOR8wowjvVikMNX0wCUXmKrcZiY25AKUlET91_9eC5eqNQKaa-THKKAGqucMf3_Rti9CF440qVmRbdcpdzKNSNqlSVZ81ptRVb25YJ2Jmy4pvmLjz-gN1qXhg-0ZA",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-08 21:39:32.561 +03:00 [DBG] Success validating end session request from dews.web
2018-04-08 21:39:32.605 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:39:32.608 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:39:32.730 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:39:32.734 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:39:32.737 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:39:32.749 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFVR8D6NN:00000008",
  "TimeStamp": "2018-04-08T18:39:32Z",
  "ProcessId": 12792,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:39:33.092 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:39:33.100 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:39:33.103 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:39:33.114 +03:00 [DBG] Processing signout callback request
2018-04-08 21:39:33.133 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:39:33.135 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:39:33.138 +03:00 [INF] Successful signout callback.
2018-04-08 21:39:33.141 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:39:33.144 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:39:38.474 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:39:38.482 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:39:38.486 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:39:38.490 +03:00 [DBG] Start authorize request
2018-04-08 21:39:38.497 +03:00 [DBG] No user present in authorize request
2018-04-08 21:39:38.503 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:39:38.506 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:39:38.516 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.277299344499593261523212778452",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.277299344499593261523212778452",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:39:38.521 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:39:38.581 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:39:38.589 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:40:24.458 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:40:25.340 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:40:25.408 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:40:25.611 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTFVR8D6NN:0000000F",
  "TimeStamp": "2018-04-08T18:40:25Z",
  "ProcessId": 12792,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:40:25.615 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:40:25.619 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:40:25.622 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:40:25.626 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:40:25.642 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:40:25.646 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:40:25.649 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:40:25.652 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:40:25.655 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:40:25.658 +03:00 [DBG] Start authorize callback request
2018-04-08 21:40:25.663 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:40:25.666 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:40:25.669 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:40:25.673 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.277299344499593261523212778452",
  "SessionId": "35c8b3f8e48787a2d2c6f4ace71dddc9",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.277299344499593261523212778452",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:40:25.766 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-08 21:40:25.768 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:40:25.772 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:40:25.775 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:40:25.907 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:40:26.020 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****rIww"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****ua5g"
    }
  ],
  "ActivityId": "0HLCTFVR8D6NN:00000010",
  "TimeStamp": "2018-04-08T18:40:26Z",
  "ProcessId": 12792,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:40:26.024 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:40:26.029 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:40:26.033 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:40:28.508 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:40:28.513 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:40:28.517 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:40:28.523 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:40:28.529 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:40:28.532 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:40:28.535 +03:00 [DBG] Start key discovery request
2018-04-08 21:40:28.646 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:40:28.650 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:40:28.653 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:40:28.781 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:40:28.784 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:40:28.787 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:40:28.796 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:40:28.800 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:40:28.804 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:40:28.812 +03:00 [DBG] Start userinfo request
2018-04-08 21:40:28.819 +03:00 [DBG] Bearer token found in header
2018-04-08 21:40:28.901 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:40:28.904 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523212825,
    "exp": 1523216425,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212825,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:40:28.913 +03:00 [DBG] Creating userinfo response
2018-04-08 21:40:28.917 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:40:28.920 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:40:28.924 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:40:28.928 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:40:29.054 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:40:29.056 +03:00 [DBG] End userinfo request
2018-04-08 21:40:40.420 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:40:40.423 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:40:40.426 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:40:40.428 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:40:40.433 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:40:40.440 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:40:40.443 +03:00 [DBG] Start end session request validation
2018-04-08 21:40:40.451 +03:00 [DBG] Start identity token validation
2018-04-08 21:40:40.455 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:40:40.517 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:40:40.520 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523212826,
    "exp": 1523213126,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.277299344499593261523212778452",
    "iat": 1523212825,
    "at_hash": "HQmMXIw0YvoItXJX33jzkw",
    "sid": "35c8b3f8e48787a2d2c6f4ace71dddc9",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212825,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:40:40.525 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTI4MjYsImV4cCI6MTUyMzIxMzEyNiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjI3NzI5OTM0NDQ5OTU5MzI2MTUyMzIxMjc3ODQ1MiIsImlhdCI6MTUyMzIxMjgyNSwiYXRfaGFzaCI6IkhRbU1YSXcwWXZvSXRYSlgzM2p6a3ciLCJzaWQiOiIzNWM4YjNmOGU0ODc4N2EyZDJjNmY0YWNlNzFkZGRjOSIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMjgyNSwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.dI8Wv31cnN0Qkjw4KLsGw8wC2lossbyFsJdcJGtTOLCtnSxaK75WvMwHVIx350HPrZZ5VwL7AU-Lv55va6OcEGntKlqVH91evxajE4Mvi3t1OeNB1Fi_2ircmx9BTRccLrr1KDACPbgxNvFgOh1r4NHQgDSUfwnYJRgAn0IjbWqsVrkSmJ4A2e887rhp_LenjrthhnR6RdpiHkqGNwPvVo9tvUQRuf1y0vlb3uDNtKWQhxWtgwCCRbomf9NEAxFMacoGRDDgtKQi2VQAXnmV59YDKrYCecI-YM_atNfRMxD9DY7FXIuchbSxMxbGE3yCfvZw0hz5RdtLglNvPUrIww",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-08 21:40:40.533 +03:00 [DBG] Success validating end session request from dews.web
2018-04-08 21:40:40.546 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:40:40.552 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:40:40.624 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:40:40.628 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:40:40.631 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:40:40.635 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTFVR8D6NN:00000012",
  "TimeStamp": "2018-04-08T18:40:40Z",
  "ProcessId": 12792,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:40:41.075 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:40:41.080 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:40:41.086 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:40:41.089 +03:00 [DBG] Processing signout callback request
2018-04-08 21:40:41.093 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:40:41.098 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:40:41.102 +03:00 [INF] Successful signout callback.
2018-04-08 21:40:41.105 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:40:41.108 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:40:44.343 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:40:44.349 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:40:44.352 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:40:44.355 +03:00 [DBG] Start authorize request
2018-04-08 21:40:44.357 +03:00 [DBG] No user present in authorize request
2018-04-08 21:40:44.360 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:40:44.367 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:40:44.370 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.078409646687948481523212844333",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.078409646687948481523212844333",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:40:44.381 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:40:44.437 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:40:44.439 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:41:46.604 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 21:41:46.759 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 21:41:46.786 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 21:41:46.814 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 21:41:46.823 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 21:41:46.834 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 21:41:51.543 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:41:51.835 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:41:51.838 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:41:51.849 +03:00 [DBG] Start authorize request
2018-04-08 21:41:51.891 +03:00 [DBG] No user present in authorize request
2018-04-08 21:41:51.909 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:41:52.025 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:41:52.184 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.235457985730667341523212911516",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.235457985730667341523212911516",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:41:52.216 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:41:52.515 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:41:52.522 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:41:52.575 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:41:56.854 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:41:56.932 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:41:58.093 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTG1H6KR1L:00000004",
  "TimeStamp": "2018-04-08T18:41:58Z",
  "ProcessId": 5312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:41:58.110 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:41:58.115 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:41:58.125 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:41:58.134 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:41:58.162 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:41:58.165 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:41:58.169 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:41:58.175 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:41:58.179 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:41:58.189 +03:00 [DBG] Start authorize callback request
2018-04-08 21:41:58.198 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:41:58.201 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:41:58.208 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:41:58.212 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232114242960.07456523099477752",
  "Nonce": "N0.235457985730667341523212911516",
  "SessionId": "8f7f1cf912bd6b10157e1d0664e12247",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.235457985730667341523212911516",
    "state": "15232114242960.07456523099477752"
  }
}
2018-04-08 21:41:58.392 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-08 21:41:58.412 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:41:58.458 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:41:58.462 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:41:58.688 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:41:58.778 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OW9Q"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****P1cg"
    }
  ],
  "ActivityId": "0HLCTG1H6KR1L:00000005",
  "TimeStamp": "2018-04-08T18:41:58Z",
  "ProcessId": 5312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:41:58.791 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232114242960.07456523099477752",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:41:58.818 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:41:58.824 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:42:00.910 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:42:00.917 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:42:00.921 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:42:00.928 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:42:00.935 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:42:00.939 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:42:00.946 +03:00 [DBG] Start key discovery request
2018-04-08 21:42:01.056 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:42:01.060 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:42:01.063 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:42:01.129 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:42:01.132 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:42:01.138 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:42:01.144 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:42:01.151 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:42:01.160 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:42:01.177 +03:00 [DBG] Start userinfo request
2018-04-08 21:42:01.188 +03:00 [DBG] Bearer token found in header
2018-04-08 21:42:01.359 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:42:01.370 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523212918,
    "exp": 1523216518,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212918,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:42:01.381 +03:00 [DBG] Creating userinfo response
2018-04-08 21:42:01.391 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:42:01.398 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:42:01.407 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:42:01.410 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:42:01.474 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:42:01.478 +03:00 [DBG] End userinfo request
2018-04-08 21:42:13.859 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:42:13.864 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:42:13.868 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:42:13.871 +03:00 [DBG] Start authorize request
2018-04-08 21:42:13.879 +03:00 [DBG] No user present in authorize request
2018-04-08 21:42:13.883 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:42:13.886 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:42:13.893 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232129338430.2524141454900053",
  "Nonce": "N0.417539131527729031523212933844",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.417539131527729031523212933844",
    "state": "15232129338430.2524141454900053"
  }
}
2018-04-08 21:42:13.901 +03:00 [INF] Showing login: User is not authenticated
2018-04-08 21:42:13.968 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:42:13.975 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:42:13.984 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-08 21:42:31.761 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-08 21:42:31.818 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-08 21:42:32.004 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLCTG1H6KR1N:00000004",
  "TimeStamp": "2018-04-08T18:42:32Z",
  "ProcessId": 5312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:42:32.009 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:42:32.012 +03:00 [DBG] Adding amr claim with value: external
2018-04-08 21:42:32.015 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:42:32.019 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:42:32.036 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:42:32.040 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:42:32.044 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-08 21:42:32.047 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-08 21:42:32.050 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-08 21:42:32.053 +03:00 [DBG] Start authorize callback request
2018-04-08 21:42:32.058 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:42:32.061 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:42:32.064 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-08 21:42:32.068 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15232129338430.2524141454900053",
  "Nonce": "N0.417539131527729031523212933844",
  "SessionId": "8545028ceb8501c73aa9e56d54dc12df",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.417539131527729031523212933844",
    "state": "15232129338430.2524141454900053"
  }
}
2018-04-08 21:42:32.181 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-08 21:42:32.183 +03:00 [DBG] Creating Implicit Flow response.
2018-04-08 21:42:32.186 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-08 21:42:32.191 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:42:32.349 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-08 21:42:32.501 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****twBA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****TgZQ"
    }
  ],
  "ActivityId": "0HLCTG1H6KR1N:00000005",
  "TimeStamp": "2018-04-08T18:42:32Z",
  "ProcessId": 5312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:42:32.510 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15232129338430.2524141454900053",
  "Scope": "openid profile dews.api"
}
2018-04-08 21:42:32.519 +03:00 [DBG] Augmenting SignInContext
2018-04-08 21:42:32.524 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-08 21:42:34.880 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-08 21:42:34.883 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:42:34.888 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:42:34.895 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-08 21:42:34.900 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-08 21:42:34.904 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-08 21:42:34.908 +03:00 [DBG] Start key discovery request
2018-04-08 21:42:35.048 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:42:35.055 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:42:35.059 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:42:35.100 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-08 21:42:35.115 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-08 21:42:35.122 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-08 21:42:35.131 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-08 21:42:35.138 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-08 21:42:35.141 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-08 21:42:35.144 +03:00 [DBG] Start userinfo request
2018-04-08 21:42:35.149 +03:00 [DBG] Bearer token found in header
2018-04-08 21:42:35.201 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:42:35.206 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523212952,
    "exp": 1523216552,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212952,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-08 21:42:35.210 +03:00 [DBG] Creating userinfo response
2018-04-08 21:42:35.212 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:42:35.215 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:42:35.221 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-08 21:42:35.224 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-08 21:42:35.340 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-08 21:42:35.343 +03:00 [DBG] End userinfo request
2018-04-08 21:42:36.790 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:42:36.794 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:42:36.797 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-08 21:42:36.802 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-08 21:42:36.807 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-08 21:42:36.816 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:42:36.827 +03:00 [DBG] Start end session request validation
2018-04-08 21:42:36.838 +03:00 [DBG] Start identity token validation
2018-04-08 21:42:36.843 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-08 21:42:36.887 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-08 21:42:36.891 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523212952,
    "exp": 1523213252,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.417539131527729031523212933844",
    "iat": 1523212952,
    "at_hash": "ysTVE9FOYsmlWLCjkiaMkw",
    "sid": "8545028ceb8501c73aa9e56d54dc12df",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523212952,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-08 21:42:36.912 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjMyMTI5NTIsImV4cCI6MTUyMzIxMzI1MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQxNzUzOTEzMTUyNzcyOTAzMTUyMzIxMjkzMzg0NCIsImlhdCI6MTUyMzIxMjk1MiwiYXRfaGFzaCI6InlzVFZFOUZPWXNtbFdMQ2praWFNa3ciLCJzaWQiOiI4NTQ1MDI4Y2ViODUwMWM3M2FhOWU1NmQ1NGRjMTJkZiIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyMzIxMjk1MiwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.dKTiwbQq-sE1NHOuMWSw1QYC9m2BfCH1Uc96JY7qeTJUGczJ0ivz7z6iR2zC0s_toy4ReqruWuvzEOtH6G7Tjdy_fsokYsAHcL0Nw-Y0p6T7uh9U5I36_hfo6QJMSceYhL5jgUSEMCYMXCl0-8NzZAOOkt7vrdoMX3r2B_2bOb2VRbMEIF108O9n6ulCDHBDamjI0eF4jXD5ELEwjmoIkWvOPJNkRQDEvjEFrkB6vLHWD8AfqJW0dYcTwZFTMBUJnQckkIeP1WXWj4i8g4cVv6pgfKgUK2JP-JwjxXxxPKvbVegiQcYIL0b8ZreZxQQI90jPAuHB_YWFW2T62htwBA",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-08 21:42:36.920 +03:00 [DBG] Success validating end session request from dews.web
2018-04-08 21:42:36.948 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:42:36.953 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:42:37.057 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-08 21:42:37.061 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-08 21:42:37.065 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-08 21:42:37.078 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLCTG1H6KR1N:00000007",
  "TimeStamp": "2018-04-08T18:42:37Z",
  "ProcessId": 5312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:42:37.455 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-08 21:42:37.470 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-08 21:42:37.476 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-08 21:42:37.556 +03:00 [DBG] Processing signout callback request
2018-04-08 21:42:37.662 +03:00 [DBG] No client front-channel logout URLs
2018-04-08 21:42:37.665 +03:00 [DBG] No client back-channel logout URLs
2018-04-08 21:42:37.668 +03:00 [INF] Successful signout callback.
2018-04-08 21:42:37.671 +03:00 [DBG] No client front-channel iframe urls
2018-04-08 21:42:37.674 +03:00 [DBG] No client back-channel iframe urls
2018-04-08 21:46:58.256 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:46:58.259 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:46:58.265 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-08 21:46:58.269 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-08 21:46:58.273 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-08 21:46:58.276 +03:00 [DBG] Start authorize request
2018-04-08 21:46:58.281 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-08 21:46:58.285 +03:00 [DBG] Start authorize request protocol validation
2018-04-08 21:46:58.289 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.69741229580223771523213218239",
    "state": "15232114242960.07456523099477752",
    "prompt": "none"
  }
}
2018-04-08 21:46:58.301 +03:00 [ERR] Request validation failed
2018-04-08 21:46:58.305 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.69741229580223771523213218239",
    "state": "15232114242960.07456523099477752",
    "prompt": "none"
  }
}
2018-04-08 21:46:58.322 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLCTG1H6KR1L:00000006",
  "TimeStamp": "2018-04-08T18:46:58Z",
  "ProcessId": 5312,
  "LocalIpAddress": "::1:5000",
  "RemoteIpAddress": "::1"
}
2018-04-08 21:46:58.354 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 21:46:58.357 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-08 23:40:29.145 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-08 23:40:29.203 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-08 23:40:29.211 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-08 23:40:29.213 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-08 23:40:29.216 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-08 23:40:29.218 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-08 23:40:32.125 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'AppId' option must be provided.
Parameter name: AppId
   at Microsoft.AspNetCore.Authentication.Facebook.FacebookOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-11 23:06:03.185 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-11 23:06:03.311 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-11 23:06:03.347 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-11 23:06:03.353 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-11 23:06:03.373 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-11 23:06:03.380 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-11 23:06:04.562 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'AppId' option must be provided.
Parameter name: AppId
   at Microsoft.AspNetCore.Authentication.Facebook.FacebookOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-11 23:06:27.907 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'AppId' option must be provided.
Parameter name: AppId
   at Microsoft.AspNetCore.Authentication.Facebook.FacebookOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-17 23:21:23.933 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-17 23:21:24.035 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-17 23:21:24.044 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-17 23:21:24.047 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-17 23:21:24.051 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-17 23:21:24.054 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-17 23:21:24.861 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'AppId' option must be provided.
Parameter name: AppId
   at Microsoft.AspNetCore.Authentication.Facebook.FacebookOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-17 23:21:30.762 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'AppId' option must be provided.
Parameter name: AppId
   at Microsoft.AspNetCore.Authentication.Facebook.FacebookOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-17 23:30:19.256 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-17 23:30:19.328 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-17 23:30:19.332 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-17 23:30:19.332 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-17 23:30:19.332 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-17 23:30:19.332 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-17 23:30:20.003 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.ArgumentException: The 'AppId' option must be provided.
Parameter name: AppId
   at Microsoft.AspNetCore.Authentication.Facebook.FacebookOptions.Validate()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<InitializeAsync>d__42.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.<GetHandlerAsync>d__5.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOut.FederatedSignoutAuthenticationHandlerProvider.<GetHandlerAsync>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\FederatedSignOut\FederatedSignoutAuthenticationHandlerProvider.cs:line 33
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-17 23:32:13.344 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-17 23:32:13.412 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-17 23:32:13.419 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-17 23:32:13.422 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-17 23:32:13.426 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-17 23:32:13.429 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-17 23:33:17.392 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-17 23:33:17.581 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-17 23:33:17.589 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-17 23:33:17.598 +03:00 [DBG] Start authorize request
2018-04-17 23:33:17.616 +03:00 [DBG] No user present in authorize request
2018-04-17 23:33:17.627 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:33:17.738 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:33:17.908 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.96300945668942521523997197310",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.96300945668942521523997197310",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-17 23:33:17.925 +03:00 [INF] Showing login: User is not authenticated
2018-04-17 23:33:18.101 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:33:18.106 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:33:21.060 +03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-04-17 23:48:44.420 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-17 23:48:44.426 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-17 23:48:44.430 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-17 23:48:44.446 +03:00 [DBG] Start authorize request
2018-04-17 23:48:44.449 +03:00 [DBG] No user present in authorize request
2018-04-17 23:48:44.452 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:48:44.456 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:48:44.460 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239981243990.11135491702557365",
  "Nonce": "N0.79519099085368781523998124399",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.79519099085368781523998124399",
    "state": "15239981243990.11135491702557365"
  }
}
2018-04-17 23:48:44.463 +03:00 [INF] Showing login: User is not authenticated
2018-04-17 23:48:44.485 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:48:44.490 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:48:46.291 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-17 23:48:47.916 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-17 23:48:48.460 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-17 23:48:49.313 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD4K96RHDAG:00000005",
  "TimeStamp": "2018-04-17T20:48:49Z",
  "ProcessId": 29248,
  "LocalIpAddress": "127.0.0.1:22744",
  "RemoteIpAddress": "::1"
}
2018-04-17 23:48:49.338 +03:00 [DBG] Augmenting SignInContext
2018-04-17 23:48:49.343 +03:00 [DBG] Adding amr claim with value: external
2018-04-17 23:48:49.355 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-17 23:48:49.369 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-17 23:48:49.394 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-17 23:48:49.397 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-17 23:48:49.402 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-17 23:48:49.409 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-17 23:48:49.411 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-17 23:48:49.423 +03:00 [DBG] Start authorize callback request
2018-04-17 23:48:49.436 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-17 23:48:49.439 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:48:49.442 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:48:49.445 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239981243990.11135491702557365",
  "Nonce": "N0.79519099085368781523998124399",
  "SessionId": "f97776c0d31e02eae30a819d52fbe69b",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.79519099085368781523998124399",
    "state": "15239981243990.11135491702557365"
  }
}
2018-04-17 23:48:49.515 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-17 23:48:49.527 +03:00 [DBG] Creating Implicit Flow response.
2018-04-17 23:48:49.542 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-17 23:48:49.545 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-17 23:48:49.671 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-17 23:48:49.708 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****PZxg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****6lzQ"
    }
  ],
  "ActivityId": "0HLD4K96RHDAG:00000006",
  "TimeStamp": "2018-04-17T20:48:49Z",
  "ProcessId": 29248,
  "LocalIpAddress": "127.0.0.1:22744",
  "RemoteIpAddress": "::1"
}
2018-04-17 23:48:49.720 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15239981243990.11135491702557365",
  "Scope": "openid profile dews.api"
}
2018-04-17 23:48:49.749 +03:00 [DBG] Augmenting SignInContext
2018-04-17 23:48:49.753 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-17 23:48:52.244 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-17 23:48:52.252 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-17 23:48:52.256 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-17 23:48:52.269 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-17 23:48:52.278 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-17 23:48:52.283 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-17 23:48:52.292 +03:00 [DBG] Start key discovery request
2018-04-17 23:48:52.422 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-17 23:48:52.425 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-17 23:48:52.430 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-17 23:48:52.513 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-17 23:48:52.518 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-17 23:48:52.522 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-17 23:48:52.532 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-17 23:48:52.540 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-17 23:48:52.543 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-17 23:48:52.559 +03:00 [DBG] Start userinfo request
2018-04-17 23:48:52.567 +03:00 [DBG] Bearer token found in header
2018-04-17 23:48:52.676 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-17 23:48:52.691 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523998129,
    "exp": 1524001729,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523998129,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-17 23:48:52.708 +03:00 [DBG] Creating userinfo response
2018-04-17 23:48:52.717 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-17 23:48:52.726 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-17 23:48:52.735 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-17 23:48:52.738 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-17 23:48:52.752 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-17 23:48:52.756 +03:00 [DBG] End userinfo request
2018-04-17 23:48:57.847 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-17 23:48:57.851 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-17 23:48:57.855 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-17 23:48:57.863 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-17 23:48:57.870 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-17 23:48:57.896 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-17 23:48:57.925 +03:00 [DBG] Start end session request validation
2018-04-17 23:48:57.942 +03:00 [DBG] Start identity token validation
2018-04-17 23:48:57.948 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-17 23:48:57.964 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-17 23:48:57.967 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523998129,
    "exp": 1523998429,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.79519099085368781523998124399",
    "iat": 1523998129,
    "at_hash": "cKwOnE0AVuOozQNPAtAWWw",
    "sid": "f97776c0d31e02eae30a819d52fbe69b",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523998129,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-17 23:48:57.985 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjM5OTgxMjksImV4cCI6MTUyMzk5ODQyOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjc5NTE5MDk5MDg1MzY4NzgxNTIzOTk4MTI0Mzk5IiwiaWF0IjoxNTIzOTk4MTI5LCJhdF9oYXNoIjoiY0t3T25FMEFWdU9velFOUEF0QVdXdyIsInNpZCI6ImY5Nzc3NmMwZDMxZTAyZWFlMzBhODE5ZDUyZmJlNjliIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzOTk4MTI5LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.FI5OiFv-Mc3UdRSz3bURnlx4UDtmDDrHWYOONfpArDfqMbJ1x4CaXrMjXBwHHemWmZJj2z6yVOs36GTNVHGtSQ1KnM2mA3AuRiaeCs0C5w8MQIC2NM_-_CDo3DSVCT-NxPUBz4NTxk66cvFZMpf1rbwF3itKgQq7L5-pcaqJqMWrpFAb4GcY5ee8ngaA3D2_brp1CKVd9_afhs9B1PlKJu_etldim19-nLz_1Cr6GGT9cYH9ovGPCzrYlHIjFtK3Zfkq3TPSvTUOuxgTSRBPhUMCcmh_qew70G8enOYdlO9J9_3_Q5Cu52t8n21zq2OHb-Kp5tPAtvaT2c7vL3PZxg",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-17 23:48:57.989 +03:00 [DBG] Success validating end session request from dews.web
2018-04-17 23:48:58.026 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-17 23:48:58.030 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-17 23:48:58.121 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-17 23:48:58.124 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-17 23:48:58.128 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-17 23:48:58.137 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD4K96RHDAG:0000000B",
  "TimeStamp": "2018-04-17T20:48:58Z",
  "ProcessId": 29248,
  "LocalIpAddress": "127.0.0.1:22744",
  "RemoteIpAddress": "::1"
}
2018-04-17 23:48:58.498 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-17 23:48:58.506 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-17 23:48:58.527 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-17 23:48:58.541 +03:00 [DBG] Processing signout callback request
2018-04-17 23:48:58.564 +03:00 [DBG] No client front-channel logout URLs
2018-04-17 23:48:58.568 +03:00 [DBG] No client back-channel logout URLs
2018-04-17 23:48:58.570 +03:00 [INF] Successful signout callback.
2018-04-17 23:48:58.573 +03:00 [DBG] No client front-channel iframe urls
2018-04-17 23:48:58.577 +03:00 [DBG] No client back-channel iframe urls
2018-04-17 23:49:06.859 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-17 23:49:06.864 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-17 23:49:06.868 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-17 23:49:06.872 +03:00 [DBG] Start authorize request
2018-04-17 23:49:06.875 +03:00 [DBG] No user present in authorize request
2018-04-17 23:49:06.878 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:49:06.881 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:49:06.886 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239981243990.11135491702557365",
  "Nonce": "N0.47518105796200151523998146847",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.47518105796200151523998146847",
    "state": "15239981243990.11135491702557365"
  }
}
2018-04-17 23:49:06.890 +03:00 [INF] Showing login: User is not authenticated
2018-04-17 23:49:06.913 +03:00 [DBG] Start authorize request protocol validation
2018-04-17 23:49:06.919 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-17 23:49:08.086 +03:00 [INF] AuthenticationScheme: Facebook was challenged.
2018-04-18 00:05:56.775 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:05:56.864 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:05:56.872 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:05:56.877 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:05:56.881 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:05:56.885 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:06:40.916 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 00:06:41.146 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 00:06:41.150 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 00:06:41.159 +03:00 [DBG] Start authorize request
2018-04-18 00:06:41.175 +03:00 [DBG] No user present in authorize request
2018-04-18 00:06:41.186 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:06:41.263 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:06:41.369 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239992008690.8511679326663115",
  "Nonce": "N0.90984724343734921523999200869",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.90984724343734921523999200869",
    "state": "15239992008690.8511679326663115"
  }
}
2018-04-18 00:06:41.384 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 00:06:41.511 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:06:41.515 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:06:45.327 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-18 00:06:50.514 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-18 00:06:50.557 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-18 00:06:51.784 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLD4KS1TF1JQ:00000006",
  "TimeStamp": "2018-04-17T21:06:51Z",
  "ProcessId": 13152,
  "LocalIpAddress": "127.0.0.1:14619",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:06:51.804 +03:00 [DBG] Augmenting SignInContext
2018-04-18 00:06:51.808 +03:00 [DBG] Adding amr claim with value: external
2018-04-18 00:06:51.820 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 00:06:51.831 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 00:06:51.864 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:06:51.867 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:06:51.870 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-18 00:06:51.874 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-18 00:06:51.877 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-18 00:06:51.894 +03:00 [DBG] Start authorize callback request
2018-04-18 00:06:51.906 +03:00 [DBG] User in authorize request: 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 00:06:51.909 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:06:51.912 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:06:51.916 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239992008690.8511679326663115",
  "Nonce": "N0.90984724343734921523999200869",
  "SessionId": "f6b3de6f8057ac2b2584c91de6c96c81",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.90984724343734921523999200869",
    "state": "15239992008690.8511679326663115"
  }
}
2018-04-18 00:06:51.975 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-18 00:06:51.988 +03:00 [DBG] Creating Implicit Flow response.
2018-04-18 00:06:52.009 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-18 00:06:52.013 +03:00 [DBG] Getting claims for access token for subject: 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 00:06:52.150 +03:00 [DBG] Getting claims for identity token for subject: 8eb29425-5496-432d-8257-eddc16aa6b9b and client: dews.web
2018-04-18 00:06:52.189 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****2uWA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****lZ6A"
    }
  ],
  "ActivityId": "0HLD4KS1TF1JQ:00000007",
  "TimeStamp": "2018-04-17T21:06:52Z",
  "ProcessId": 13152,
  "LocalIpAddress": "127.0.0.1:14619",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:06:52.203 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15239992008690.8511679326663115",
  "Scope": "openid profile dews.api"
}
2018-04-18 00:06:52.240 +03:00 [DBG] Augmenting SignInContext
2018-04-18 00:06:52.245 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 00:06:54.692 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-18 00:06:54.699 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:06:54.702 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:06:54.711 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-18 00:06:54.720 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-18 00:06:54.723 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-18 00:06:54.733 +03:00 [DBG] Start key discovery request
2018-04-18 00:06:54.842 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 00:06:54.845 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:06:54.871 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:06:54.973 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 00:06:54.976 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:06:55.000 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:06:55.017 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-18 00:06:55.025 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-18 00:06:55.029 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-18 00:06:55.045 +03:00 [DBG] Start userinfo request
2018-04-18 00:06:55.053 +03:00 [DBG] Bearer token found in header
2018-04-18 00:06:55.156 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 00:06:55.167 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523999212,
    "exp": 1524002812,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "8eb29425-5496-432d-8257-eddc16aa6b9b",
    "auth_time": 1523999211,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-18 00:06:55.178 +03:00 [DBG] Creating userinfo response
2018-04-18 00:06:55.187 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:06:55.193 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:06:55.202 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-18 00:06:55.205 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:06:55.217 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-18 00:06:55.222 +03:00 [DBG] End userinfo request
2018-04-18 00:06:58.856 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:06:58.861 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:06:58.867 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-18 00:06:58.872 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-18 00:06:58.875 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-18 00:06:58.893 +03:00 [DBG] Processing signout request for 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 00:06:58.913 +03:00 [DBG] Start end session request validation
2018-04-18 00:06:58.924 +03:00 [DBG] Start identity token validation
2018-04-18 00:06:58.930 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-18 00:06:58.946 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 00:06:58.950 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523999212,
    "exp": 1523999512,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.90984724343734921523999200869",
    "iat": 1523999212,
    "at_hash": "iazqKdaUfdHfpR7Nh2f-Mg",
    "sid": "f6b3de6f8057ac2b2584c91de6c96c81",
    "sub": "8eb29425-5496-432d-8257-eddc16aa6b9b",
    "auth_time": 1523999211,
    "idp": "Twitter",
    "name": "Murat_Akkass",
    "preferred_username": "Murat_Akkass",
    "amr": "external"
  }
}
2018-04-18 00:06:58.970 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjM5OTkyMTIsImV4cCI6MTUyMzk5OTUxMiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjkwOTg0NzI0MzQzNzM0OTIxNTIzOTk5MjAwODY5IiwiaWF0IjoxNTIzOTk5MjEyLCJhdF9oYXNoIjoiaWF6cUtkYVVmZEhmcFI3TmgyZi1NZyIsInNpZCI6ImY2YjNkZTZmODA1N2FjMmIyNTg0YzkxZGU2Yzk2YzgxIiwic3ViIjoiOGViMjk0MjUtNTQ5Ni00MzJkLTgyNTctZWRkYzE2YWE2YjliIiwiYXV0aF90aW1lIjoxNTIzOTk5MjExLCJpZHAiOiJUd2l0dGVyIiwibmFtZSI6Ik11cmF0X0Fra2FzcyIsInByZWZlcnJlZF91c2VybmFtZSI6Ik11cmF0X0Fra2FzcyIsImFtciI6WyJleHRlcm5hbCJdfQ.FiIBxkAszANNLL98lgyh0Q7x2PaK8EmCQY0TSCX45HCg2a04MXcuDiQfx9SQZQF4KMuSJ-tt5oKHBjvlSoV9QnOO79Fr7Xo96dJOiYwtcr_kbePnRfyWD_VLOTzdppvhNjC9dWUgIA4vV7_-SMCkfh0ksGsm8jRpKwqtXokwJZ82ZEZlsB7kxItGNGUGSFg3mPntqtFOQQ120MhFR9OxKC5kvmvDYBF03orVb3slKkA9Apd0uH5VzlC7vu9MEMkJkQUw2E0fRhAJ6GsxNi8555wI41w-NbyUQvoNLBuaKwj7kBVyUKkMOFf-D3S_rKnjX_piN-hYqGW0uR8KC12uWA",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-18 00:06:58.974 +03:00 [DBG] Success validating end session request from dews.web
2018-04-18 00:06:59.012 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:06:59.015 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:06:59.102 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-18 00:06:59.105 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 00:06:59.108 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-18 00:06:59.122 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "DisplayName": "Murat_Akkass",
  "ActivityId": "0HLD4KS1TF1JQ:0000000C",
  "TimeStamp": "2018-04-17T21:06:59Z",
  "ProcessId": 13152,
  "LocalIpAddress": "127.0.0.1:14619",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:06:59.545 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-18 00:06:59.550 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-18 00:06:59.553 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-18 00:06:59.562 +03:00 [DBG] Processing signout callback request
2018-04-18 00:06:59.586 +03:00 [DBG] No client front-channel logout URLs
2018-04-18 00:06:59.594 +03:00 [DBG] No client back-channel logout URLs
2018-04-18 00:06:59.598 +03:00 [INF] Successful signout callback.
2018-04-18 00:06:59.604 +03:00 [DBG] No client front-channel iframe urls
2018-04-18 00:06:59.608 +03:00 [DBG] No client back-channel iframe urls
2018-04-18 00:09:30.193 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 00:09:30.201 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 00:09:30.218 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 00:09:30.224 +03:00 [DBG] Start authorize request
2018-04-18 00:09:30.231 +03:00 [DBG] No user present in authorize request
2018-04-18 00:09:30.236 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:09:30.239 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:09:30.242 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239992008690.8511679326663115",
  "Nonce": "N0.94827766796271411523999370172",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.94827766796271411523999370172",
    "state": "15239992008690.8511679326663115"
  }
}
2018-04-18 00:09:30.247 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 00:09:30.270 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:09:30.275 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:09:36.668 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-18 00:09:38.279 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-18 00:09:38.800 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-18 00:09:38.863 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD4KS1TF1JR:00000005",
  "TimeStamp": "2018-04-17T21:09:38Z",
  "ProcessId": 13152,
  "LocalIpAddress": "127.0.0.1:14619",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:09:38.866 +03:00 [DBG] Augmenting SignInContext
2018-04-18 00:09:38.870 +03:00 [DBG] Adding amr claim with value: external
2018-04-18 00:09:38.873 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 00:09:38.876 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 00:09:38.896 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:09:38.900 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:09:38.904 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-18 00:09:38.908 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-18 00:09:38.912 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-18 00:09:38.916 +03:00 [DBG] Start authorize callback request
2018-04-18 00:09:38.920 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-18 00:09:38.924 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:09:38.931 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:09:38.935 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239992008690.8511679326663115",
  "Nonce": "N0.94827766796271411523999370172",
  "SessionId": "f42630c73f7fa8e3b9cbab06630a1970",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.94827766796271411523999370172",
    "state": "15239992008690.8511679326663115"
  }
}
2018-04-18 00:09:38.949 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-18 00:09:38.954 +03:00 [DBG] Creating Implicit Flow response.
2018-04-18 00:09:38.959 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-18 00:09:38.964 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-18 00:09:38.990 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-18 00:09:39.013 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****4uVw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****fkHw"
    }
  ],
  "ActivityId": "0HLD4KS1TF1JR:00000006",
  "TimeStamp": "2018-04-17T21:09:39Z",
  "ProcessId": 13152,
  "LocalIpAddress": "127.0.0.1:14619",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:09:39.017 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15239992008690.8511679326663115",
  "Scope": "openid profile dews.api"
}
2018-04-18 00:09:39.023 +03:00 [DBG] Augmenting SignInContext
2018-04-18 00:09:39.027 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 00:09:41.836 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-18 00:09:41.841 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:09:41.844 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:09:41.850 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-18 00:09:41.855 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-18 00:09:41.878 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-18 00:09:41.881 +03:00 [DBG] Start key discovery request
2018-04-18 00:09:41.992 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 00:09:41.996 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:09:42.003 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:09:42.063 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 00:09:42.148 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:09:42.178 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:09:42.190 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-18 00:09:42.194 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-18 00:09:42.209 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-18 00:09:42.226 +03:00 [DBG] Start userinfo request
2018-04-18 00:09:42.230 +03:00 [DBG] Bearer token found in header
2018-04-18 00:09:42.253 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 00:09:42.258 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1523999378,
    "exp": 1524002978,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523999378,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-18 00:09:42.262 +03:00 [DBG] Creating userinfo response
2018-04-18 00:09:42.267 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:09:42.270 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:09:42.273 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-18 00:09:42.276 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:09:42.305 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-18 00:09:42.307 +03:00 [DBG] End userinfo request
2018-04-18 00:09:44.283 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:09:44.286 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:09:44.289 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-18 00:09:44.292 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-18 00:09:44.295 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-18 00:09:44.300 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-18 00:09:44.304 +03:00 [DBG] Start end session request validation
2018-04-18 00:09:44.309 +03:00 [DBG] Start identity token validation
2018-04-18 00:09:44.321 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-18 00:09:44.352 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 00:09:44.355 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1523999379,
    "exp": 1523999679,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.94827766796271411523999370172",
    "iat": 1523999378,
    "at_hash": "sJOcdk8iStBFN0HxoLwbKg",
    "sid": "f42630c73f7fa8e3b9cbab06630a1970",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1523999378,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-18 00:09:44.359 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjM5OTkzNzksImV4cCI6MTUyMzk5OTY3OSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjk0ODI3NzY2Nzk2MjcxNDExNTIzOTk5MzcwMTcyIiwiaWF0IjoxNTIzOTk5Mzc4LCJhdF9oYXNoIjoic0pPY2RrOGlTdEJGTjBIeG9Md2JLZyIsInNpZCI6ImY0MjYzMGM3M2Y3ZmE4ZTNiOWNiYWIwNjYzMGExOTcwIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTIzOTk5Mzc4LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.Kz0TA8ooS11Ov8Tl6VbqdrHcQEhJFLzFvfYXahpP0xd3AY9d6pLAXFHaAjaJ0HQLczgooXz_EjZ4ZNaMipw62aKTwzULbJQWZLg066XMFSanOvkgXgcVBkbWuq-t0hJYQbWOq0IvZ_RbLuATe_90NENGDjOqZNd6LYMxhtbNmEFRv1T7N5GHhAxQT0YInsYgjXyYEnxqKApD35dl52EJFnA-_RU7ZL36IPoT972l4O6gXnLQYnoaqqwTMAqVs9aKx9INKgkb3pSI5CPsFaIk6RyFZk3hxJrhcUbIOW-EI6-IVEMEMAQNAzp7b4C1Cob-PUEyGqTf5tpTt_uA1M4uVw",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-18 00:09:44.363 +03:00 [DBG] Success validating end session request from dews.web
2018-04-18 00:09:44.385 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:09:44.387 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:09:44.393 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-18 00:09:44.396 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 00:09:44.401 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-18 00:09:44.404 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD4KS1TF1JR:0000000B",
  "TimeStamp": "2018-04-17T21:09:44Z",
  "ProcessId": 13152,
  "LocalIpAddress": "127.0.0.1:14619",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:09:44.547 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-18 00:09:44.553 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-18 00:09:44.577 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-18 00:09:44.585 +03:00 [DBG] Processing signout callback request
2018-04-18 00:09:44.590 +03:00 [DBG] No client front-channel logout URLs
2018-04-18 00:09:44.595 +03:00 [DBG] No client back-channel logout URLs
2018-04-18 00:09:44.606 +03:00 [INF] Successful signout callback.
2018-04-18 00:09:44.611 +03:00 [DBG] No client front-channel iframe urls
2018-04-18 00:09:44.622 +03:00 [DBG] No client back-channel iframe urls
2018-04-18 00:09:52.961 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 00:09:52.965 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 00:09:52.968 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 00:09:52.971 +03:00 [DBG] Start authorize request
2018-04-18 00:09:52.975 +03:00 [DBG] No user present in authorize request
2018-04-18 00:09:52.978 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:09:52.982 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:09:52.985 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239992008690.8511679326663115",
  "Nonce": "N0.64155112004215291523999392949",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.64155112004215291523999392949",
    "state": "15239992008690.8511679326663115"
  }
}
2018-04-18 00:09:52.990 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 00:09:53.019 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:09:53.025 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:19:32.901 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:19:32.987 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:19:33.025 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:19:33.039 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:19:33.045 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:19:33.049 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:21:32.331 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 00:21:32.538 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 00:21:32.541 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 00:21:32.553 +03:00 [DBG] Start authorize request
2018-04-18 00:21:32.571 +03:00 [DBG] No user present in authorize request
2018-04-18 00:21:32.580 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:21:32.714 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:21:32.812 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.51615331165249741524000092240",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.51615331165249741524000092240",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-18 00:21:32.827 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 00:21:32.987 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:21:32.991 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:24:42.429 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:24:42.539 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:24:42.554 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:24:42.571 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:24:42.577 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:24:42.589 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:25:22.886 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 00:25:23.069 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 00:25:23.074 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 00:25:23.082 +03:00 [DBG] Start authorize request
2018-04-18 00:25:23.100 +03:00 [DBG] No user present in authorize request
2018-04-18 00:25:23.113 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:25:23.254 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:25:23.376 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.54651022635593251524000322845",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.54651022635593251524000322845",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-18 00:25:23.394 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 00:25:23.553 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:25:23.557 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:27:19.851 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:27:19.861 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:27:24.012 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-18 00:31:29.674 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-18 00:31:31.214 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-18 00:31:31.296 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-18 00:31:32.241 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLD4L6HD3IVE:00000003",
  "TimeStamp": "2018-04-17T21:31:32Z",
  "ProcessId": 19676,
  "LocalIpAddress": "127.0.0.1:19301",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:31:32.259 +03:00 [DBG] Augmenting SignInContext
2018-04-18 00:31:32.264 +03:00 [DBG] Adding amr claim with value: external
2018-04-18 00:31:32.272 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 00:31:32.281 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 00:31:32.320 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:31:32.327 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:31:32.331 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-18 00:31:32.334 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-18 00:31:32.337 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-18 00:31:32.351 +03:00 [DBG] Start authorize callback request
2018-04-18 00:31:32.363 +03:00 [DBG] User in authorize request: 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 00:31:32.366 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:31:32.369 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:31:32.372 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.54651022635593251524000322845",
  "SessionId": "e7a0c601c24272b3d0e8b29f476d05b8",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.54651022635593251524000322845",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-18 00:31:32.443 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-18 00:31:32.454 +03:00 [DBG] Creating Implicit Flow response.
2018-04-18 00:31:32.470 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-18 00:31:32.473 +03:00 [DBG] Getting claims for access token for subject: 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 00:31:32.600 +03:00 [DBG] Getting claims for identity token for subject: 8eb29425-5496-432d-8257-eddc16aa6b9b and client: dews.web
2018-04-18 00:31:32.638 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****zUPQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****7KSg"
    }
  ],
  "ActivityId": "0HLD4L6HD3IVE:00000004",
  "TimeStamp": "2018-04-17T21:31:32Z",
  "ProcessId": 19676,
  "LocalIpAddress": "127.0.0.1:19301",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:31:32.649 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15239964907360.9353746434313193",
  "Scope": "openid profile dews.api"
}
2018-04-18 00:31:32.677 +03:00 [DBG] Augmenting SignInContext
2018-04-18 00:31:32.680 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 00:31:35.094 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-18 00:31:35.100 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:31:35.104 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:31:35.113 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-18 00:31:35.120 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-18 00:31:35.123 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-18 00:31:35.131 +03:00 [DBG] Start key discovery request
2018-04-18 00:31:35.267 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 00:31:35.275 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:31:35.282 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:31:35.397 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 00:31:35.403 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 00:31:35.409 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 00:31:35.418 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-18 00:31:35.429 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-18 00:31:35.435 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-18 00:31:35.467 +03:00 [DBG] Start userinfo request
2018-04-18 00:31:35.486 +03:00 [DBG] Bearer token found in header
2018-04-18 00:31:35.626 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 00:31:35.635 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524000692,
    "exp": 1524004292,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "8eb29425-5496-432d-8257-eddc16aa6b9b",
    "auth_time": 1524000692,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-18 00:31:35.649 +03:00 [DBG] Creating userinfo response
2018-04-18 00:31:35.658 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:31:35.665 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:31:35.674 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-18 00:31:35.677 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 00:31:35.692 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-18 00:31:35.695 +03:00 [DBG] End userinfo request
2018-04-18 00:31:47.905 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-18 00:31:47.909 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-18 00:31:47.912 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-18 00:31:47.923 +03:00 [DBG] Start discovery request
2018-04-18 00:31:48.182 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-18 00:31:48.185 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-18 00:31:48.189 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-18 00:31:48.192 +03:00 [DBG] Start key discovery request
2018-04-18 00:33:10.918 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:33:10.941 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:33:10.947 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-18 00:33:10.956 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-18 00:33:10.962 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-18 00:33:11.000 +03:00 [DBG] Processing signout request for 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 00:33:11.012 +03:00 [DBG] Start end session request validation
2018-04-18 00:33:11.022 +03:00 [DBG] Start identity token validation
2018-04-18 00:33:11.026 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-18 00:33:11.050 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 00:33:11.054 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524000692,
    "exp": 1524000992,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.54651022635593251524000322845",
    "iat": 1524000692,
    "at_hash": "FGGORw7hK4Aokp1oUKktIg",
    "sid": "e7a0c601c24272b3d0e8b29f476d05b8",
    "sub": "8eb29425-5496-432d-8257-eddc16aa6b9b",
    "auth_time": 1524000692,
    "idp": "Twitter",
    "name": "Murat_Akkass",
    "preferred_username": "Murat_Akkass",
    "amr": "external"
  }
}
2018-04-18 00:33:11.070 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQwMDA2OTIsImV4cCI6MTUyNDAwMDk5MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjU0NjUxMDIyNjM1NTkzMjUxNTI0MDAwMzIyODQ1IiwiaWF0IjoxNTI0MDAwNjkyLCJhdF9oYXNoIjoiRkdHT1J3N2hLNEFva3Axb1VLa3RJZyIsInNpZCI6ImU3YTBjNjAxYzI0MjcyYjNkMGU4YjI5ZjQ3NmQwNWI4Iiwic3ViIjoiOGViMjk0MjUtNTQ5Ni00MzJkLTgyNTctZWRkYzE2YWE2YjliIiwiYXV0aF90aW1lIjoxNTI0MDAwNjkyLCJpZHAiOiJUd2l0dGVyIiwibmFtZSI6Ik11cmF0X0Fra2FzcyIsInByZWZlcnJlZF91c2VybmFtZSI6Ik11cmF0X0Fra2FzcyIsImFtciI6WyJleHRlcm5hbCJdfQ.iU3g3F_CyXBNSg0FYx4pXVVu4ua8QtEZ3ZnqZI1IstLLw2RHoUbWwSJpgYohEO7ZNw-QDYpLmp0sNppvaNsLLrqRpAU7T8ZFkv8KtwdEU8gIkoW-gC_BIH1-2YoJYS7r6bq5sJKnBz0aElz15f5jFGVXNIQpp_k5npPWczq_LJV8l96-gXI_jQnTVpsKB4Y-Kps_SBdzh2lqDCUXy-qIsqzxyIerYlkquVAdKZAt7Bizu5bwYbV-o8qgod14H6MRBBPLx_8W7AdkONLx8-U7G0q4eAffJrnTUSqU1TX5hgaC1PNPDZWutEjRW62Os-z20qVIbCcFuqAPYNPv98zUPQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-18 00:33:11.073 +03:00 [DBG] Success validating end session request from dews.web
2018-04-18 00:33:11.105 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:33:11.108 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 00:33:11.187 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-18 00:33:11.190 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 00:33:11.192 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-18 00:33:11.207 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "DisplayName": "Murat_Akkass",
  "ActivityId": "0HLD4L6HD3IVF:00000002",
  "TimeStamp": "2018-04-17T21:33:11Z",
  "ProcessId": 19676,
  "LocalIpAddress": "127.0.0.1:19301",
  "RemoteIpAddress": "::1"
}
2018-04-18 00:33:11.820 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-18 00:33:11.832 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-18 00:33:11.835 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-18 00:33:11.850 +03:00 [DBG] Processing signout callback request
2018-04-18 00:33:11.875 +03:00 [DBG] No client front-channel logout URLs
2018-04-18 00:33:11.879 +03:00 [DBG] No client back-channel logout URLs
2018-04-18 00:33:11.882 +03:00 [INF] Successful signout callback.
2018-04-18 00:33:11.885 +03:00 [DBG] No client front-channel iframe urls
2018-04-18 00:33:11.888 +03:00 [DBG] No client back-channel iframe urls
2018-04-18 00:41:39.091 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 00:41:39.099 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 00:41:39.107 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 00:41:39.140 +03:00 [DBG] Start authorize request
2018-04-18 00:41:39.145 +03:00 [DBG] No user present in authorize request
2018-04-18 00:41:39.152 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:41:39.156 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:41:39.159 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.97103879135760281524001299065",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.97103879135760281524001299065",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-18 00:41:39.166 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 00:41:39.193 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:41:39.198 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:43:48.601 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:43:48.606 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:43:52.679 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:43:52.684 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:44:05.408 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:44:05.412 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:45:03.774 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:45:03.785 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:46:38.277 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:46:38.326 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:46:38.330 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:46:38.330 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:46:38.330 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:46:38.330 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:46:39.307 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:46:39.379 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:47:16.219 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:47:16.221 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:47:20.365 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:47:20.366 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:47:27.653 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:47:27.654 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:50:30.995 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:50:31.070 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:50:31.078 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:50:31.081 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:50:31.085 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:50:31.088 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:50:49.476 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:50:49.549 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:51:41.791 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:51:41.797 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:51:48.588 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:51:48.593 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:52:32.174 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:52:32.178 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:53:03.066 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:53:03.180 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:53:03.204 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:53:03.211 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:53:03.222 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:53:03.234 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:53:14.217 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:53:14.284 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:53:30.655 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:53:30.677 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:54:25.773 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-18 00:54:25.874 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-18 00:54:25.881 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-18 00:54:25.882 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-18 00:54:25.882 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-18 00:54:25.882 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-18 00:54:26.749 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:54:26.834 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:54:57.768 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:54:57.770 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:55:05.827 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:55:05.827 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:55:31.118 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:55:31.119 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:55:56.018 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:55:56.019 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:55:56.258 +03:00 [ERR] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Cannot override the 'href' attribute for <a>. An <a> with a specified 'href' must not have attributes starting with 'asp-route-' or an 'asp-action', 'asp-controller', 'asp-area', 'asp-route', 'asp-protocol', 'asp-host', 'asp-fragment', 'asp-page' or 'asp-page-handler' attribute.
   at Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper.Process(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.TagHelpers.TagHelper.ProcessAsync(TagHelperContext context, TagHelperOutput output)
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner.<RunAsync>d__0.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at AspNetCore._Views_Account_Login_cshtml.<ExecuteAsync>d__20.MoveNext() in C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml:line 73
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.<RenderPageCoreAsync>d__16.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.<RenderPageAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.<RenderAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.<ExecuteAsync>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.<ExecuteAsync>d__21.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.ViewResult.<ExecuteResultAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeResultAsync>d__19.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResultFilterAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-18 00:56:03.958 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:56:03.958 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:56:30.940 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:56:30.941 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:56:43.186 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:56:43.187 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:57:05.207 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:57:05.208 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:57:26.689 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:57:26.689 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:57:34.127 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:57:34.128 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:57:43.028 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:57:43.029 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:57:51.104 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:57:51.105 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:58:12.837 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:58:12.839 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:58:28.300 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 00:58:28.301 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 00:58:32.579 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-18 00:58:38.619 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-18 01:00:19.845 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-18 01:00:19.862 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-18 01:00:19.871 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-18 01:00:19.886 +03:00 [DBG] Start authorize request
2018-04-18 01:00:19.901 +03:00 [DBG] No user present in authorize request
2018-04-18 01:00:19.904 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 01:00:19.908 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 01:00:20.041 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.85952471656972531524002419767",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.85952471656972531524002419767",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-18 01:00:20.066 +03:00 [INF] Showing login: User is not authenticated
2018-04-18 01:00:20.092 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 01:00:20.097 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 01:00:23.663 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 01:00:23.667 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 01:00:27.817 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-18 01:00:28.837 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-18 01:00:28.885 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-18 01:00:30.030 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLD4LN4R11TV:0000000A",
  "TimeStamp": "2018-04-17T22:00:29Z",
  "ProcessId": 25112,
  "LocalIpAddress": "127.0.0.1:29329",
  "RemoteIpAddress": "::1"
}
2018-04-18 01:00:30.058 +03:00 [DBG] Augmenting SignInContext
2018-04-18 01:00:30.063 +03:00 [DBG] Adding amr claim with value: external
2018-04-18 01:00:30.077 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 01:00:30.096 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-18 01:00:30.130 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 01:00:30.136 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-18 01:00:30.139 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-18 01:00:30.143 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-18 01:00:30.146 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-18 01:00:30.159 +03:00 [DBG] Start authorize callback request
2018-04-18 01:00:30.167 +03:00 [DBG] User in authorize request: 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 01:00:30.171 +03:00 [DBG] Start authorize request protocol validation
2018-04-18 01:00:30.174 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-18 01:00:30.177 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15239964907360.9353746434313193",
  "Nonce": "N0.85952471656972531524002419767",
  "SessionId": "6a83d8b7fa9e1cedfd68858f2a06b699",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.85952471656972531524002419767",
    "state": "15239964907360.9353746434313193"
  }
}
2018-04-18 01:00:30.238 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-18 01:00:30.250 +03:00 [DBG] Creating Implicit Flow response.
2018-04-18 01:00:30.267 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-18 01:00:30.271 +03:00 [DBG] Getting claims for access token for subject: 8eb29425-5496-432d-8257-eddc16aa6b9b
2018-04-18 01:00:30.390 +03:00 [DBG] Getting claims for identity token for subject: 8eb29425-5496-432d-8257-eddc16aa6b9b and client: dews.web
2018-04-18 01:00:30.427 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****NrGg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****29yA"
    }
  ],
  "ActivityId": "0HLD4LN4R11U1:00000004",
  "TimeStamp": "2018-04-17T22:00:30Z",
  "ProcessId": 25112,
  "LocalIpAddress": "127.0.0.1:29329",
  "RemoteIpAddress": "::1"
}
2018-04-18 01:00:30.441 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "8eb29425-5496-432d-8257-eddc16aa6b9b",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15239964907360.9353746434313193",
  "Scope": "openid profile dews.api"
}
2018-04-18 01:00:30.476 +03:00 [DBG] Augmenting SignInContext
2018-04-18 01:00:30.480 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-18 01:00:33.114 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-18 01:00:33.121 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 01:00:33.124 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 01:00:33.132 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-18 01:00:33.138 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-18 01:00:33.141 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-18 01:00:33.149 +03:00 [DBG] Start key discovery request
2018-04-18 01:00:33.238 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 01:00:33.243 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 01:00:33.249 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 01:00:33.296 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-18 01:00:33.309 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-18 01:00:33.316 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-18 01:00:33.337 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-18 01:00:33.345 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-18 01:00:33.360 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-18 01:00:33.380 +03:00 [DBG] Start userinfo request
2018-04-18 01:00:33.394 +03:00 [DBG] Bearer token found in header
2018-04-18 01:00:33.529 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-18 01:00:33.540 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524002430,
    "exp": 1524006030,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "8eb29425-5496-432d-8257-eddc16aa6b9b",
    "auth_time": 1524002430,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-18 01:00:33.553 +03:00 [DBG] Creating userinfo response
2018-04-18 01:00:33.560 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 01:00:33.566 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 01:00:33.573 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-18 01:00:33.575 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-18 01:00:33.585 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-18 01:00:33.588 +03:00 [DBG] End userinfo request
2018-04-21 23:32:11.469 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:32:11.650 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:32:11.671 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:32:11.687 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:32:11.694 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:32:11.700 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:32:44.444 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-21 23:32:44.648 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-21 23:32:44.652 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-21 23:32:44.659 +03:00 [DBG] Start authorize request
2018-04-21 23:32:44.673 +03:00 [DBG] No user present in authorize request
2018-04-21 23:32:44.681 +03:00 [DBG] Start authorize request protocol validation
2018-04-21 23:32:44.745 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-21 23:32:44.845 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.356348716720456871524342764411",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.356348716720456871524342764411",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-21 23:32:44.861 +03:00 [INF] Showing login: User is not authenticated
2018-04-21 23:32:44.988 +03:00 [DBG] Start authorize request protocol validation
2018-04-21 23:32:44.991 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-21 23:32:51.150 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-21 23:33:10.324 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-21 23:33:10.353 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-21 23:33:11.231 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD7ORR84MS8:00000006",
  "TimeStamp": "2018-04-21T20:33:11Z",
  "ProcessId": 22656,
  "LocalIpAddress": "127.0.0.1:26990",
  "RemoteIpAddress": "::1"
}
2018-04-21 23:33:11.248 +03:00 [DBG] Augmenting SignInContext
2018-04-21 23:33:11.253 +03:00 [DBG] Adding amr claim with value: external
2018-04-21 23:33:11.262 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-21 23:33:11.270 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-21 23:33:11.294 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-21 23:33:11.297 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-21 23:33:11.300 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-21 23:33:11.304 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-21 23:33:11.307 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-21 23:33:11.316 +03:00 [DBG] Start authorize callback request
2018-04-21 23:33:11.324 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-21 23:33:11.327 +03:00 [DBG] Start authorize request protocol validation
2018-04-21 23:33:11.330 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-21 23:33:11.332 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.356348716720456871524342764411",
  "SessionId": "bb59ef039438b69be51b4fc1b78557e8",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.356348716720456871524342764411",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-21 23:33:11.402 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-21 23:33:11.414 +03:00 [DBG] Creating Implicit Flow response.
2018-04-21 23:33:11.429 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-21 23:33:11.434 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-21 23:33:11.550 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-21 23:33:11.587 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OUHQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****tO2w"
    }
  ],
  "ActivityId": "0HLD7ORR84MS6:00000006",
  "TimeStamp": "2018-04-21T20:33:11Z",
  "ProcessId": 22656,
  "LocalIpAddress": "127.0.0.1:26990",
  "RemoteIpAddress": "::1"
}
2018-04-21 23:33:11.598 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-21 23:33:11.627 +03:00 [DBG] Augmenting SignInContext
2018-04-21 23:33:11.631 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-21 23:33:13.937 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-21 23:33:13.945 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-21 23:33:13.948 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-21 23:33:13.960 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:33:13.969 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:33:13.974 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:33:13.983 +03:00 [DBG] Start key discovery request
2018-04-21 23:33:14.118 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-21 23:33:14.125 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-21 23:33:14.130 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-21 23:33:14.180 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-21 23:33:14.190 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-21 23:33:14.197 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-21 23:33:14.211 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-21 23:33:14.217 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-21 23:33:14.222 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-21 23:33:14.235 +03:00 [DBG] Start userinfo request
2018-04-21 23:33:14.243 +03:00 [DBG] Bearer token found in header
2018-04-21 23:33:14.332 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-21 23:33:14.344 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524342791,
    "exp": 1524346391,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1524342791,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-21 23:33:14.360 +03:00 [DBG] Creating userinfo response
2018-04-21 23:33:14.367 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-21 23:33:14.373 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-21 23:33:14.379 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-21 23:33:14.382 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-21 23:33:14.393 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-21 23:33:14.396 +03:00 [DBG] End userinfo request
2018-04-21 23:33:16.579 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:33:16.583 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:33:16.587 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:33:16.594 +03:00 [DBG] Start discovery request
2018-04-21 23:33:17.304 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:33:17.307 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:33:17.310 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:33:17.313 +03:00 [DBG] Start key discovery request
2018-04-21 23:38:14.074 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:38:14.162 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:38:14.169 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:38:14.169 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:38:14.169 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:38:14.169 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:38:14.846 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-21 23:38:14.867 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-21 23:38:14.873 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-21 23:38:14.883 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-21 23:38:14.884 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-21 23:38:14.889 +03:00 [DBG] Start authorize request
2018-04-21 23:38:14.903 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-21 23:38:14.909 +03:00 [DBG] Start authorize request protocol validation
2018-04-21 23:38:15.047 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.89421906779922391524343092648",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-21 23:38:15.053 +03:00 [ERR] Request validation failed
2018-04-21 23:38:15.053 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.89421906779922391524343092648",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-21 23:38:15.117 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7OV76EP8B:00000001",
  "TimeStamp": "2018-04-21T20:38:15Z",
  "ProcessId": 18416,
  "LocalIpAddress": "127.0.0.1:32432",
  "RemoteIpAddress": "::1"
}
2018-04-21 23:38:15.166 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-21 23:38:15.167 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-21 23:40:05.680 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:40:05.791 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:40:05.799 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:40:05.804 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:40:05.807 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:40:05.810 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:40:19.339 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:40:19.482 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:40:19.486 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:40:19.494 +03:00 [DBG] Start discovery request
2018-04-21 23:40:19.993 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:40:19.998 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:40:20.002 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:40:20.013 +03:00 [DBG] Start key discovery request
2018-04-21 23:44:08.043 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:44:08.144 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:44:08.157 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:44:08.161 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:44:08.165 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:44:08.172 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:44:09.829 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:44:10.072 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:44:10.079 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:44:10.095 +03:00 [DBG] Start discovery request
2018-04-21 23:44:10.821 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:44:10.827 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:44:10.835 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:44:10.845 +03:00 [DBG] Start key discovery request
2018-04-21 23:49:57.626 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:49:57.716 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:49:57.726 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:49:57.730 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:49:57.734 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:49:57.737 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:50:14.653 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:50:14.804 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:50:14.807 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:50:14.816 +03:00 [DBG] Start discovery request
2018-04-21 23:50:15.326 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:50:15.333 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:50:15.336 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:50:15.344 +03:00 [DBG] Start key discovery request
2018-04-21 23:51:35.891 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:51:36.003 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:51:36.011 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:51:36.021 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:51:36.026 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:51:36.029 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:51:43.994 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:51:44.162 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:51:44.165 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:51:44.179 +03:00 [DBG] Start discovery request
2018-04-21 23:51:44.759 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:51:44.766 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:51:44.774 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:51:44.793 +03:00 [DBG] Start key discovery request
2018-04-21 23:53:56.920 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:53:57.038 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:53:57.048 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:53:57.051 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:53:57.055 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:53:57.057 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:54:07.945 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:54:08.093 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:54:08.097 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:54:08.105 +03:00 [DBG] Start discovery request
2018-04-21 23:54:08.555 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:54:08.560 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:54:08.563 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:54:08.572 +03:00 [DBG] Start key discovery request
2018-04-21 23:54:51.465 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:54:51.553 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:54:51.562 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:54:51.566 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:54:51.570 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:54:51.576 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-21 23:55:10.879 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-21 23:55:11.030 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-21 23:55:11.033 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-21 23:55:11.041 +03:00 [DBG] Start discovery request
2018-04-21 23:55:11.497 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-21 23:55:11.502 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-21 23:55:11.506 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-21 23:55:11.514 +03:00 [DBG] Start key discovery request
2018-04-21 23:58:32.353 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-21 23:58:32.428 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-21 23:58:32.434 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-21 23:58:32.437 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-21 23:58:32.439 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-21 23:58:32.442 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:06:13.671 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:06:13.759 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:06:13.772 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:06:13.775 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:06:13.780 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:06:13.784 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:06:26.378 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:06:26.386 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:06:26.395 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:06:26.407 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:06:26.410 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:06:26.420 +03:00 [DBG] Start authorize request
2018-04-22 00:06:26.439 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:06:26.452 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:06:26.541 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:06:26.629 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.466699154346823741524344785426",
  "SessionId": "bb59ef039438b69be51b4fc1b78557e8",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.466699154346823741524344785426",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:06:26.661 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 00:06:26.676 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 00:06:26.695 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 00:06:26.701 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:06:26.823 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-22 00:06:26.914 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****k3YQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****rA_Q"
    }
  ],
  "ActivityId": "0HLD7PEROLUGD:00000002",
  "TimeStamp": "2018-04-21T21:06:26Z",
  "ProcessId": 21680,
  "LocalIpAddress": "127.0.0.1:2212",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:06:26.926 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 00:06:29.018 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 00:06:29.025 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:06:29.027 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:06:29.036 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:06:29.043 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:06:29.046 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:06:29.053 +03:00 [DBG] Start key discovery request
2018-04-22 00:06:29.218 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:06:29.233 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:06:29.237 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:06:29.269 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:06:29.275 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:06:29.283 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:06:29.290 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 00:06:29.301 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 00:06:29.304 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 00:06:29.324 +03:00 [DBG] Start userinfo request
2018-04-22 00:06:29.339 +03:00 [DBG] Bearer token found in header
2018-04-22 00:06:29.462 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:06:29.473 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524344786,
    "exp": 1524348386,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1524342791,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 00:06:29.486 +03:00 [DBG] Creating userinfo response
2018-04-22 00:06:29.493 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:06:29.502 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:06:29.509 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 00:06:29.515 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:06:29.527 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 00:06:29.536 +03:00 [DBG] End userinfo request
2018-04-22 00:06:31.457 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:06:31.464 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:06:31.470 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:06:31.480 +03:00 [DBG] Start discovery request
2018-04-22 00:06:31.756 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:06:31.758 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:06:31.763 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:06:31.769 +03:00 [DBG] Start key discovery request
2018-04-22 00:12:36.145 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:12:36.171 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:12:36.179 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:12:36.184 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:12:36.192 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:12:36.197 +03:00 [DBG] Start authorize request
2018-04-22 00:12:36.202 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:12:36.209 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:12:36.216 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.36841496705108371524345087669",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-22 00:12:36.233 +03:00 [ERR] Request validation failed
2018-04-22 00:12:36.244 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.36841496705108371524345087669",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-22 00:12:36.277 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7PEROLUGE:00000001",
  "TimeStamp": "2018-04-21T21:12:36Z",
  "ProcessId": 21680,
  "LocalIpAddress": "127.0.0.1:2212",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:12:36.327 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:12:36.333 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:13:36.325 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:13:36.329 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:13:36.338 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 00:13:36.351 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 00:13:36.357 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 00:13:36.369 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:13:36.381 +03:00 [DBG] Start end session request validation
2018-04-22 00:13:36.396 +03:00 [DBG] Start identity token validation
2018-04-22 00:13:36.403 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 00:13:36.445 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:13:36.451 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524344786,
    "exp": 1524345086,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.466699154346823741524344785426",
    "iat": 1524344786,
    "at_hash": "2A2CKPCmaY8TMpy0I-zVMw",
    "sid": "bb59ef039438b69be51b4fc1b78557e8",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1524342791,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-22 00:13:36.466 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNDQ3ODYsImV4cCI6MTUyNDM0NTA4NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQ2NjY5OTE1NDM0NjgyMzc0MTUyNDM0NDc4NTQyNiIsImlhdCI6MTUyNDM0NDc4NiwiYXRfaGFzaCI6IjJBMkNLUENtYVk4VE1weTBJLXpWTXciLCJzaWQiOiJiYjU5ZWYwMzk0MzhiNjliZTUxYjRmYzFiNzg1NTdlOCIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyNDM0Mjc5MSwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.EqIa8QbNEZq73ZtmPwbsQGOm4SuIQCvUTyBxLDNF_8113041Jg2J4CXGtCU9pf8EOi_cDP2WoW5R369a7BvVdbwI8BTnInbGpciCl4_9amoLo9T-NBwQZNHzJkiTo7zbWvH2DLqjJVCzxLQElJij-juqdr--s1s2A0TtQwvVjXShBKN1agrUy2KUBTppyPzLCq_VFIKM5sLi4wD_0W-hi-7IxeMNRXWVHyrg1Yv1fjbfVGJu8M9pez2TggHZiQlCrYQlcbqbJkHOc22H2YUM8-ZX6C-QMyVby6iDHLcZxBUDUwRpB1mb0dISq7jfMTlNDaEde6MKzt-mQr8vCBk3YQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 00:13:36.469 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 00:13:36.502 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:13:36.506 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:13:36.589 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 00:13:36.594 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:13:36.596 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 00:13:36.609 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7PEROLUGE:00000004",
  "TimeStamp": "2018-04-21T21:13:36Z",
  "ProcessId": 21680,
  "LocalIpAddress": "127.0.0.1:2212",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:13:36.871 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 00:13:36.896 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 00:13:36.901 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 00:13:36.916 +03:00 [DBG] Processing signout callback request
2018-04-22 00:13:36.939 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 00:13:36.943 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 00:13:36.949 +03:00 [INF] Successful signout callback.
2018-04-22 00:13:36.954 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 00:13:36.957 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 00:13:39.969 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:13:39.973 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:13:39.976 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:13:39.982 +03:00 [DBG] Start authorize request
2018-04-22 00:13:39.988 +03:00 [DBG] No user present in authorize request
2018-04-22 00:13:39.991 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:13:39.997 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:13:40.001 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.77122444243069111524345219948",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.77122444243069111524345219948",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:13:40.008 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 00:13:40.073 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:13:40.079 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:13:42.225 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-22 00:13:44.012 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 00:13:44.055 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 00:15:08.761 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD7PEROLUGE:00000008",
  "TimeStamp": "2018-04-21T21:15:08Z",
  "ProcessId": 21680,
  "LocalIpAddress": "127.0.0.1:2212",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:15:08.784 +03:00 [DBG] Augmenting SignInContext
2018-04-22 00:15:08.789 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 00:15:08.795 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 00:15:08.798 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:15:08.828 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:15:08.831 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:15:08.834 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 00:15:08.838 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 00:15:08.840 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 00:15:08.850 +03:00 [DBG] Start authorize callback request
2018-04-22 00:15:08.858 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:15:08.861 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:15:08.865 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:15:08.867 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.77122444243069111524345219948",
  "SessionId": "0d2b79595a3ed5109e1e784d3b48cffd",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.77122444243069111524345219948",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:15:08.883 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 00:15:08.887 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 00:15:08.890 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 00:15:08.895 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:15:08.921 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-22 00:15:08.940 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****djJg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****gThw"
    }
  ],
  "ActivityId": "0HLD7PEROLUGE:00000009",
  "TimeStamp": "2018-04-21T21:15:08Z",
  "ProcessId": 21680,
  "LocalIpAddress": "127.0.0.1:2212",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:15:08.945 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 00:15:08.960 +03:00 [DBG] Augmenting SignInContext
2018-04-22 00:15:08.963 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 00:15:11.024 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 00:15:11.028 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:15:11.032 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:15:11.038 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:15:11.043 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:15:11.046 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:15:11.049 +03:00 [DBG] Start key discovery request
2018-04-22 00:15:11.191 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:15:11.194 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:15:11.197 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:15:11.213 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:15:11.221 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:15:11.234 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:15:11.240 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 00:15:11.243 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 00:15:11.247 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 00:15:11.250 +03:00 [DBG] Start userinfo request
2018-04-22 00:15:11.253 +03:00 [DBG] Bearer token found in header
2018-04-22 00:15:11.269 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:15:11.273 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524345308,
    "exp": 1524348908,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1524345308,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 00:15:11.277 +03:00 [DBG] Creating userinfo response
2018-04-22 00:15:11.279 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:15:11.283 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:15:11.286 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 00:15:11.289 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:15:11.308 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 00:15:11.311 +03:00 [DBG] End userinfo request
2018-04-22 00:19:04.115 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:19:04.261 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:19:04.274 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:19:04.281 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:19:04.284 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:19:04.288 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:19:14.162 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:19:14.326 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:19:14.329 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:19:14.337 +03:00 [DBG] Start discovery request
2018-04-22 00:19:14.861 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:19:14.866 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:19:14.871 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:19:14.879 +03:00 [DBG] Start key discovery request
2018-04-22 00:20:42.491 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:20:42.495 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:20:42.500 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:20:42.511 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:20:43.314 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:20:43.327 +03:00 [DBG] Start authorize request
2018-04-22 00:20:43.356 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:20:43.368 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:20:43.422 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.59640940730844581524345610015",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-22 00:20:43.429 +03:00 [ERR] Request validation failed
2018-04-22 00:20:43.432 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.59640940730844581524345610015",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-22 00:20:43.517 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7PM1F3JSN:00000004",
  "TimeStamp": "2018-04-21T21:20:43Z",
  "ProcessId": 31404,
  "LocalIpAddress": "127.0.0.1:11686",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:20:43.558 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:20:43.563 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:24:20.560 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:24:20.627 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:24:20.634 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:24:20.640 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:24:20.643 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:24:20.647 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:24:36.850 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:24:36.988 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:24:36.993 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:24:36.999 +03:00 [DBG] Start discovery request
2018-04-22 00:24:37.442 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:24:37.447 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:24:37.449 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:24:37.457 +03:00 [DBG] Start key discovery request
2018-04-22 00:26:11.683 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:26:11.773 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:26:11.784 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:26:11.787 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:26:11.791 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:26:11.795 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:26:40.899 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:26:41.046 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:26:41.050 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:26:41.057 +03:00 [DBG] Start discovery request
2018-04-22 00:26:41.533 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:26:41.539 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:26:41.542 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:26:41.548 +03:00 [DBG] Start key discovery request
2018-04-22 00:27:34.411 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:27:34.579 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:27:34.605 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:27:34.639 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:27:34.645 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:27:34.653 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:27:40.305 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:27:40.521 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:27:40.526 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:27:40.553 +03:00 [DBG] Start discovery request
2018-04-22 00:27:41.398 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:27:41.405 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:27:41.421 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:27:41.438 +03:00 [DBG] Start key discovery request
2018-04-22 00:37:59.130 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:37:59.267 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:37:59.280 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:37:59.284 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:37:59.288 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:37:59.293 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:38:13.548 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:38:13.554 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:38:13.565 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 00:38:13.574 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 00:38:13.577 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 00:38:13.596 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:38:13.606 +03:00 [DBG] Start end session request validation
2018-04-22 00:38:13.621 +03:00 [DBG] Start identity token validation
2018-04-22 00:38:13.725 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 00:38:14.472 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:38:14.515 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524345308,
    "exp": 1524345608,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.77122444243069111524345219948",
    "iat": 1524345308,
    "at_hash": "Vjlj5ncr2Ne08iMdZ_-xqQ",
    "sid": "0d2b79595a3ed5109e1e784d3b48cffd",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1524345308,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-22 00:38:14.557 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNDUzMDgsImV4cCI6MTUyNDM0NTYwOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjc3MTIyNDQ0MjQzMDY5MTExNTI0MzQ1MjE5OTQ4IiwiaWF0IjoxNTI0MzQ1MzA4LCJhdF9oYXNoIjoiVmpsajVuY3IyTmUwOGlNZFpfLXhxUSIsInNpZCI6IjBkMmI3OTU5NWEzZWQ1MTA5ZTFlNzg0ZDNiNDhjZmZkIiwic3ViIjoiOWQyYWRkOTctZjJmNy00NmQzLWFhODItNjA3OTk5ZGNjMTJhIiwiYXV0aF90aW1lIjoxNTI0MzQ1MzA4LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.Vk_PofdOWaSprFwU_vY_I_mbQwZiNW3oowtA3qxrCPnUznusQ1CjEwg3-L6uBZG5vhYbCgburAPAWA7N9cpxozB0z4NforY7zhz-4Zdx5BROk66976FEARuVXlARmsq4to-clNbjnvypd3_Gx7j-5hA7F8_CsYHvnfGx0w9lueeyOqVFICCMnF_q1Jaa0ZzynPcrez10QMA0RSi2nlwJK-_KsL4eOn26TYHXs6NX4uONO1Vv4ZsCSuUdow23UbkWy9m2yQU9Ikp_9qkKDXfOOC_vCzOknhUtYqm7nxi9drUe5KBBaBtC25SA92oWEEAtsgU0gnNfDtdoC2ASZ8djJg",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 00:38:14.562 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 00:38:14.607 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:38:14.615 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:38:14.817 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 00:38:14.822 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:38:14.825 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 00:38:14.892 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7Q0JKD4SM:00000003",
  "TimeStamp": "2018-04-21T21:38:14Z",
  "ProcessId": 11720,
  "LocalIpAddress": "127.0.0.1:18140",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:38:15.116 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:38:15.120 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:38:15.123 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:38:15.135 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:38:15.140 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:38:15.152 +03:00 [DBG] Start authorize request
2018-04-22 00:38:15.165 +03:00 [DBG] User in authorize request: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:38:15.181 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:38:15.279 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:38:15.322 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.083180594536347521524346695105",
  "SessionId": "0d2b79595a3ed5109e1e784d3b48cffd",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.083180594536347521524346695105",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:38:15.401 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 00:38:15.414 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 00:38:15.435 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 00:38:15.439 +03:00 [DBG] Getting claims for access token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:38:15.653 +03:00 [DBG] Getting claims for identity token for subject: 9d2add97-f2f7-46d3-aa82-607999dcc12a and client: dews.web
2018-04-22 00:38:15.714 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****ew5w"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****0Kbw"
    }
  ],
  "ActivityId": "0HLD7Q0JKD4SO:00000001",
  "TimeStamp": "2018-04-21T21:38:15Z",
  "ProcessId": 11720,
  "LocalIpAddress": "127.0.0.1:18140",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:38:15.724 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 00:38:19.444 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 00:38:19.452 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:38:19.456 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:38:19.465 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:38:19.474 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:38:19.477 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:38:19.490 +03:00 [DBG] Start key discovery request
2018-04-22 00:38:19.603 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:38:19.613 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:38:19.627 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:38:19.650 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:38:19.653 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:38:19.659 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:38:19.665 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 00:38:19.671 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 00:38:19.676 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 00:38:19.693 +03:00 [DBG] Start userinfo request
2018-04-22 00:38:19.702 +03:00 [DBG] Bearer token found in header
2018-04-22 00:38:19.743 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:38:19.748 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524346695,
    "exp": 1524350295,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
    "auth_time": 1524345308,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 00:38:19.774 +03:00 [DBG] Creating userinfo response
2018-04-22 00:38:19.784 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:38:19.795 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:38:19.808 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 00:38:19.816 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:38:19.842 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 00:38:19.846 +03:00 [DBG] End userinfo request
2018-04-22 00:38:22.612 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:38:22.616 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:38:22.621 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:38:22.634 +03:00 [DBG] Start discovery request
2018-04-22 00:38:23.217 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:38:23.221 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:38:23.224 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:38:23.227 +03:00 [DBG] Start key discovery request
2018-04-22 00:40:30.100 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:40:30.104 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:40:30.108 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 00:40:30.113 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 00:40:30.148 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 00:40:30.171 +03:00 [DBG] Processing signout request for 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:40:30.175 +03:00 [DBG] Start end session request validation
2018-04-22 00:40:30.197 +03:00 [DBG] Start identity token validation
2018-04-22 00:40:30.201 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 00:40:30.293 +03:00 [ERR] User marked as not active: 9d2add97-f2f7-46d3-aa82-607999dcc12a
2018-04-22 00:40:30.299 +03:00 [INF] End session request validation failure: Error validating id token hint
{
  "SubjectId": "unknown",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNDY2OTUsImV4cCI6MTUyNDM0Njk5NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjA4MzE4MDU5NDUzNjM0NzUyMTUyNDM0NjY5NTEwNSIsImlhdCI6MTUyNDM0NjY5NSwiYXRfaGFzaCI6Imc2clFkWFQ4R1ZXcFdYNFJwbEFybmciLCJzaWQiOiIwZDJiNzk1OTVhM2VkNTEwOWUxZTc4NGQzYjQ4Y2ZmZCIsInN1YiI6IjlkMmFkZDk3LWYyZjctNDZkMy1hYTgyLTYwNzk5OWRjYzEyYSIsImF1dGhfdGltZSI6MTUyNDM0NTMwOCwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.C9UXlRW8wCglFuPAemXcv4ABA4Tocno5_zECU1r_9lYj0LfSUnD23ifxtAjN9Q1vCVw4E1KLohCHlGvj6VKOKSolAP6C33pYfO62TF9rNwGqNW85R3fCk38KJ3ZmqmR6qrNq-IDOBCwtuPFIiwc5FWGHgPX5Qd1o8lc6zUWdK73wVA--JKM4Mwnk15BEbqJVgyRB3yHPDsQv9ZNPoh3d9ggP8lFVoojBZGm7WxBJQP4NY_C-R07_tF9xgXcGh6OZPr6f_Kp7hpTsHL4WX7mGMPn0EklThcS5abNJQ36lvaP_qqg01l9FvQOkZjzgncrV78aw2hCY4Dgx-s-421ew5w",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 00:40:30.302 +03:00 [ERR] Error processing end session request Invalid request
2018-04-22 00:40:30.318 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:40:30.321 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:40:30.337 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 00:40:30.341 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:40:30.347 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 00:40:30.350 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "9d2add97-f2f7-46d3-aa82-607999dcc12a",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7Q0JKD4SP:00000002",
  "TimeStamp": "2018-04-21T21:40:30Z",
  "ProcessId": 11720,
  "LocalIpAddress": "127.0.0.1:18140",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:40:30.408 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 00:40:30.417 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 00:40:30.425 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 00:40:30.442 +03:00 [DBG] Processing signout callback request
2018-04-22 00:40:30.470 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 00:40:30.473 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 00:40:30.477 +03:00 [INF] Successful signout callback.
2018-04-22 00:40:30.482 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 00:40:30.487 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 00:40:49.038 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:40:49.045 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:40:49.049 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:40:49.052 +03:00 [DBG] Start authorize request
2018-04-22 00:40:49.056 +03:00 [DBG] No user present in authorize request
2018-04-22 00:40:49.060 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:40:49.066 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:40:49.070 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.65938372037683781524346848999",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.65938372037683781524346848999",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:40:49.077 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 00:40:49.157 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:40:49.163 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:40:52.082 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-22 00:40:53.509 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 00:40:54.053 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 00:40:54.316 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD7Q0JKD4SP:00000008",
  "TimeStamp": "2018-04-21T21:40:54Z",
  "ProcessId": 11720,
  "LocalIpAddress": "127.0.0.1:18140",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:40:54.334 +03:00 [DBG] Augmenting SignInContext
2018-04-22 00:40:54.339 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 00:40:54.348 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 00:40:54.351 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:40:54.877 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:40:54.880 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:40:54.883 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 00:40:54.888 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 00:40:54.891 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 00:40:54.900 +03:00 [DBG] Start authorize callback request
2018-04-22 00:40:54.909 +03:00 [DBG] User in authorize request: 4db541fb-253a-4c07-8a9b-677c3c0c5722
2018-04-22 00:40:54.912 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:40:54.915 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:40:54.919 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.65938372037683781524346848999",
  "SessionId": "6e769402e57f072c94151eccff888b30",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.65938372037683781524346848999",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:40:54.934 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 00:40:54.941 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 00:40:54.945 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 00:40:54.949 +03:00 [DBG] Getting claims for access token for subject: 4db541fb-253a-4c07-8a9b-677c3c0c5722
2018-04-22 00:40:54.972 +03:00 [DBG] Getting claims for identity token for subject: 4db541fb-253a-4c07-8a9b-677c3c0c5722 and client: dews.web
2018-04-22 00:40:55.007 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****LXtQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****iCPA"
    }
  ],
  "ActivityId": "0HLD7Q0JKD4SP:00000009",
  "TimeStamp": "2018-04-21T21:40:55Z",
  "ProcessId": 11720,
  "LocalIpAddress": "127.0.0.1:18140",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:40:55.012 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 00:40:55.028 +03:00 [DBG] Augmenting SignInContext
2018-04-22 00:40:55.033 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 00:40:56.681 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 00:40:56.685 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:40:56.690 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:40:56.701 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:40:56.706 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:40:56.710 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:40:56.713 +03:00 [DBG] Start key discovery request
2018-04-22 00:40:56.806 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:40:56.812 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:40:56.837 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:40:56.890 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:40:56.893 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:40:56.896 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:40:56.900 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 00:40:56.904 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 00:40:56.907 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 00:40:56.910 +03:00 [DBG] Start userinfo request
2018-04-22 00:40:56.912 +03:00 [DBG] Bearer token found in header
2018-04-22 00:40:56.926 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:40:56.929 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524346854,
    "exp": 1524350454,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
    "auth_time": 1524346854,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 00:40:56.933 +03:00 [DBG] Creating userinfo response
2018-04-22 00:40:56.937 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:40:56.941 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:40:56.945 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 00:40:56.948 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:40:56.960 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 00:40:56.963 +03:00 [DBG] End userinfo request
2018-04-22 00:44:10.716 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:44:10.896 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:44:10.908 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:44:10.912 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:44:10.918 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:44:10.922 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:44:15.249 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:15.257 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:15.272 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 00:44:15.285 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 00:44:15.288 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 00:44:15.310 +03:00 [DBG] Processing signout request for 4db541fb-253a-4c07-8a9b-677c3c0c5722
2018-04-22 00:44:15.321 +03:00 [DBG] Start end session request validation
2018-04-22 00:44:15.335 +03:00 [DBG] Start identity token validation
2018-04-22 00:44:15.465 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 00:44:16.480 +03:00 [ERR] User marked as not active: 4db541fb-253a-4c07-8a9b-677c3c0c5722
2018-04-22 00:44:16.535 +03:00 [INF] End session request validation failure: Error validating id token hint
{
  "SubjectId": "unknown",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNDY4NTUsImV4cCI6MTUyNDM0NzE1NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjY1OTM4MzcyMDM3NjgzNzgxNTI0MzQ2ODQ4OTk5IiwiaWF0IjoxNTI0MzQ2ODU0LCJhdF9oYXNoIjoibmdsVm1zS1RXWHhyZ3UxVGlJaW1JQSIsInNpZCI6IjZlNzY5NDAyZTU3ZjA3MmM5NDE1MWVjY2ZmODg4YjMwIiwic3ViIjoiNGRiNTQxZmItMjUzYS00YzA3LThhOWItNjc3YzNjMGM1NzIyIiwiYXV0aF90aW1lIjoxNTI0MzQ2ODU0LCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.Zqtwa9AlPFGOFuWvtCjZIs50L6hTbbL0aUuIKj_BYh6BIEuJZTLkZgtRKY-9WqqMmuZvJ7y9LVopDNw1Xwn9wFNdf1nRJcRa2W0vCAlDuQs2X5gkxeuar3k6-t_PK1zsYf3F9GOCbFzPha2Heko11w-KcHYufJy8pUcUDG6Q2agSpGzYDWoEJFLXUkPhKVBwLTYOETFHvp519eyrLH_iliYMvSGYmeknnSvhyCXsb6IOb3SG1lqWiBK79WDCaOobLnT9JcWmL33hPBpUYHT2amy9NKIlxkYRdYPPw4rewfHykweO5QjQZf4G6_VfsGLJybcie-m0ClbpNkc57HLXtQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 00:44:16.539 +03:00 [ERR] Error processing end session request Invalid request
2018-04-22 00:44:16.597 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:16.603 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:16.701 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:16.711 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:16.715 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:44:16.729 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:44:16.732 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:44:16.765 +03:00 [DBG] Start authorize request
2018-04-22 00:44:16.786 +03:00 [DBG] User in authorize request: 4db541fb-253a-4c07-8a9b-677c3c0c5722
2018-04-22 00:44:16.799 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:44:16.905 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 00:44:16.914 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:44:16.918 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 00:44:16.930 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:44:16.973 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.174322472665913391524347056665",
  "SessionId": "6e769402e57f072c94151eccff888b30",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.174322472665913391524347056665",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:44:17.049 +03:00 [INF] Showing login: User is not active
2018-04-22 00:44:17.058 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "4db541fb-253a-4c07-8a9b-677c3c0c5722",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7Q42C9EJ0:00000002",
  "TimeStamp": "2018-04-21T21:44:16Z",
  "ProcessId": 34320,
  "LocalIpAddress": "127.0.0.1:8887",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:44:17.088 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:17.099 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:17.189 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:44:17.196 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:44:19.710 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:19.713 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:19.748 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-22 00:44:21.140 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 00:44:21.656 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:21.660 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:21.677 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 00:44:22.069 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD7Q42C9EIV:00000003",
  "TimeStamp": "2018-04-21T21:44:22Z",
  "ProcessId": 34320,
  "LocalIpAddress": "127.0.0.1:8887",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:44:22.084 +03:00 [DBG] Augmenting SignInContext
2018-04-22 00:44:22.089 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 00:44:22.097 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 00:44:22.100 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:44:22.626 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:22.629 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:44:22.633 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 00:44:22.638 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 00:44:22.641 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 00:44:22.653 +03:00 [DBG] Start authorize callback request
2018-04-22 00:44:22.663 +03:00 [DBG] User in authorize request: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:44:22.666 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:44:22.671 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:44:22.674 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.174322472665913391524347056665",
  "SessionId": "07f280acbee0678e0bc11235b953a7fe",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.174322472665913391524347056665",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:44:22.705 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 00:44:22.716 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 00:44:22.730 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 00:44:22.734 +03:00 [DBG] Getting claims for access token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:44:22.822 +03:00 [DBG] Getting claims for identity token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29 and client: dews.web
2018-04-22 00:44:22.858 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****N3yQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****hymQ"
    }
  ],
  "ActivityId": "0HLD7Q42C9EJ1:00000004",
  "TimeStamp": "2018-04-21T21:44:22Z",
  "ProcessId": 34320,
  "LocalIpAddress": "127.0.0.1:8887",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:44:22.869 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 00:44:22.889 +03:00 [DBG] Augmenting SignInContext
2018-04-22 00:44:22.892 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 00:44:25.045 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 00:44:25.061 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:44:25.073 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:44:25.083 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:44:25.091 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:44:25.094 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:44:25.103 +03:00 [DBG] Start key discovery request
2018-04-22 00:44:25.197 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:44:25.204 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:44:25.208 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:44:25.224 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:44:25.227 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:44:25.230 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:44:25.238 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 00:44:25.243 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 00:44:25.247 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 00:44:25.264 +03:00 [DBG] Start userinfo request
2018-04-22 00:44:25.272 +03:00 [DBG] Bearer token found in header
2018-04-22 00:44:25.304 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:44:25.314 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524347062,
    "exp": 1524350662,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524347062,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 00:44:25.329 +03:00 [DBG] Creating userinfo response
2018-04-22 00:44:25.337 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:44:25.343 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:44:25.351 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 00:44:25.354 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:44:25.365 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 00:44:25.370 +03:00 [DBG] End userinfo request
2018-04-22 00:44:30.173 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:44:30.182 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:44:30.187 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:44:30.204 +03:00 [DBG] Start discovery request
2018-04-22 00:44:30.698 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:44:30.701 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:44:30.704 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:44:30.707 +03:00 [DBG] Start key discovery request
2018-04-22 00:47:40.932 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:47:41.020 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:47:41.029 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:47:41.033 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:47:41.037 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:47:41.040 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:47:49.697 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:47:49.862 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:47:49.866 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:47:49.875 +03:00 [DBG] Start discovery request
2018-04-22 00:47:50.412 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:47:50.421 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:47:50.425 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:47:50.431 +03:00 [DBG] Start key discovery request
2018-04-22 00:49:24.644 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:49:24.706 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:49:24.710 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:49:24.711 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:49:24.711 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:49:24.711 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:49:25.064 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:49:25.083 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:49:25.089 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:49:25.096 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:49:25.097 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:49:25.101 +03:00 [DBG] Start authorize request
2018-04-22 00:49:25.113 +03:00 [DBG] User in authorize request: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:49:25.119 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:49:25.212 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.77316488734595891524347363576",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-22 00:49:25.216 +03:00 [ERR] Request validation failed
2018-04-22 00:49:25.217 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.77316488734595891524347363576",
    "state": "15243427644110.9352935417114707",
    "prompt": "none"
  }
}
2018-04-22 00:49:25.255 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7Q6VQPTMC:00000001",
  "TimeStamp": "2018-04-21T21:49:25Z",
  "ProcessId": 24188,
  "LocalIpAddress": "127.0.0.1:20295",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:49:25.293 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:49:25.294 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:00.524 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:57:00.581 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:57:00.586 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:57:00.586 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:57:00.586 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:57:00.586 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:57:36.642 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 00:57:36.751 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 00:57:36.764 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 00:57:36.771 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 00:57:36.775 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 00:57:36.780 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 00:57:58.258 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:58.266 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:58.278 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 00:57:58.287 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 00:57:58.291 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 00:57:58.305 +03:00 [DBG] Processing signout request for 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:57:58.316 +03:00 [DBG] Start end session request validation
2018-04-22 00:57:58.327 +03:00 [DBG] Start identity token validation
2018-04-22 00:57:58.415 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 00:57:59.150 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:57:59.193 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524347062,
    "exp": 1524347362,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.174322472665913391524347056665",
    "iat": 1524347062,
    "at_hash": "95DYr6tdOf7NkdrSlUiLSA",
    "sid": "07f280acbee0678e0bc11235b953a7fe",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524347062,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-22 00:57:59.242 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNDcwNjIsImV4cCI6MTUyNDM0NzM2MiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjE3NDMyMjQ3MjY2NTkxMzM5MTUyNDM0NzA1NjY2NSIsImlhdCI6MTUyNDM0NzA2MiwiYXRfaGFzaCI6Ijk1RFlyNnRkT2Y3TmtkclNsVWlMU0EiLCJzaWQiOiIwN2YyODBhY2JlZTA2NzhlMGJjMTEyMzViOTUzYTdmZSIsInN1YiI6IjI4NGY0NmIxLWM5Y2EtNDBmMi04N2RjLWE1ZTJmNTY1ZmIyOSIsImF1dGhfdGltZSI6MTUyNDM0NzA2MiwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.T7tD4KMD3D2zbKZkEFcm9RJ08mv_nEX7b3j_Ki3FRHDE2_Go6OVaPLDt3U2uKmsOOeJyJsvZiDV4FNUQ5LtTtYofOl5zHTIZyS9sRNty8nKtFydITHd9tfAmMjH7vRx3jg5aekzAogaNgCgFasr3D-udxPGKwM5yAKCD53Ht1RMSwt22B6k9MQ2Q1J43HHi5vHniVetyI9wVkGK9trz4zwAFFNjRmc1fxQwT1yJhCr4HQZGRYvAN6ikFcsjloQG1fgpJCpaNcBJqOBqAHY-HPnFC1SjaqpzIh0385I374it7W3G8hnMvSzVAv8WcRZmLauHYWLAHFYrlDXUAFCN3yQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 00:57:59.246 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 00:57:59.304 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:59.313 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:59.455 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 00:57:59.460 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:57:59.463 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 00:57:59.518 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7QBINEQMI:00000003",
  "TimeStamp": "2018-04-21T21:57:59Z",
  "ProcessId": 39192,
  "LocalIpAddress": "127.0.0.1:30934",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:57:59.618 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:59.621 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:57:59.627 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:57:59.634 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:57:59.637 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:57:59.648 +03:00 [DBG] Start authorize request
2018-04-22 00:57:59.662 +03:00 [DBG] User in authorize request: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:57:59.695 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:57:59.828 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:57:59.864 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.430775422716140441524347879595",
  "SessionId": "07f280acbee0678e0bc11235b953a7fe",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.430775422716140441524347879595",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:57:59.927 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 00:57:59.944 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 00:57:59.971 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 00:57:59.977 +03:00 [DBG] Getting claims for access token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:58:00.205 +03:00 [DBG] Getting claims for identity token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29 and client: dews.web
2018-04-22 00:58:00.251 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****aRPA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****sQTw"
    }
  ],
  "ActivityId": "0HLD7QBINEQMK:00000001",
  "TimeStamp": "2018-04-21T21:58:00Z",
  "ProcessId": 39192,
  "LocalIpAddress": "127.0.0.1:30934",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:58:00.267 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 00:58:02.867 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 00:58:02.875 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:58:02.878 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:58:02.888 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:58:02.895 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:58:02.898 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:58:02.908 +03:00 [DBG] Start key discovery request
2018-04-22 00:58:02.998 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:58:03.008 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:58:03.013 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:58:03.037 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 00:58:03.040 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 00:58:03.043 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 00:58:03.049 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 00:58:03.054 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 00:58:03.057 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 00:58:03.067 +03:00 [DBG] Start userinfo request
2018-04-22 00:58:03.076 +03:00 [DBG] Bearer token found in header
2018-04-22 00:58:03.106 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:58:03.110 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524347880,
    "exp": 1524351480,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524347062,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 00:58:03.125 +03:00 [DBG] Creating userinfo response
2018-04-22 00:58:03.133 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:58:03.140 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:58:03.146 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 00:58:03.149 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 00:58:03.161 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 00:58:03.164 +03:00 [DBG] End userinfo request
2018-04-22 00:58:07.754 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 00:58:07.762 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 00:58:07.770 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 00:58:07.783 +03:00 [DBG] Start discovery request
2018-04-22 00:58:08.291 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 00:58:08.295 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 00:58:08.300 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 00:58:08.304 +03:00 [DBG] Start key discovery request
2018-04-22 00:58:17.124 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:58:17.128 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:58:17.132 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 00:58:17.137 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 00:58:17.146 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 00:58:17.155 +03:00 [DBG] Processing signout request for 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 00:58:17.159 +03:00 [DBG] Start end session request validation
2018-04-22 00:58:17.166 +03:00 [DBG] Start identity token validation
2018-04-22 00:58:17.176 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 00:58:17.214 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 00:58:17.217 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524347880,
    "exp": 1524348180,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.430775422716140441524347879595",
    "iat": 1524347880,
    "at_hash": "UIOhR0LQGzJOsGQRS2IrWA",
    "sid": "07f280acbee0678e0bc11235b953a7fe",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524347062,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-22 00:58:17.223 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNDc4ODAsImV4cCI6MTUyNDM0ODE4MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQzMDc3NTQyMjcxNjE0MDQ0MTUyNDM0Nzg3OTU5NSIsImlhdCI6MTUyNDM0Nzg4MCwiYXRfaGFzaCI6IlVJT2hSMExRR3pKT3NHUVJTMklyV0EiLCJzaWQiOiIwN2YyODBhY2JlZTA2NzhlMGJjMTEyMzViOTUzYTdmZSIsInN1YiI6IjI4NGY0NmIxLWM5Y2EtNDBmMi04N2RjLWE1ZTJmNTY1ZmIyOSIsImF1dGhfdGltZSI6MTUyNDM0NzA2MiwiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.azV1tFCxoTuSC2JdJKP9P7GrfNIX6qTYpXoeHOp5ssdr9VcU_Fwq1X4ZLZLjsL2BjR3GaDLvs3mFTawFcZ1ZdFiKpVQihOI_0zEScxjQlrxRjItr3-hZrCgAM4xrhyjaKgxtvE2ErgQcrfgoz6E7meC73kJQtH6dqa3mWrbcaRHajSsh-ELwGyn4PrqwKlbiumZdOSPH6oC7QjuKQZZQmvU6tDEumJ7XjJcbCLC-TABSiqs5TJrlUYB5De1kZzexsM9n3dCHLAbPTz7z-geJw3SDCR5ny9aw5StBZprgLF0J0k7IcYdzDRfKTNPeRI4bKGFrwD0jJk3YVC0AKKaRPA",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 00:58:17.227 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 00:58:17.253 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:58:17.258 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 00:58:17.270 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 00:58:17.278 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 00:58:17.282 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 00:58:17.287 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7QBINEQMK:00000008",
  "TimeStamp": "2018-04-21T21:58:17Z",
  "ProcessId": 39192,
  "LocalIpAddress": "127.0.0.1:30934",
  "RemoteIpAddress": "::1"
}
2018-04-22 00:58:17.363 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 00:58:17.380 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 00:58:17.385 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 00:58:17.406 +03:00 [DBG] Processing signout callback request
2018-04-22 00:58:17.427 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 00:58:17.430 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 00:58:17.433 +03:00 [INF] Successful signout callback.
2018-04-22 00:58:17.436 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 00:58:17.441 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 00:58:20.230 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 00:58:20.234 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 00:58:20.240 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 00:58:20.244 +03:00 [DBG] Start authorize request
2018-04-22 00:58:20.248 +03:00 [DBG] No user present in authorize request
2018-04-22 00:58:20.257 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:58:20.264 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:58:20.270 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.28561246285505141524347900219",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.28561246285505141524347900219",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 00:58:20.277 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 00:58:20.372 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 00:58:20.380 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 00:58:23.240 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-22 01:00:05.779 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 01:00:05.812 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 01:00:06.131 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLD7QBINEQML:00000002",
  "TimeStamp": "2018-04-21T22:00:06Z",
  "ProcessId": 39192,
  "LocalIpAddress": "127.0.0.1:30934",
  "RemoteIpAddress": "::1"
}
2018-04-22 01:00:06.148 +03:00 [DBG] Augmenting SignInContext
2018-04-22 01:00:06.153 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 01:00:06.160 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 01:00:06.163 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 01:00:06.192 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:00:06.195 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:00:06.198 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 01:00:06.204 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 01:00:06.206 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 01:00:06.220 +03:00 [DBG] Start authorize callback request
2018-04-22 01:00:06.229 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:00:06.233 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 01:00:06.236 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 01:00:06.240 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243427644110.9352935417114707",
  "Nonce": "N0.28561246285505141524347900219",
  "SessionId": "1b3a62341f4ebc6e71bd9d629674ccf6",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.28561246285505141524347900219",
    "state": "15243427644110.9352935417114707"
  }
}
2018-04-22 01:00:06.255 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 01:00:06.259 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 01:00:06.263 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 01:00:06.266 +03:00 [DBG] Getting claims for access token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:00:06.292 +03:00 [DBG] Getting claims for identity token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f and client: dews.web
2018-04-22 01:00:06.310 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_Lzg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****LGbg"
    }
  ],
  "ActivityId": "0HLD7QBINEQML:00000003",
  "TimeStamp": "2018-04-21T22:00:06Z",
  "ProcessId": 39192,
  "LocalIpAddress": "127.0.0.1:30934",
  "RemoteIpAddress": "::1"
}
2018-04-22 01:00:06.313 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243427644110.9352935417114707",
  "Scope": "openid profile dews.api"
}
2018-04-22 01:00:06.328 +03:00 [DBG] Augmenting SignInContext
2018-04-22 01:00:06.333 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 01:00:08.568 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 01:00:08.572 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:00:08.575 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:00:08.583 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 01:00:08.587 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 01:00:08.590 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 01:00:08.594 +03:00 [DBG] Start key discovery request
2018-04-22 01:00:08.682 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 01:00:08.685 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:00:08.689 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:00:08.724 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 01:00:08.727 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:00:08.733 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:00:08.744 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 01:00:08.749 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 01:00:08.752 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 01:00:08.755 +03:00 [DBG] Start userinfo request
2018-04-22 01:00:08.758 +03:00 [DBG] Bearer token found in header
2018-04-22 01:00:08.784 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 01:00:08.788 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524348006,
    "exp": 1524351606,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524348006,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 01:00:08.792 +03:00 [DBG] Creating userinfo response
2018-04-22 01:00:08.795 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:00:08.800 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:00:08.804 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 01:00:08.807 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:00:08.827 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 01:00:08.831 +03:00 [DBG] End userinfo request
2018-04-22 01:33:57.412 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:33:57.415 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:33:57.418 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 01:33:57.421 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 01:33:57.425 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 01:33:57.428 +03:00 [DBG] Start authorize request
2018-04-22 01:33:57.430 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:33:57.433 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 01:33:57.436 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 01:33:57.439 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.85699975438642941524350037322",
  "SessionId": "1b3a62341f4ebc6e71bd9d629674ccf6",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.85699975438642941524350037322",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 01:33:57.444 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 01:33:57.447 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 01:33:57.450 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 01:33:57.452 +03:00 [DBG] Getting claims for access token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:33:57.470 +03:00 [DBG] Getting claims for identity token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f and client: dews.web
2018-04-22 01:33:57.496 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****YRlQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****2k0A"
    }
  ],
  "ActivityId": "0HLD7QBINEQMM:00000001",
  "TimeStamp": "2018-04-21T22:33:57Z",
  "ProcessId": 39192,
  "LocalIpAddress": "127.0.0.1:30934",
  "RemoteIpAddress": "::1"
}
2018-04-22 01:33:57.499 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243500373220.2489136255125155",
  "Scope": "openid profile dews.api"
}
2018-04-22 01:33:59.649 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 01:33:59.653 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:33:59.656 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:33:59.662 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 01:33:59.665 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 01:33:59.668 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 01:33:59.671 +03:00 [DBG] Start key discovery request
2018-04-22 01:33:59.783 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 01:33:59.789 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:33:59.794 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:33:59.821 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 01:33:59.825 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:33:59.829 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:33:59.835 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 01:33:59.842 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 01:33:59.845 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 01:33:59.848 +03:00 [DBG] Start userinfo request
2018-04-22 01:33:59.851 +03:00 [DBG] Bearer token found in header
2018-04-22 01:33:59.867 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 01:33:59.873 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524350037,
    "exp": 1524353637,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524348006,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 01:33:59.876 +03:00 [DBG] Creating userinfo response
2018-04-22 01:33:59.880 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:33:59.884 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:33:59.889 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 01:33:59.892 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:33:59.906 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 01:33:59.909 +03:00 [DBG] End userinfo request
2018-04-22 01:39:00.881 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 01:39:00.950 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 01:39:00.955 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 01:39:00.955 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 01:39:00.955 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 01:39:00.955 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 01:39:01.425 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:39:01.451 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:39:01.460 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 01:39:01.472 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 01:39:01.472 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 01:39:01.479 +03:00 [DBG] Start authorize request
2018-04-22 01:39:01.492 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:39:01.499 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 01:39:01.588 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.66445882626159341524350339580",
    "state": "15243500373220.2489136255125155",
    "prompt": "none"
  }
}
2018-04-22 01:39:01.592 +03:00 [ERR] Request validation failed
2018-04-22 01:39:01.592 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.66445882626159341524350339580",
    "state": "15243500373220.2489136255125155",
    "prompt": "none"
  }
}
2018-04-22 01:39:01.638 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7R2MQJOJU:00000001",
  "TimeStamp": "2018-04-21T22:39:01Z",
  "ProcessId": 29300,
  "LocalIpAddress": "127.0.0.1:6563",
  "RemoteIpAddress": "::1"
}
2018-04-22 01:39:01.685 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:39:01.685 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:53:36.774 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 01:53:36.878 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 01:53:36.884 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 01:53:36.887 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 01:53:36.891 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 01:53:36.895 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 01:55:27.000 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:55:27.022 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 01:55:27.031 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 01:55:27.043 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 01:55:27.045 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 01:55:27.054 +03:00 [DBG] Start authorize request
2018-04-22 01:55:27.072 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:55:27.081 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 01:55:27.165 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 01:55:27.288 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.8474291359317551524351326814",
  "SessionId": "1b3a62341f4ebc6e71bd9d629674ccf6",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.8474291359317551524351326814",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 01:55:27.907 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 01:55:27.917 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 01:55:27.931 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 01:55:27.935 +03:00 [DBG] Getting claims for access token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 01:55:28.209 +03:00 [DBG] Getting claims for identity token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f and client: dews.web
2018-04-22 01:55:28.321 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****-3YQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5K-w"
    }
  ],
  "ActivityId": "0HLD7RART6KUT:00000001",
  "TimeStamp": "2018-04-21T22:55:28Z",
  "ProcessId": 16548,
  "LocalIpAddress": "127.0.0.1:20896",
  "RemoteIpAddress": "::1"
}
2018-04-22 01:55:28.333 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243500373220.2489136255125155",
  "Scope": "openid profile dews.api"
}
2018-04-22 01:55:30.591 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 01:55:30.598 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:55:30.602 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:55:30.611 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 01:55:30.619 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 01:55:30.622 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 01:55:30.630 +03:00 [DBG] Start key discovery request
2018-04-22 01:55:30.720 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 01:55:30.724 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:55:30.729 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:55:30.787 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 01:55:30.796 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 01:55:30.801 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 01:55:30.806 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 01:55:30.813 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 01:55:30.816 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 01:55:30.826 +03:00 [DBG] Start userinfo request
2018-04-22 01:55:30.833 +03:00 [DBG] Bearer token found in header
2018-04-22 01:55:31.002 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 01:55:31.017 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524351328,
    "exp": 1524354928,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524348006,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 01:55:31.030 +03:00 [DBG] Creating userinfo response
2018-04-22 01:55:31.039 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:55:31.045 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:55:31.054 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 01:55:31.058 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 01:55:31.072 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 01:55:31.075 +03:00 [DBG] End userinfo request
2018-04-22 01:55:34.676 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 01:55:34.681 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 01:55:34.686 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 01:55:34.692 +03:00 [DBG] Start discovery request
2018-04-22 01:55:34.955 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 01:55:34.963 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 01:55:34.970 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 01:55:34.973 +03:00 [DBG] Start key discovery request
2018-04-22 02:00:30.559 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 02:00:30.639 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 02:00:30.646 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 02:00:30.647 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 02:00:30.647 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 02:00:30.647 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 02:00:31.330 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:00:31.360 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:00:31.369 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:00:31.384 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:00:31.384 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:00:31.393 +03:00 [DBG] Start authorize request
2018-04-22 02:00:31.414 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:00:31.424 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:00:31.568 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.92586644573040111524351629207",
    "state": "15243500373220.2489136255125155",
    "prompt": "none"
  }
}
2018-04-22 02:00:31.574 +03:00 [ERR] Request validation failed
2018-04-22 02:00:31.575 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.92586644573040111524351629207",
    "state": "15243500373220.2489136255125155",
    "prompt": "none"
  }
}
2018-04-22 02:00:31.636 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7REN7SEVJ:00000001",
  "TimeStamp": "2018-04-21T23:00:31Z",
  "ProcessId": 11800,
  "LocalIpAddress": "127.0.0.1:23684",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:00:31.694 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:00:31.695 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:01:51.656 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 02:01:51.923 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 02:01:51.958 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 02:01:51.985 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 02:01:52.114 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 02:01:52.141 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 02:02:09.838 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:09.845 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:09.853 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:02:09.863 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:02:09.866 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:02:09.873 +03:00 [DBG] Start authorize request
2018-04-22 02:02:09.886 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:02:09.894 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:02:09.955 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:02:10.073 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.485108791401144271524351729672",
  "SessionId": "1b3a62341f4ebc6e71bd9d629674ccf6",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.485108791401144271524351729672",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:02:10.734 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 02:02:10.748 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 02:02:10.768 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 02:02:10.771 +03:00 [DBG] Getting claims for access token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:02:11.122 +03:00 [DBG] Getting claims for identity token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f and client: dews.web
2018-04-22 02:02:11.213 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****h6uQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****FRsg"
    }
  ],
  "ActivityId": "0HLD7RFFIEBIQ:00000002",
  "TimeStamp": "2018-04-21T23:02:11Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:02:11.224 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243500373220.2489136255125155",
  "Scope": "openid profile dews.api"
}
2018-04-22 02:02:12.857 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 02:02:12.866 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:02:12.869 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:02:12.884 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:02:12.893 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:02:12.896 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:02:12.904 +03:00 [DBG] Start key discovery request
2018-04-22 02:02:13.012 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:02:13.028 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:02:13.038 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:02:13.070 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:02:13.077 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:02:13.081 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:02:13.085 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 02:02:13.098 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 02:02:13.101 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 02:02:13.114 +03:00 [DBG] Start userinfo request
2018-04-22 02:02:13.120 +03:00 [DBG] Bearer token found in header
2018-04-22 02:02:13.221 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:02:13.232 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524351731,
    "exp": 1524355331,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524348006,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 02:02:13.246 +03:00 [DBG] Creating userinfo response
2018-04-22 02:02:13.253 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:02:13.260 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:02:13.266 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 02:02:13.269 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:02:13.281 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 02:02:13.284 +03:00 [DBG] End userinfo request
2018-04-22 02:02:16.665 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 02:02:16.669 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 02:02:16.674 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 02:02:16.680 +03:00 [DBG] Start discovery request
2018-04-22 02:02:17.158 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:02:17.161 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:02:17.164 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:02:17.167 +03:00 [DBG] Start key discovery request
2018-04-22 02:02:37.238 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:37.243 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:37.247 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 02:02:37.253 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 02:02:37.256 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 02:02:37.280 +03:00 [DBG] Processing signout request for 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:02:37.304 +03:00 [DBG] Start end session request validation
2018-04-22 02:02:37.315 +03:00 [DBG] Start identity token validation
2018-04-22 02:02:37.323 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 02:02:37.338 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:02:37.341 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524351731,
    "exp": 1524352031,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.485108791401144271524351729672",
    "iat": 1524351731,
    "at_hash": "llnE1NsFPyFP884ntAoZIA",
    "sid": "1b3a62341f4ebc6e71bd9d629674ccf6",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524348006,
    "idp": "Twitter",
    "name": "Murat_Akkass",
    "preferred_username": "Murat_Akkass",
    "amr": "external"
  }
}
2018-04-22 02:02:37.355 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNTE3MzEsImV4cCI6MTUyNDM1MjAzMSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQ4NTEwODc5MTQwMTE0NDI3MTUyNDM1MTcyOTY3MiIsImlhdCI6MTUyNDM1MTczMSwiYXRfaGFzaCI6ImxsbkUxTnNGUHlGUDg4NG50QW9aSUEiLCJzaWQiOiIxYjNhNjIzNDFmNGViYzZlNzFiZDlkNjI5Njc0Y2NmNiIsInN1YiI6IjU5ODA1ZGVmLWUxNmQtNGY0ZS05YjU4LWMwMWMyOWEyYmQwZiIsImF1dGhfdGltZSI6MTUyNDM0ODAwNiwiaWRwIjoiVHdpdHRlciIsIm5hbWUiOiJNdXJhdF9Ba2thc3MiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJNdXJhdF9Ba2thc3MiLCJhbXIiOlsiZXh0ZXJuYWwiXX0.Zqg_IR-9GYbPECcT4sCjoACI6UnEKtg6gYLtA1OwKXBvMPRGOWWhzYTDk3jV-3cir7hKaM0DuLuQHYCRZbVZ38PTKnoyYwaaVPWSj4p1WCdKbLWecnbj3y7hJKG5-N_-LdW6e8DAN2sZWh53uMOTURvdWhYkCeBvof-JVTdHrI2bV4OhiD3m2r9ek5et3RpmnpIOzleVAv6r5djha46iBJcU6JxUMsAgDJfEKTgF50v_AdD9HB3YyS9HETQALWPgldpKTLt9cqDhllKh8_GFDRZ2xEOa0VrUY8AnNCLo2PJZ1BqraAXCY5XrellAZkqIUhsT1cFxWthjraSrOAh6uQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 02:02:37.359 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 02:02:37.392 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:37.395 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:37.576 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 02:02:37.581 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:02:37.587 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 02:02:37.606 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "DisplayName": "Murat_Akkass",
  "ActivityId": "0HLD7RFFIEBIQ:00000009",
  "TimeStamp": "2018-04-21T23:02:37Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:02:37.945 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 02:02:37.955 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 02:02:37.959 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 02:02:37.972 +03:00 [DBG] Processing signout callback request
2018-04-22 02:02:37.993 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 02:02:37.997 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 02:02:38.003 +03:00 [INF] Successful signout callback.
2018-04-22 02:02:38.006 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 02:02:38.009 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 02:02:50.430 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:02:50.434 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:02:50.441 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:02:50.445 +03:00 [DBG] Start authorize request
2018-04-22 02:02:50.450 +03:00 [DBG] No user present in authorize request
2018-04-22 02:02:50.455 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:02:50.460 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:02:50.468 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.67934967876615861524351770407",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.67934967876615861524351770407",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:02:50.486 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 02:02:50.585 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:02:50.590 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:02:53.671 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-22 02:02:54.642 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 02:02:54.676 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 02:02:54.774 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLD7RFFIEBIQ:0000000F",
  "TimeStamp": "2018-04-21T23:02:54Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:02:54.793 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:02:54.806 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 02:02:54.813 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:02:54.819 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:02:54.849 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:54.855 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:02:54.859 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 02:02:54.865 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 02:02:54.870 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 02:02:54.881 +03:00 [DBG] Start authorize callback request
2018-04-22 02:02:54.891 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:02:54.894 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:02:54.898 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:02:54.902 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.67934967876615861524351770407",
  "SessionId": "c4d7f99d3317ce511c0228ac3517587a",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.67934967876615861524351770407",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:02:54.920 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 02:02:54.926 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 02:02:54.930 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 02:02:54.936 +03:00 [DBG] Getting claims for access token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:02:54.971 +03:00 [DBG] Getting claims for identity token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f and client: dews.web
2018-04-22 02:02:55.010 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****rz0g"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****5pZA"
    }
  ],
  "ActivityId": "0HLD7RFFIEBIQ:00000010",
  "TimeStamp": "2018-04-21T23:02:55Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:02:55.019 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243500373220.2489136255125155",
  "Scope": "openid profile dews.api"
}
2018-04-22 02:02:55.035 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:02:55.040 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:02:56.294 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 02:02:56.299 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:02:56.302 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:02:56.308 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:02:56.312 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:02:56.316 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:02:56.320 +03:00 [DBG] Start key discovery request
2018-04-22 02:02:56.370 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:02:56.379 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:02:56.391 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:02:56.445 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:02:56.448 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:02:56.452 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:02:56.457 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 02:02:56.461 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 02:02:56.466 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 02:02:56.470 +03:00 [DBG] Start userinfo request
2018-04-22 02:02:56.473 +03:00 [DBG] Bearer token found in header
2018-04-22 02:02:56.488 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:02:56.491 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524351774,
    "exp": 1524355374,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524351774,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 02:02:56.496 +03:00 [DBG] Creating userinfo response
2018-04-22 02:02:56.500 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:02:56.504 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:02:56.507 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 02:02:56.510 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:02:56.523 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 02:02:56.526 +03:00 [DBG] End userinfo request
2018-04-22 02:03:17.057 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:03:17.063 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:03:17.067 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 02:03:17.070 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 02:03:17.074 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 02:03:17.080 +03:00 [DBG] Processing signout request for 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:03:17.085 +03:00 [DBG] Start end session request validation
2018-04-22 02:03:17.090 +03:00 [DBG] Start identity token validation
2018-04-22 02:03:17.093 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 02:03:17.114 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:03:17.118 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524351775,
    "exp": 1524352075,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.67934967876615861524351770407",
    "iat": 1524351774,
    "at_hash": "n2Zp4aFOyX93MAaIkpaH1w",
    "sid": "c4d7f99d3317ce511c0228ac3517587a",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524351774,
    "idp": "Twitter",
    "name": "Murat_Akkass",
    "preferred_username": "Murat_Akkass",
    "amr": "external"
  }
}
2018-04-22 02:03:17.122 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNTE3NzUsImV4cCI6MTUyNDM1MjA3NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjY3OTM0OTY3ODc2NjE1ODYxNTI0MzUxNzcwNDA3IiwiaWF0IjoxNTI0MzUxNzc0LCJhdF9oYXNoIjoibjJacDRhRk95WDkzTUFhSWtwYUgxdyIsInNpZCI6ImM0ZDdmOTlkMzMxN2NlNTExYzAyMjhhYzM1MTc1ODdhIiwic3ViIjoiNTk4MDVkZWYtZTE2ZC00ZjRlLTliNTgtYzAxYzI5YTJiZDBmIiwiYXV0aF90aW1lIjoxNTI0MzUxNzc0LCJpZHAiOiJUd2l0dGVyIiwibmFtZSI6Ik11cmF0X0Fra2FzcyIsInByZWZlcnJlZF91c2VybmFtZSI6Ik11cmF0X0Fra2FzcyIsImFtciI6WyJleHRlcm5hbCJdfQ.VkCF3h5HGB7YuD5o8ZedhGvCBJIIKDin1IAJQTr1HQLRfpeA9w2rCbp4SvB4OWb3DEgcHUWgwqqO-zx8MmPj51LQRjrXqBJVnRfBq551GbkiSruPw_mVfO4w_8tcFONdsX_s6oQ-sByL8qtmX_YqxOVeQjuWGbxhYt0F07yUnYo1LWzxZy2EsQ1r83EWtM33GMcGJzozuijNmgQBwYBrmOoWPbQZP9Yqs5C6VIdI6oP9oqa-OXKbcaH6tsFgd6Baxu-ACmGZFo-OcFIHhA1B5Lm3DMbb1Q0_jlfqI60twFfaQxgHr726OJsbYXVMdFRzBfujyRREtLmsNHcTFgrz0g",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 02:03:17.126 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 02:03:17.184 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:03:17.187 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:03:17.199 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 02:03:17.204 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:03:17.207 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 02:03:17.213 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "DisplayName": "Murat_Akkass",
  "ActivityId": "0HLD7RFFIEBIQ:00000015",
  "TimeStamp": "2018-04-21T23:03:17Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:03:17.281 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 02:03:17.285 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 02:03:17.296 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 02:03:17.306 +03:00 [DBG] Processing signout callback request
2018-04-22 02:03:17.330 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 02:03:17.336 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 02:03:17.342 +03:00 [INF] Successful signout callback.
2018-04-22 02:03:17.350 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 02:03:17.355 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 02:03:27.528 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:03:27.532 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:03:27.536 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:03:27.540 +03:00 [DBG] Start authorize request
2018-04-22 02:03:27.543 +03:00 [DBG] No user present in authorize request
2018-04-22 02:03:27.546 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:03:27.549 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:03:27.553 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.20786015875660181524351807479",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.20786015875660181524351807479",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:03:27.556 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 02:03:27.579 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:03:27.583 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:03:28.727 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-22 02:03:29.619 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 02:03:30.133 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 02:03:30.166 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD7RFFIEBIQ:0000001B",
  "TimeStamp": "2018-04-21T23:03:30Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:03:30.178 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:03:30.182 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 02:03:30.185 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:03:30.188 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:03:30.208 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:03:30.211 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:03:30.214 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 02:03:30.218 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 02:03:30.221 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 02:03:30.224 +03:00 [DBG] Start authorize callback request
2018-04-22 02:03:30.228 +03:00 [DBG] User in authorize request: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 02:03:30.231 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:03:30.237 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:03:30.240 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.20786015875660181524351807479",
  "SessionId": "116a01cb1aaa8644e2d84575a310d88e",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.20786015875660181524351807479",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:03:30.254 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 02:03:30.257 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 02:03:30.260 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 02:03:30.263 +03:00 [DBG] Getting claims for access token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 02:03:30.282 +03:00 [DBG] Getting claims for identity token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29 and client: dews.web
2018-04-22 02:03:30.300 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****vrgQ"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****Sm9Q"
    }
  ],
  "ActivityId": "0HLD7RFFIEBIQ:0000001C",
  "TimeStamp": "2018-04-21T23:03:30Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:03:30.304 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243500373220.2489136255125155",
  "Scope": "openid profile dews.api"
}
2018-04-22 02:03:30.325 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:03:30.334 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:03:32.316 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 02:03:32.319 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:03:32.323 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:03:32.330 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:03:32.334 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:03:32.337 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:03:32.342 +03:00 [DBG] Start key discovery request
2018-04-22 02:03:32.447 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:03:32.466 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:03:32.482 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:03:32.499 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:03:32.502 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:03:32.505 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:03:32.510 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 02:03:32.515 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 02:03:32.518 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 02:03:32.521 +03:00 [DBG] Start userinfo request
2018-04-22 02:03:32.523 +03:00 [DBG] Bearer token found in header
2018-04-22 02:03:32.538 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:03:32.541 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524351810,
    "exp": 1524355410,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524351810,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 02:03:32.545 +03:00 [DBG] Creating userinfo response
2018-04-22 02:03:32.550 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:03:32.553 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:03:32.560 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 02:03:32.565 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:03:32.577 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 02:03:32.581 +03:00 [DBG] End userinfo request
2018-04-22 02:04:00.216 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:04:00.219 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:04:00.225 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 02:04:00.228 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 02:04:00.231 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 02:04:00.233 +03:00 [DBG] Processing signout request for 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 02:04:00.238 +03:00 [DBG] Start end session request validation
2018-04-22 02:04:00.242 +03:00 [DBG] Start identity token validation
2018-04-22 02:04:00.246 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 02:04:00.260 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:04:00.263 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524351810,
    "exp": 1524352110,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.20786015875660181524351807479",
    "iat": 1524351810,
    "at_hash": "zQyzDVQz3uV2woUfeAJbnQ",
    "sid": "116a01cb1aaa8644e2d84575a310d88e",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524351810,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-04-22 02:04:00.267 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNTE4MTAsImV4cCI6MTUyNDM1MjExMCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjIwNzg2MDE1ODc1NjYwMTgxNTI0MzUxODA3NDc5IiwiaWF0IjoxNTI0MzUxODEwLCJhdF9oYXNoIjoielF5ekRWUXozdVYyd29VZmVBSmJuUSIsInNpZCI6IjExNmEwMWNiMWFhYTg2NDRlMmQ4NDU3NWEzMTBkODhlIiwic3ViIjoiMjg0ZjQ2YjEtYzljYS00MGYyLTg3ZGMtYTVlMmY1NjVmYjI5IiwiYXV0aF90aW1lIjoxNTI0MzUxODEwLCJpZHAiOiJHb29nbGUiLCJuYW1lIjoiTVVSQVQgQUtLQcWeIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTVVSQVQgQUtLQcWeIiwiYW1yIjpbImV4dGVybmFsIl19.IBoSYArzfa67Qyh7OmaApLf_cTlwovZ7g0BCANwvZ_OipTWb5H-3mP8IuaLwsqtHt2ZG8q-ZlVEiB6rEHSHjZehBXMiQO57GHhQOkVE-RVGa-tyARHSg9KwRHhZoIboSIBNxKEdhnOpldV1lrhY4DEUexl-NVO0VRoVTSk40-SrritdQ0o0UhHSIYVbOl-VwCw0pSLJljzSCoNxMrXa0j3RmxG_SChZIUpYNYzVR06Y0LQjgzqnDdzwu-cLT4qm-hKcpBRQhZ0Paig9irISX4WGKKJ_aAP-S_AYmkms2hPUANV-iu7rYZ4LLYEy7Jik8FjkFp3QcJhFUwgfQBxvrgQ",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 02:04:00.272 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 02:04:00.293 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:04:00.298 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:04:00.308 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 02:04:00.311 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:04:00.314 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 02:04:00.318 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLD7RFFIEBIQ:00000021",
  "TimeStamp": "2018-04-21T23:04:00Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:04:00.395 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 02:04:00.399 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 02:04:00.407 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 02:04:00.411 +03:00 [DBG] Processing signout callback request
2018-04-22 02:04:00.416 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 02:04:00.423 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 02:04:00.431 +03:00 [INF] Successful signout callback.
2018-04-22 02:04:00.440 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 02:04:00.445 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 02:04:06.624 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:04:06.627 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:04:06.631 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:04:06.636 +03:00 [DBG] Start authorize request
2018-04-22 02:04:06.639 +03:00 [DBG] No user present in authorize request
2018-04-22 02:04:06.642 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:04:06.645 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:04:06.650 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.57871810802825771524351846567",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.57871810802825771524351846567",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:04:06.653 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 02:04:06.672 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:04:06.676 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:04:08.011 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-04-22 02:04:08.657 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 02:04:08.680 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 02:04:08.703 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLD7RFFIEBIQ:00000027",
  "TimeStamp": "2018-04-21T23:04:08Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:04:08.706 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:04:08.708 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 02:04:08.713 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:04:08.716 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:04:08.741 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:04:08.743 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:04:08.748 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 02:04:08.751 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 02:04:08.754 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 02:04:08.757 +03:00 [DBG] Start authorize callback request
2018-04-22 02:04:08.760 +03:00 [DBG] User in authorize request: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:04:08.766 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:04:08.769 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:04:08.772 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.57871810802825771524351846567",
  "SessionId": "6716fb10f883a9e0a228cc472e77decf",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.57871810802825771524351846567",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:04:08.797 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 02:04:08.800 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 02:04:08.803 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 02:04:08.805 +03:00 [DBG] Getting claims for access token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:04:08.825 +03:00 [DBG] Getting claims for identity token for subject: 59805def-e16d-4f4e-9b58-c01c29a2bd0f and client: dews.web
2018-04-22 02:04:08.844 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****1eCw"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****dDkA"
    }
  ],
  "ActivityId": "0HLD7RFFIEBIQ:00000028",
  "TimeStamp": "2018-04-21T23:04:08Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:04:08.848 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243500373220.2489136255125155",
  "Scope": "openid profile dews.api"
}
2018-04-22 02:04:08.851 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:04:08.856 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:04:10.071 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 02:04:10.077 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:04:10.080 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:04:10.086 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:04:10.090 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:04:10.097 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:04:10.100 +03:00 [DBG] Start key discovery request
2018-04-22 02:04:10.149 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:04:10.158 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:04:10.167 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:04:10.201 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:04:10.203 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:04:10.205 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:04:10.211 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 02:04:10.214 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 02:04:10.216 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 02:04:10.219 +03:00 [DBG] Start userinfo request
2018-04-22 02:04:10.221 +03:00 [DBG] Bearer token found in header
2018-04-22 02:04:10.233 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:04:10.236 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524351848,
    "exp": 1524355448,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524351848,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 02:04:10.238 +03:00 [DBG] Creating userinfo response
2018-04-22 02:04:10.241 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:04:10.245 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:04:10.248 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 02:04:10.250 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:04:10.264 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 02:04:10.267 +03:00 [DBG] End userinfo request
2018-04-22 02:06:29.843 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:06:29.846 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:06:29.851 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-04-22 02:06:29.854 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-04-22 02:06:29.857 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-04-22 02:06:29.860 +03:00 [DBG] Processing signout request for 59805def-e16d-4f4e-9b58-c01c29a2bd0f
2018-04-22 02:06:29.863 +03:00 [DBG] Start end session request validation
2018-04-22 02:06:29.867 +03:00 [DBG] Start identity token validation
2018-04-22 02:06:29.870 +03:00 [DBG] Client found: dews.web / Developer News
2018-04-22 02:06:29.892 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:06:29.895 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1524351848,
    "exp": 1524352148,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.57871810802825771524351846567",
    "iat": 1524351848,
    "at_hash": "m8Kr5ev8YskpdKvy40QoKw",
    "sid": "6716fb10f883a9e0a228cc472e77decf",
    "sub": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
    "auth_time": 1524351848,
    "idp": "Twitter",
    "name": "Murat_Akkass",
    "preferred_username": "Murat_Akkass",
    "amr": "external"
  }
}
2018-04-22 02:06:29.898 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjQzNTE4NDgsImV4cCI6MTUyNDM1MjE0OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjU3ODcxODEwODAyODI1NzcxNTI0MzUxODQ2NTY3IiwiaWF0IjoxNTI0MzUxODQ4LCJhdF9oYXNoIjoibThLcjVldjhZc2twZEt2eTQwUW9LdyIsInNpZCI6IjY3MTZmYjEwZjg4M2E5ZTBhMjI4Y2M0NzJlNzdkZWNmIiwic3ViIjoiNTk4MDVkZWYtZTE2ZC00ZjRlLTliNTgtYzAxYzI5YTJiZDBmIiwiYXV0aF90aW1lIjoxNTI0MzUxODQ4LCJpZHAiOiJUd2l0dGVyIiwibmFtZSI6Ik11cmF0X0Fra2FzcyIsInByZWZlcnJlZF91c2VybmFtZSI6Ik11cmF0X0Fra2FzcyIsImFtciI6WyJleHRlcm5hbCJdfQ.cxUWf0Y7KAd8NC5IwRWdKIlKPWnX165h5eSUJrz1y7eQLYlz4jRaQysyPQHTnHtzb7gA-McHO_3YYhwiBBW_pytURliJjJhgWZbb8scVBexpcFyxU0xeCY1BMGatmrG58t7AIfwgHDSL2VvRewraU9tnaEXjVotEB5UuKA5QwHndlbRC1xoNV8vohPyEs6QyO4dKftUzI16rkH6UbNWhIkLQouZzi9DGSOaLxVcPnZsKIi-JUHu4EljsHknb1k2Y78UkeCkGaLlJeGHPoY5wru7cixyIm6NccZU-VJz58cmFENWDuxpiba7eKm8bkd6D2QarzkgjHYlXM3MLGL1eCw",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-04-22 02:06:29.903 +03:00 [DBG] Success validating end session request from dews.web
2018-04-22 02:06:29.918 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:06:29.920 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:06:29.926 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-04-22 02:06:29.929 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:06:29.933 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-04-22 02:06:29.936 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "59805def-e16d-4f4e-9b58-c01c29a2bd0f",
  "DisplayName": "Murat_Akkass",
  "ActivityId": "0HLD7RFFIEBIR:00000002",
  "TimeStamp": "2018-04-21T23:06:29Z",
  "ProcessId": 37632,
  "LocalIpAddress": "127.0.0.1:33309",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:06:30.005 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-04-22 02:06:30.017 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-04-22 02:06:30.021 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-04-22 02:06:30.024 +03:00 [DBG] Processing signout callback request
2018-04-22 02:06:30.027 +03:00 [DBG] No client front-channel logout URLs
2018-04-22 02:06:30.035 +03:00 [DBG] No client back-channel logout URLs
2018-04-22 02:06:30.041 +03:00 [INF] Successful signout callback.
2018-04-22 02:06:30.047 +03:00 [DBG] No client front-channel iframe urls
2018-04-22 02:06:30.053 +03:00 [DBG] No client back-channel iframe urls
2018-04-22 02:06:34.338 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:06:34.341 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:06:34.345 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:06:34.349 +03:00 [DBG] Start authorize request
2018-04-22 02:06:34.352 +03:00 [DBG] No user present in authorize request
2018-04-22 02:06:34.355 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:06:34.358 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:06:34.362 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243500373220.2489136255125155",
  "Nonce": "N0.224429724060403181524351994324",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.224429724060403181524351994324",
    "state": "15243500373220.2489136255125155"
  }
}
2018-04-22 02:06:34.365 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 02:06:34.382 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:06:34.386 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:08:26.620 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:08:26.624 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:08:48.984 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:08:48.987 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:09:14.097 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 02:09:14.202 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 02:09:14.216 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 02:09:14.221 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 02:09:14.227 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 02:09:14.234 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 02:09:50.229 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:09:50.398 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:09:50.401 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:09:50.410 +03:00 [DBG] Start authorize request
2018-04-22 02:09:50.427 +03:00 [DBG] No user present in authorize request
2018-04-22 02:09:50.436 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:09:50.513 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:09:50.608 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243521902030.026458544761698066",
  "Nonce": "N0.187157558161429761524352190203",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.187157558161429761524352190203",
    "state": "15243521902030.026458544761698066"
  }
}
2018-04-22 02:09:50.623 +03:00 [INF] Showing login: User is not authenticated
2018-04-22 02:09:50.749 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:09:50.753 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:10:25.772 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:10:25.798 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:11:13.125 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:11:13.129 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:13:20.830 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:13:20.835 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:13:23.660 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:13:23.667 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:13:29.908 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:13:29.911 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:13:53.521 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:13:53.527 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:14:12.387 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:14:12.391 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:15:24.566 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:15:24.570 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:16:11.348 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:16:11.353 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:16:26.065 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:16:26.069 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:16:42.836 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:16:42.845 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:17:31.870 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:17:31.875 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:17:32.203 +03:00 [ERR] An unhandled exception has occurred while executing the request
Microsoft.AspNetCore.Mvc.Razor.Compilation.CompilationFailedException: One or more compilation failures occurred:
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,13): error CS1002: ; expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,13): error CS1513: } expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,13): error CS1513: } expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,18): error CS1001: Identifier expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,18): error CS1514: { expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,18): error CS1513: } expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,18): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(12,12): error CS1519: Invalid token 'class' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(12,17): error CS1001: Identifier expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(12,17): error CS1514: { expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(12,17): error CS1513: } expected
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(12,17): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(13,15): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(13,15): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(13,22): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(13,22): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(14,15): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(14,15): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(14,21): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(14,21): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(14,30): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(14,30): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(15,15): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(15,15): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(15,21): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(15,21): error CS1519: Invalid token '-' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(15,31): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(15,31): error CS1519: Invalid token '=' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(16,10): error CS1519: Invalid token '>' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(16,10): error CS1519: Invalid token '>' in class, struct, or interface member declaration
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(17,2): error CS1520: Method must have a return type
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(12,17): error CS0102: The type '_Views_Account_Login_cshtml' already contains a definition for ''
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(7,7): error CS0103: The name 'Html' does not exist in the current context
C:\Users\murat.akkas\Documents\Visual Studio 2017\Projects\Dews\IdentityServerWithAspNetIdentity\Views\Account\Login.cshtml(11,9): error CS0103: The name 'div' does not exist in the current context
xjpfv0od.1pj(51,26): error CS1001: Identifier expected
xjpfv0od.1pj(51,29): error CS1031: Type expected
xjpfv0od.1pj(51,29): error CS1001: Identifier expected
xjpfv0od.1pj(51,31): error CS1031: Type expected
xjpfv0od.1pj(51,31): error CS1001: Identifier expected
xjpfv0od.1pj(51,31): error CS1003: Syntax error, ',' expected
xjpfv0od.1pj(51,34): error CS1031: Type expected
xjpfv0od.1pj(51,34): error CS1001: Identifier expected
xjpfv0od.1pj(51,34): error CS1003: Syntax error, ',' expected
xjpfv0od.1pj(51,40): error CS1520: Method must have a return type
xjpfv0od.1pj(52,26): error CS1001: Identifier expected
xjpfv0od.1pj(52,36): error CS1520: Method must have a return type
xjpfv0od.1pj(66,5): error CS1022: Type or namespace definition, or end-of-file expected
xjpfv0od.1pj(67,1): error CS1022: Type or namespace definition, or end-of-file expected
xjpfv0od.1pj(57,87): error CS0116: A namespace cannot directly contain members such as fields or methods
xjpfv0od.1pj(59,60): error CS0116: A namespace cannot directly contain members such as fields or methods
xjpfv0od.1pj(61,70): error CS0116: A namespace cannot directly contain members such as fields or methods
xjpfv0od.1pj(63,71): error CS0116: A namespace cannot directly contain members such as fields or methods
xjpfv0od.1pj(51,13): error CS0501: '<invalid-global-code>.BeginContext(?, ?, ?)' must declare a body because it is not marked abstract, extern, or partial
xjpfv0od.1pj(52,13): error CS0501: '<invalid-global-code>.WriteLiteral()' must declare a body because it is not marked abstract, extern, or partial
xjpfv0od.1pj(53,13): error CS0501: '<invalid-global-code>.EndContext()' must declare a body because it is not marked abstract, extern, or partial
xjpfv0od.1pj(65,71): error CS0246: The type or namespace name 'LoginViewModel' could not be found (are you missing a using directive or an assembly reference?)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(RazorCodeDocument codeDocument, String generatedCode)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CompileAndEmit(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.Internal.RazorViewCompiler.CreateCacheEntry(String normalizedPath)
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Razor.Internal.DefaultRazorPageFactoryProvider.CreateFactory(String relativePath)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.CreateCacheResult(HashSet`1 expirationTokens, String relativePath, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.OnCacheMiss(ViewLocationExpanderContext expanderContext, ViewLocationCacheKey cacheKey)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.LocatePageFromViewLocations(ActionContext actionContext, String pageName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.Razor.RazorViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewEngines.CompositeViewEngine.FindView(ActionContext context, String viewName, Boolean isMainPage)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.Internal.ViewResultExecutor.FindView(ActionContext actionContext, ViewResult viewResult)
   at Microsoft.AspNetCore.Mvc.ViewResult.<ExecuteResultAsync>d__26.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeResultAsync>d__19.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResultFilterAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResultExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 43
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-04-22 02:18:12.823 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:18:12.831 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:19:16.791 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:19:16.798 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:19:20.727 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:19:20.732 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:20:28.429 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:20:28.433 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:20:45.176 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:20:45.182 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:20:54.910 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:20:54.913 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:21:29.644 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:21:29.648 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:21:41.036 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-04-22 02:21:59.137 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-04-22 02:21:59.178 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-04-22 02:22:00.105 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLD7RJJ9RAME:00000009",
  "TimeStamp": "2018-04-21T23:22:00Z",
  "ProcessId": 612,
  "LocalIpAddress": "127.0.0.1:9123",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:22:00.126 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:22:00.132 +03:00 [DBG] Adding amr claim with value: external
2018-04-22 02:22:00.143 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:22:00.151 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-04-22 02:22:00.175 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:22:00.179 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:22:00.181 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-04-22 02:22:00.187 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-04-22 02:22:00.190 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-04-22 02:22:00.198 +03:00 [DBG] Start authorize callback request
2018-04-22 02:22:00.207 +03:00 [DBG] User in authorize request: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 02:22:00.210 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:22:00.213 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-04-22 02:22:00.216 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15243521902030.026458544761698066",
  "Nonce": "N0.187157558161429761524352190203",
  "SessionId": "758f2a176c021e509997160ed3ce29e3",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.187157558161429761524352190203",
    "state": "15243521902030.026458544761698066"
  }
}
2018-04-22 02:22:00.266 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-04-22 02:22:00.279 +03:00 [DBG] Creating Implicit Flow response.
2018-04-22 02:22:00.296 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-04-22 02:22:00.300 +03:00 [DBG] Getting claims for access token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 02:22:00.425 +03:00 [DBG] Getting claims for identity token for subject: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29 and client: dews.web
2018-04-22 02:22:00.468 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****OnYg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****s_iQ"
    }
  ],
  "ActivityId": "0HLD7RJJ9RAMF:0000000E",
  "TimeStamp": "2018-04-21T23:22:00Z",
  "ProcessId": 612,
  "LocalIpAddress": "127.0.0.1:9123",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:22:00.481 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15243521902030.026458544761698066",
  "Scope": "openid profile dews.api"
}
2018-04-22 02:22:00.514 +03:00 [DBG] Augmenting SignInContext
2018-04-22 02:22:00.518 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-04-22 02:22:03.321 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-04-22 02:22:03.329 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:22:03.332 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:22:03.342 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:22:03.348 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:22:03.352 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:22:03.359 +03:00 [DBG] Start key discovery request
2018-04-22 02:22:03.466 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:22:03.470 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:22:03.474 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:22:03.547 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-04-22 02:22:03.572 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-04-22 02:22:03.577 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-04-22 02:22:03.592 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-04-22 02:22:03.603 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-04-22 02:22:03.606 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-04-22 02:22:03.631 +03:00 [DBG] Start userinfo request
2018-04-22 02:22:03.640 +03:00 [DBG] Bearer token found in header
2018-04-22 02:22:03.757 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-04-22 02:22:03.771 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1524352920,
    "exp": 1524356520,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
    "auth_time": 1524352920,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-04-22 02:22:03.788 +03:00 [DBG] Creating userinfo response
2018-04-22 02:22:03.796 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:22:03.804 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:22:03.811 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-04-22 02:22:03.813 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-04-22 02:22:03.825 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-04-22 02:22:03.828 +03:00 [DBG] End userinfo request
2018-04-22 02:22:06.214 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-04-22 02:22:06.223 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-04-22 02:22:06.226 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-04-22 02:22:06.240 +03:00 [DBG] Start discovery request
2018-04-22 02:22:06.671 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-04-22 02:22:06.674 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-04-22 02:22:06.677 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-04-22 02:22:06.681 +03:00 [DBG] Start key discovery request
2018-04-22 02:27:04.614 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-04-22 02:27:04.661 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-04-22 02:27:04.664 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-04-22 02:27:04.664 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-04-22 02:27:04.664 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-04-22 02:27:04.664 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-04-22 02:27:05.117 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:27:05.145 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:27:05.154 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-04-22 02:27:05.166 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-04-22 02:27:05.167 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-04-22 02:27:05.174 +03:00 [DBG] Start authorize request
2018-04-22 02:27:05.190 +03:00 [DBG] User in authorize request: 284f46b1-c9ca-40f2-87dc-a5e2f565fb29
2018-04-22 02:27:05.199 +03:00 [DBG] Start authorize request protocol validation
2018-04-22 02:27:05.318 +03:00 [ERR] Invalid redirect_uri: https://localhost:44311
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.86877632796605231524353223560",
    "state": "15243521902030.026458544761698066",
    "prompt": "none"
  }
}
2018-04-22 02:27:05.326 +03:00 [ERR] Request validation failed
2018-04-22 02:27:05.326 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "https://localhost:44311",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.86877632796605231524353223560",
    "state": "15243521902030.026458544761698066",
    "prompt": "none"
  }
}
2018-04-22 02:27:05.374 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "SubjectId": "284f46b1-c9ca-40f2-87dc-a5e2f565fb29",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLD7RTI84FU6:00000001",
  "TimeStamp": "2018-04-21T23:27:05Z",
  "ProcessId": 9036,
  "LocalIpAddress": "127.0.0.1:20078",
  "RemoteIpAddress": "::1"
}
2018-04-22 02:27:05.418 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-04-22 02:27:05.419 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:21.885 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 16:46:21.964 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 16:46:21.972 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 16:46:21.976 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 16:46:21.979 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 16:46:21.981 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 16:46:43.423 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-05-20 16:46:43.432 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-05-20 16:46:43.434 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-05-20 16:46:43.437 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-05-20 16:46:43.440 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-05-20 16:46:43.454 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-05-20 16:46:43.464 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-05-20 16:46:43.467 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-05-20 16:46:43.475 +03:00 [DBG] Start authorize request
2018-05-20 16:46:43.485 +03:00 [INF] Identity.Application was not authenticated. Failure message: No principal.
2018-05-20 16:46:43.494 +03:00 [DBG] No user present in authorize request
2018-05-20 16:46:43.502 +03:00 [DBG] Start authorize request protocol validation
2018-05-20 16:46:43.594 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-20 16:46:43.702 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15268240026380.25228195871699044",
  "Nonce": "N0.440455971113873361526824002638",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.440455971113873361526824002638",
    "state": "15268240026380.25228195871699044"
  }
}
2018-05-20 16:46:43.719 +03:00 [INF] Showing login: User is not authenticated
2018-05-20 16:46:43.870 +03:00 [DBG] Start authorize request protocol validation
2018-05-20 16:46:43.872 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-20 16:46:45.647 +03:00 [INF] AuthenticationScheme: Google was challenged.
2018-05-20 16:46:46.930 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-05-20 16:46:46.957 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-05-20 16:46:47.478 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Google",
  "ProviderUserId": "114587808670829409165",
  "SubjectId": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
  "DisplayName": "MURAT AKKA",
  "Endpoint": "UI",
  "ActivityId": "0HLDUB09CJGRT:00000004",
  "TimeStamp": "2018-05-20T13:46:47Z",
  "ProcessId": 35888,
  "LocalIpAddress": "127.0.0.1:33195",
  "RemoteIpAddress": "::1"
}
2018-05-20 16:46:47.494 +03:00 [DBG] Augmenting SignInContext
2018-05-20 16:46:47.498 +03:00 [DBG] Adding amr claim with value: external
2018-05-20 16:46:47.505 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-05-20 16:46:47.508 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-05-20 16:46:47.528 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:47.531 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:47.533 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-05-20 16:46:47.537 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-05-20 16:46:47.540 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-05-20 16:46:47.553 +03:00 [DBG] Start authorize callback request
2018-05-20 16:46:47.560 +03:00 [DBG] User in authorize request: 58f4753b-32a9-4e5a-816d-266ca5fe2054
2018-05-20 16:46:47.562 +03:00 [DBG] Start authorize request protocol validation
2018-05-20 16:46:47.565 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-20 16:46:47.567 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15268240026380.25228195871699044",
  "Nonce": "N0.440455971113873361526824002638",
  "SessionId": "ce4672535a90397ed83a47071d493867",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.440455971113873361526824002638",
    "state": "15268240026380.25228195871699044"
  }
}
2018-05-20 16:46:47.603 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-05-20 16:46:47.616 +03:00 [DBG] Creating Implicit Flow response.
2018-05-20 16:46:47.630 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-05-20 16:46:47.632 +03:00 [DBG] Getting claims for access token for subject: 58f4753b-32a9-4e5a-816d-266ca5fe2054
2018-05-20 16:46:47.746 +03:00 [DBG] Getting claims for identity token for subject: 58f4753b-32a9-4e5a-816d-266ca5fe2054 and client: dews.web
2018-05-20 16:46:47.778 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****_cVg"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****o-zg"
    }
  ],
  "ActivityId": "0HLDUB09CJGRS:00000004",
  "TimeStamp": "2018-05-20T13:46:47Z",
  "ProcessId": 35888,
  "LocalIpAddress": "127.0.0.1:33195",
  "RemoteIpAddress": "::1"
}
2018-05-20 16:46:47.787 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15268240026380.25228195871699044",
  "Scope": "openid profile dews.api"
}
2018-05-20 16:46:47.813 +03:00 [DBG] Augmenting SignInContext
2018-05-20 16:46:47.817 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-05-20 16:46:49.527 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-05-20 16:46:49.536 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-05-20 16:46:49.539 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-05-20 16:46:49.548 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-05-20 16:46:49.555 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-05-20 16:46:49.558 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-05-20 16:46:49.567 +03:00 [DBG] Start key discovery request
2018-05-20 16:46:49.685 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-05-20 16:46:49.701 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-05-20 16:46:49.706 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-05-20 16:46:49.724 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-05-20 16:46:49.727 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-05-20 16:46:49.729 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-05-20 16:46:49.735 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-05-20 16:46:49.740 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-05-20 16:46:49.742 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-05-20 16:46:49.754 +03:00 [DBG] Start userinfo request
2018-05-20 16:46:49.761 +03:00 [DBG] Bearer token found in header
2018-05-20 16:46:49.836 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-05-20 16:46:49.846 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1526824007,
    "exp": 1526827607,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
    "auth_time": 1526824007,
    "idp": "Google",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-05-20 16:46:49.856 +03:00 [DBG] Creating userinfo response
2018-05-20 16:46:49.863 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-05-20 16:46:49.868 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-05-20 16:46:49.874 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-05-20 16:46:49.877 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-05-20 16:46:49.904 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-05-20 16:46:49.907 +03:00 [DBG] End userinfo request
2018-05-20 16:46:52.474 +03:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2018-05-20 16:46:52.480 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2018-05-20 16:46:52.484 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2018-05-20 16:46:52.492 +03:00 [DBG] Start discovery request
2018-05-20 16:46:52.881 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-05-20 16:46:52.884 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-05-20 16:46:52.886 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-05-20 16:46:52.889 +03:00 [DBG] Start key discovery request
2018-05-20 16:46:57.313 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:57.318 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:57.321 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-05-20 16:46:57.326 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-05-20 16:46:57.329 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-05-20 16:46:57.340 +03:00 [DBG] Processing signout request for 58f4753b-32a9-4e5a-816d-266ca5fe2054
2018-05-20 16:46:57.351 +03:00 [DBG] Start end session request validation
2018-05-20 16:46:57.361 +03:00 [DBG] Start identity token validation
2018-05-20 16:46:57.364 +03:00 [DBG] Client found: dews.web / Developer News
2018-05-20 16:46:57.378 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-05-20 16:46:57.380 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1526824007,
    "exp": 1526824307,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.440455971113873361526824002638",
    "iat": 1526824007,
    "at_hash": "Wu3NVOSeYfJb0e2u4SEomw",
    "sid": "ce4672535a90397ed83a47071d493867",
    "sub": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
    "auth_time": 1526824007,
    "idp": "Google",
    "name": "MURAT AKKA",
    "preferred_username": "MURAT AKKA",
    "amr": "external"
  }
}
2018-05-20 16:46:57.395 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjY4MjQwMDcsImV4cCI6MTUyNjgyNDMwNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQ0MDQ1NTk3MTExMzg3MzM2MTUyNjgyNDAwMjYzOCIsImlhdCI6MTUyNjgyNDAwNywiYXRfaGFzaCI6Ild1M05WT1NlWWZKYjBlMnU0U0VvbXciLCJzaWQiOiJjZTQ2NzI1MzVhOTAzOTdlZDgzYTQ3MDcxZDQ5Mzg2NyIsInN1YiI6IjU4ZjQ3NTNiLTMyYTktNGU1YS04MTZkLTI2NmNhNWZlMjA1NCIsImF1dGhfdGltZSI6MTUyNjgyNDAwNywiaWRwIjoiR29vZ2xlIiwibmFtZSI6Ik1VUkFUIEFLS0HFniIsInByZWZlcnJlZF91c2VybmFtZSI6Ik1VUkFUIEFLS0HFniIsImFtciI6WyJleHRlcm5hbCJdfQ.PruCCzCnrqpv9ToE9GYWWycaEhJ9gj2ZYeZdg_37TSQ4BjF4et-cMBhV3GYsXRQSCFC_-N1GsYonHsYg0cI3Hqv-5D4BOQvOUuiCSwwdjQLFK8iA0Y6G48P4dhgMGxuBm7DhsZemhAIsSeEWc-t44ypTWFB1yRx0w84hfOmmshT9Ht962CpVFnxSyNIAj-m_lOc5n2Wv6wIEp3uBfMX80TlQDMDEQLZ4_a2uJgjYjbH9fYp297lKnNUBuBAG09FFc76p33FPG6n26qlL9fstUO7TkARmlLQOPmNCnurUHjGVmyiRSNYWUyJu7hn12X_D7vrN46wlsJlhGCOMcE_cVg",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-05-20 16:46:57.399 +03:00 [DBG] Success validating end session request from dews.web
2018-05-20 16:46:57.449 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:57.452 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-20 16:46:57.556 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-05-20 16:46:57.559 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-05-20 16:46:57.562 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-05-20 16:46:57.574 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "58f4753b-32a9-4e5a-816d-266ca5fe2054",
  "DisplayName": "MURAT AKKA",
  "ActivityId": "0HLDUB09CJGRT:00000008",
  "TimeStamp": "2018-05-20T13:46:57Z",
  "ProcessId": 35888,
  "LocalIpAddress": "127.0.0.1:33195",
  "RemoteIpAddress": "::1"
}
2018-05-20 16:46:57.891 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-05-20 16:46:57.899 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-05-20 16:46:57.901 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-05-20 16:46:57.916 +03:00 [DBG] Processing signout callback request
2018-05-20 16:46:57.945 +03:00 [DBG] No client front-channel logout URLs
2018-05-20 16:46:57.947 +03:00 [DBG] No client back-channel logout URLs
2018-05-20 16:46:57.950 +03:00 [INF] Successful signout callback.
2018-05-20 16:46:57.953 +03:00 [DBG] No client front-channel iframe urls
2018-05-20 16:46:57.958 +03:00 [DBG] No client back-channel iframe urls
2018-05-20 18:45:25.678 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 18:45:25.730 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 18:45:25.733 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 18:45:25.734 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 18:45:25.734 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 18:45:25.734 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 19:40:31.178 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 19:40:31.228 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 19:40:31.233 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 19:40:31.235 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 19:40:31.237 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 19:40:31.238 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 19:51:36.198 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 19:51:36.248 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 19:51:36.252 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 19:51:36.256 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 19:51:36.257 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 19:51:36.259 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 20:00:00.304 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 20:00:00.342 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 20:00:00.345 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 20:00:00.346 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 20:00:00.346 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 20:00:00.346 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 20:00:16.898 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 20:00:16.951 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 20:00:16.955 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 20:00:16.956 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 20:00:16.956 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 20:00:16.956 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 20:27:45.252 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 20:27:45.304 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 20:27:45.308 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 20:27:45.309 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 20:27:45.313 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 20:27:45.315 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 20:28:01.183 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 20:28:01.243 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 20:28:01.247 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 20:28:01.251 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 20:28:01.253 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 20:28:01.254 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 21:12:00.198 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 21:12:00.253 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 21:12:00.258 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 21:12:00.259 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 21:12:00.261 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 21:12:00.262 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 21:23:26.515 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 21:23:26.570 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 21:23:26.575 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 21:23:26.577 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 21:23:26.579 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 21:23:26.581 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 21:45:51.264 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 21:45:51.300 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 21:45:51.303 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 21:45:51.303 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 21:45:51.303 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 21:45:51.303 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 22:00:44.561 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-20 22:00:44.659 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-20 22:00:44.669 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-20 22:00:44.671 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-20 22:00:44.673 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-20 22:00:44.675 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-20 22:00:46.458 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-05-20 22:00:46.689 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-05-20 22:00:46.696 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-05-20 22:00:46.707 +03:00 [DBG] Start authorize request
2018-05-20 22:00:46.733 +03:00 [DBG] No user present in authorize request
2018-05-20 22:00:46.753 +03:00 [DBG] Start authorize request protocol validation
2018-05-20 22:00:47.104 +03:00 [ERR] Invalid redirect_uri: http://localhost:4200
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://developernews.site"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.355214298871528331526842846440",
    "state": "15268428464400.32790307384475503"
  }
}
2018-05-20 22:00:47.112 +03:00 [ERR] Request validation failed
2018-05-20 22:00:47.115 +03:00 [INF] {
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "AllowedRedirectUris": [
    "http://developernews.site"
  ],
  "SubjectId": "anonymous",
  "RequestedScopes": "",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.355214298871528331526842846440",
    "state": "15268428464400.32790307384475503"
  }
}
2018-05-20 22:00:47.199 +03:00 [INF] {
  "Name": "Token Issued Failure",
  "Category": "Token",
  "EventType": "Failure",
  "Id": 2001,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "Endpoint": "Authorize",
  "Scopes": "",
  "Error": "unauthorized_client",
  "ErrorDescription": "Invalid redirect_uri",
  "ActivityId": "0HLDUGFUSMNJ7:00000002",
  "TimeStamp": "2018-05-20T19:00:47Z",
  "ProcessId": 27920,
  "LocalIpAddress": "127.0.0.1:31597",
  "RemoteIpAddress": "::1"
}
2018-05-23 01:49:55.674 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-23 01:49:55.745 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-23 01:49:55.754 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-23 01:49:55.757 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-23 01:49:55.759 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-23 01:49:55.762 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-23 01:54:18.836 +03:00 [INF] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-05-23 01:54:18.926 +03:00 [DBG] Using Identity.Application as default scheme for authentication
2018-05-23 01:54:18.935 +03:00 [DBG] Using Identity.External as default scheme for sign-in
2018-05-23 01:54:18.938 +03:00 [DBG] Using Identity.External as default scheme for sign-out
2018-05-23 01:54:18.941 +03:00 [DBG] Using Identity.Application as default scheme for challenge
2018-05-23 01:54:18.944 +03:00 [DBG] Using Identity.Application as default scheme for forbid
2018-05-23 01:55:11.603 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-05-23 01:55:11.754 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-05-23 01:55:11.756 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-05-23 01:55:11.765 +03:00 [DBG] Start authorize request
2018-05-23 01:55:11.783 +03:00 [DBG] No user present in authorize request
2018-05-23 01:55:11.792 +03:00 [DBG] Start authorize request protocol validation
2018-05-23 01:55:11.881 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-23 01:55:11.977 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15270296694920.28199787998231174",
  "Nonce": "N0.4937560399803661527029711564",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.4937560399803661527029711564",
    "state": "15270296694920.28199787998231174"
  }
}
2018-05-23 01:55:11.991 +03:00 [INF] Showing login: User is not authenticated
2018-05-23 01:55:12.180 +03:00 [DBG] Start authorize request protocol validation
2018-05-23 01:55:12.183 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-23 01:55:17.949 +03:00 [INF] AuthenticationScheme: Twitter was challenged.
2018-05-23 01:55:19.137 +03:00 [INF] AuthenticationScheme: Identity.External signed in.
2018-05-23 01:55:19.208 +03:00 [INF] AuthenticationScheme: Identity.External was successfully authenticated.
2018-05-23 01:55:20.839 +03:00 [INF] {
  "Name": "User Login Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1000,
  "Provider": "Twitter",
  "ProviderUserId": "2801819916",
  "SubjectId": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
  "DisplayName": "Murat_Akkass",
  "Endpoint": "UI",
  "ActivityId": "0HLE06RPRC9NB:00000004",
  "TimeStamp": "2018-05-22T22:55:20Z",
  "ProcessId": 2556,
  "LocalIpAddress": "127.0.0.1:12672",
  "RemoteIpAddress": "::1"
}
2018-05-23 01:55:20.859 +03:00 [DBG] Augmenting SignInContext
2018-05-23 01:55:20.864 +03:00 [DBG] Adding amr claim with value: external
2018-05-23 01:55:20.875 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-05-23 01:55:20.886 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-05-23 01:55:20.947 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-23 01:55:20.950 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-23 01:55:20.952 +03:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2018-05-23 01:55:20.957 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2018-05-23 01:55:20.960 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2018-05-23 01:55:20.972 +03:00 [DBG] Start authorize callback request
2018-05-23 01:55:20.981 +03:00 [DBG] User in authorize request: cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff
2018-05-23 01:55:20.983 +03:00 [DBG] Start authorize request protocol validation
2018-05-23 01:55:20.986 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-23 01:55:20.989 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15270296694920.28199787998231174",
  "Nonce": "N0.4937560399803661527029711564",
  "SessionId": "467e02c3508a5690c3ef135279a9f693",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.4937560399803661527029711564",
    "state": "15270296694920.28199787998231174"
  }
}
2018-05-23 01:55:21.106 +03:00 [DBG] Client is configured to not require consent, no consent is required
2018-05-23 01:55:21.121 +03:00 [DBG] Creating Implicit Flow response.
2018-05-23 01:55:21.139 +03:00 [DBG] Getting claims for access token for client: dews.web
2018-05-23 01:55:21.143 +03:00 [DBG] Getting claims for access token for subject: cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff
2018-05-23 01:55:21.364 +03:00 [DBG] Getting claims for identity token for subject: cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff and client: dews.web
2018-05-23 01:55:21.477 +03:00 [INF] {
  "Name": "Token Issued Success",
  "Category": "Token",
  "EventType": "Success",
  "Id": 2000,
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "Endpoint": "Authorize",
  "SubjectId": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
  "Scopes": "openid profile dews.api",
  "GrantType": "implicit",
  "Tokens": [
    {
      "TokenType": "id_token",
      "TokenValue": "****VctA"
    },
    {
      "TokenType": "access_token",
      "TokenValue": "****QIog"
    }
  ],
  "ActivityId": "0HLE06RPRC9NA:00000004",
  "TimeStamp": "2018-05-22T22:55:21Z",
  "ProcessId": 2556,
  "LocalIpAddress": "127.0.0.1:12672",
  "RemoteIpAddress": "::1"
}
2018-05-23 01:55:21.492 +03:00 [INF] Authorize endpoint response
{
  "SubjectId": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
  "ClientId": "dews.web",
  "RedirectUri": "http://localhost:4200",
  "State": "15270296694920.28199787998231174",
  "Scope": "openid profile dews.api"
}
2018-05-23 01:55:21.534 +03:00 [DBG] Augmenting SignInContext
2018-05-23 01:55:21.539 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2018-05-23 01:55:23.685 +03:00 [DBG] CORS request made for path: /.well-known/openid-configuration/jwks from origin: http://localhost:4200
2018-05-23 01:55:23.698 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-05-23 01:55:23.701 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-05-23 01:55:23.715 +03:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2018-05-23 01:55:23.723 +03:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2018-05-23 01:55:23.727 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2018-05-23 01:55:23.736 +03:00 [DBG] Start key discovery request
2018-05-23 01:55:23.828 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-05-23 01:55:23.831 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-05-23 01:55:23.834 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-05-23 01:55:23.851 +03:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:4200
2018-05-23 01:55:23.853 +03:00 [DBG] Client list checked and origin: http://localhost:4200 is allowed
2018-05-23 01:55:23.856 +03:00 [DBG] CorsPolicyService allowed origin: http://localhost:4200
2018-05-23 01:55:23.863 +03:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2018-05-23 01:55:23.870 +03:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2018-05-23 01:55:23.876 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2018-05-23 01:55:23.894 +03:00 [DBG] Start userinfo request
2018-05-23 01:55:23.906 +03:00 [DBG] Bearer token found in header
2018-05-23 01:55:24.087 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-05-23 01:55:24.125 +03:00 [DBG] Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid",
  "Claims": {
    "nbf": 1527029721,
    "exp": 1527033321,
    "iss": "http://localhost:5000",
    "aud": [
      "http://localhost:5000/resources",
      "dews.api"
    ],
    "client_id": "dews.web",
    "sub": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
    "auth_time": 1527029720,
    "idp": "Twitter",
    "scope": [
      "openid",
      "profile",
      "dews.api"
    ],
    "amr": "external"
  }
}
2018-05-23 01:55:24.141 +03:00 [DBG] Creating userinfo response
2018-05-23 01:55:24.151 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-05-23 01:55:24.158 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-05-23 01:55:24.166 +03:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2018-05-23 01:55:24.168 +03:00 [DBG] Scopes in access token: openid profile dews.api
2018-05-23 01:55:24.241 +03:00 [INF] Profile service returned to the following claim types: sub name preferred_username
2018-05-23 01:55:24.244 +03:00 [DBG] End userinfo request
2018-05-23 01:55:34.290 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-23 01:55:34.294 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-23 01:55:34.298 +03:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2018-05-23 01:55:34.304 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2018-05-23 01:55:34.307 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2018-05-23 01:55:34.321 +03:00 [DBG] Processing signout request for cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff
2018-05-23 01:55:34.332 +03:00 [DBG] Start end session request validation
2018-05-23 01:55:34.343 +03:00 [DBG] Start identity token validation
2018-05-23 01:55:34.346 +03:00 [DBG] Client found: dews.web / Developer News
2018-05-23 01:55:34.390 +03:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2018-05-23 01:55:34.393 +03:00 [DBG] Token validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "ValidateLifetime": false,
  "Claims": {
    "nbf": 1527029721,
    "exp": 1527030021,
    "iss": "http://localhost:5000",
    "aud": "dews.web",
    "nonce": "N0.4937560399803661527029711564",
    "iat": 1527029721,
    "at_hash": "8IJBmDn42shO8otZVX7KLQ",
    "sid": "467e02c3508a5690c3ef135279a9f693",
    "sub": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
    "auth_time": 1527029720,
    "idp": "Twitter",
    "name": "Murat_Akkass",
    "preferred_username": "Murat_Akkass",
    "amr": "external"
  }
}
2018-05-23 01:55:34.411 +03:00 [INF] End session request validation success
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "SubjectId": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
  "PostLogOutUri": "http://localhost:4200",
  "Raw": {
    "id_token_hint": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ5MzQ2NDQwMDJiMWJkZGQ1ZDZiZTRhOGY0ZWE4ZjkxIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1MjcwMjk3MjEsImV4cCI6MTUyNzAzMDAyMSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiZGV3cy53ZWIiLCJub25jZSI6Ik4wLjQ5Mzc1NjAzOTk4MDM2NjE1MjcwMjk3MTE1NjQiLCJpYXQiOjE1MjcwMjk3MjEsImF0X2hhc2giOiI4SUpCbURuNDJzaE84b3RaVlg3S0xRIiwic2lkIjoiNDY3ZTAyYzM1MDhhNTY5MGMzZWYxMzUyNzlhOWY2OTMiLCJzdWIiOiJjZDlhYjhhOC1jYTc2LTQzMzQtOWMzYy0yN2Y5ZTZhYjdlZmYiLCJhdXRoX3RpbWUiOjE1MjcwMjk3MjAsImlkcCI6IlR3aXR0ZXIiLCJuYW1lIjoiTXVyYXRfQWtrYXNzIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiTXVyYXRfQWtrYXNzIiwiYW1yIjpbImV4dGVybmFsIl19.0mxfjkp3b0RzEvX5PS3hLUAu0hzzRfxqN7LvYbbtOXY_XF2lzyR1_-QdvNh2YeaOw_zK9-kKft9ue29bMetw9sQomdAQ80v6IaWCsOFls8LJ9dRsKIEOYACJRwrYbntSlL6uMynrEoLLH8lVuGHybzZyO5DTt_IRvgewKY5JgVssFgtUOrXZclbJ76s1o9cyw2wDmXgl4Qa5xJE3IO_EIdYVJ1GLgQOlfHVU6nfpKEMPIwMJSuymiu9t3Fo_anpaVBXwQWbKHX9W86F4yzPBTkYDzUGG9uivw5jC3yNRbaJQsjyr5jGYtEzpGExOMWkasHLABGABnEVB7xlKivVctA",
    "post_logout_redirect_uri": "http://localhost:4200"
  }
}
2018-05-23 01:55:34.413 +03:00 [DBG] Success validating end session request from dews.web
2018-05-23 01:55:34.448 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-23 01:55:34.453 +03:00 [INF] AuthenticationScheme: Identity.Application was successfully authenticated.
2018-05-23 01:55:34.590 +03:00 [INF] AuthenticationScheme: Identity.Application signed out.
2018-05-23 01:55:34.592 +03:00 [INF] AuthenticationScheme: Identity.External signed out.
2018-05-23 01:55:34.595 +03:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2018-05-23 01:55:34.610 +03:00 [INF] {
  "Name": "User Logout Success",
  "Category": "Authentication",
  "EventType": "Success",
  "Id": 1002,
  "SubjectId": "cd9ab8a8-ca76-4334-9c3c-27f9e6ab7eff",
  "DisplayName": "Murat_Akkass",
  "ActivityId": "0HLE06RPRC9NB:00000007",
  "TimeStamp": "2018-05-22T22:55:34Z",
  "ProcessId": 2556,
  "LocalIpAddress": "127.0.0.1:12672",
  "RemoteIpAddress": "::1"
}
2018-05-23 01:55:35.004 +03:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2018-05-23 01:55:35.009 +03:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2018-05-23 01:55:35.012 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2018-05-23 01:55:35.025 +03:00 [DBG] Processing signout callback request
2018-05-23 01:55:35.044 +03:00 [DBG] No client front-channel logout URLs
2018-05-23 01:55:35.046 +03:00 [DBG] No client back-channel logout URLs
2018-05-23 01:55:35.052 +03:00 [INF] Successful signout callback.
2018-05-23 01:55:35.054 +03:00 [DBG] No client front-channel iframe urls
2018-05-23 01:55:35.057 +03:00 [DBG] No client back-channel iframe urls
2018-05-23 01:55:47.259 +03:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2018-05-23 01:55:47.265 +03:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2018-05-23 01:55:47.271 +03:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2018-05-23 01:55:47.275 +03:00 [DBG] Start authorize request
2018-05-23 01:55:47.280 +03:00 [DBG] No user present in authorize request
2018-05-23 01:55:47.283 +03:00 [DBG] Start authorize request protocol validation
2018-05-23 01:55:47.290 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-23 01:55:47.296 +03:00 [INF] ValidatedAuthorizeRequest
{
  "ClientId": "dews.web",
  "ClientName": "Developer News",
  "RedirectUri": "http://localhost:4200",
  "AllowedRedirectUris": [
    "http://localhost:4200"
  ],
  "SubjectId": "anonymous",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "GrantType": "implicit",
  "RequestedScopes": "openid profile dews.api",
  "State": "15270296694920.28199787998231174",
  "Nonce": "N0.97828770635298891527029747243",
  "Raw": {
    "client_id": "dews.web",
    "redirect_uri": "http://localhost:4200",
    "response_type": "id_token token",
    "scope": "openid profile dews.api",
    "nonce": "N0.97828770635298891527029747243",
    "state": "15270296694920.28199787998231174"
  }
}
2018-05-23 01:55:47.300 +03:00 [INF] Showing login: User is not authenticated
2018-05-23 01:55:47.392 +03:00 [DBG] Start authorize request protocol validation
2018-05-23 01:55:47.395 +03:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2018-05-23 01:55:48.661 +03:00 [INF] AuthenticationScheme: Google was challenged.
